!function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n,i=t(function(e,t){e.exports=function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),n=e(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),i=(n.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),r=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e},a=function(e){try{return!!e()}catch(e){return!0}},o=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),s=t.document,u=i(s)&&i(s.createElement),c=!o&&!a(function(){return 7!=Object.defineProperty(u?s.createElement("div"):{},"a",{get:function(){return 7}}).a}),l=Object.defineProperty,h={f:o?Object.defineProperty:function(e,t,n){if(r(e),t=function(e,t){if(!i(e))return e;var n,r;if("function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t),r(n),c)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},p=o?function(e,t,n){return h.f(e,t,function(e,t){return{enumerable:!1,configurable:!0,writable:!0,value:t}}(0,n))}:function(e,t,n){return e[t]=n,e},d={}.hasOwnProperty,f=function(e,t){return d.call(e,t)},m=0,v=Math.random(),g=e(function(e){var i="Symbol(".concat("src",")_",(++m+v).toString(36)),r=Function.toString,a=(""+r).split("toString");n.inspectSource=function(e){return r.call(e)},(e.exports=function(e,n,r,o){var s="function"==typeof r;s&&(f(r,"name")||p(r,"name",n)),e[n]!==r&&(s&&(f(r,i)||p(r,i,e[n]?""+e[n]:a.join(String(n)))),e===t?e[n]=r:o?e[n]?e[n]=r:p(e,n,r):(delete e[n],p(e,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||r.call(this)})}),y=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},x=function(e,i,r){var a,o,s,u,c=e&x.F,l=e&x.G,h=e&x.S,d=e&x.P,f=e&x.B,m=l?t:h?t[i]||(t[i]={}):(t[i]||{}).prototype,v=l?n:n[i]||(n[i]={}),b=v.prototype||(v.prototype={});for(a in l&&(r=i),r)s=((o=!c&&m&&void 0!==m[a])?m:r)[a],u=f&&o?y(s,t):d&&"function"==typeof s?y(Function.call,s):s,m&&g(m,a,s,e&x.U),v[a]!=s&&p(v,a,u),d&&b[a]!=s&&(b[a]=s)};t.core=n,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var b=x,w=Math.ceil,E=Math.floor,_=function(e){return isNaN(e=+e)?0:(e>0?E:w)(e)},M=function(e,t){var n,i,r=String(function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}(e)),a=_(t),o=r.length;return a<0||a>=o?void 0:(n=r.charCodeAt(a))<55296||n>56319||a+1===o||(i=r.charCodeAt(a+1))<56320||i>57343?n:i-56320+(n-55296<<10)+65536};b(b.P,"String",{codePointAt:function(e){return M(this,e)}}),n.String.codePointAt;var S=Math.max,A=Math.min,D=String.fromCharCode,T=String.fromCodePoint;b(b.S+b.F*(!!T&&1!=T.length),"String",{fromCodePoint:function(e){for(var t,n,i,r=arguments,a=[],o=arguments.length,s=0;o>s;){if(t=+r[s++],i=1114111,((n=_(n=t))<0?S(n+i,0):A(n,i))!==t)throw RangeError(t+" is not a valid code point");a.push(t<65536?D(t):D(55296+((t-=65536)>>10),t%1024+56320))}return a.join("")}}),n.String.fromCodePoint;var C,F,L,R,P,I,O,B,N,k,U,z,H,G,V={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},j={isSpaceSeparator:function(e){return V.Space_Separator.test(e)},isIdStartChar:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||V.ID_Start.test(e)},isIdContinueChar:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||V.ID_Continue.test(e)},isDigit:function(e){return/[0-9]/.test(e)},isHexDigit:function(e){return/[0-9A-Fa-f]/.test(e)}};function W(){for(k="default",U="",z=!1,H=1;;){G=X();var e=q[k]();if(e)return e}}function X(){if(C[R])return String.fromCodePoint(C.codePointAt(R))}function $(){var e=X();return"\n"===e?(P++,I=0):e?I+=e.length:I++,e&&(R+=e.length),e}var q={default:function(){switch(G){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void $();case"/":return $(),void(k="comment");case void 0:return $(),Y("eof")}if(!j.isSpaceSeparator(G))return q[F]();$()},comment:function(){switch(G){case"*":return $(),void(k="multiLineComment");case"/":return $(),void(k="singleLineComment")}throw te($())},multiLineComment:function(){switch(G){case"*":return $(),void(k="multiLineCommentAsterisk");case void 0:throw te($())}$()},multiLineCommentAsterisk:function(){switch(G){case"*":return void $();case"/":return $(),void(k="default");case void 0:throw te($())}$(),k="multiLineComment"},singleLineComment:function(){switch(G){case"\n":case"\r":case"\u2028":case"\u2029":return $(),void(k="default");case void 0:return $(),Y("eof")}$()},value:function(){switch(G){case"{":case"[":return Y("punctuator",$());case"n":return $(),J("ull"),Y("null",null);case"t":return $(),J("rue"),Y("boolean",!0);case"f":return $(),J("alse"),Y("boolean",!1);case"-":case"+":return"-"===$()&&(H=-1),void(k="sign");case".":return U=$(),void(k="decimalPointLeading");case"0":return U=$(),void(k="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return U=$(),void(k="decimalInteger");case"I":return $(),J("nfinity"),Y("numeric",1/0);case"N":return $(),J("aN"),Y("numeric",NaN);case'"':case"'":return z='"'===$(),U="",void(k="string")}throw te($())},identifierNameStartEscape:function(){if("u"!==G)throw te($());$();var e=Z();switch(e){case"$":case"_":break;default:if(!j.isIdStartChar(e))throw ie()}U+=e,k="identifierName"},identifierName:function(){switch(G){case"$":case"_":case"‌":case"‍":return void(U+=$());case"\\":return $(),void(k="identifierNameEscape")}if(!j.isIdContinueChar(G))return Y("identifier",U);U+=$()},identifierNameEscape:function(){if("u"!==G)throw te($());$();var e=Z();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!j.isIdContinueChar(e))throw ie()}U+=e,k="identifierName"},sign:function(){switch(G){case".":return U=$(),void(k="decimalPointLeading");case"0":return U=$(),void(k="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return U=$(),void(k="decimalInteger");case"I":return $(),J("nfinity"),Y("numeric",H*(1/0));case"N":return $(),J("aN"),Y("numeric",NaN)}throw te($())},zero:function(){switch(G){case".":return U+=$(),void(k="decimalPoint");case"e":case"E":return U+=$(),void(k="decimalExponent");case"x":case"X":return U+=$(),void(k="hexadecimal")}return Y("numeric",0*H)},decimalInteger:function(){switch(G){case".":return U+=$(),void(k="decimalPoint");case"e":case"E":return U+=$(),void(k="decimalExponent")}if(!j.isDigit(G))return Y("numeric",H*Number(U));U+=$()},decimalPointLeading:function(){if(j.isDigit(G))return U+=$(),void(k="decimalFraction");throw te($())},decimalPoint:function(){switch(G){case"e":case"E":return U+=$(),void(k="decimalExponent")}return j.isDigit(G)?(U+=$(),void(k="decimalFraction")):Y("numeric",H*Number(U))},decimalFraction:function(){switch(G){case"e":case"E":return U+=$(),void(k="decimalExponent")}if(!j.isDigit(G))return Y("numeric",H*Number(U));U+=$()},decimalExponent:function(){switch(G){case"+":case"-":return U+=$(),void(k="decimalExponentSign")}if(j.isDigit(G))return U+=$(),void(k="decimalExponentInteger");throw te($())},decimalExponentSign:function(){if(j.isDigit(G))return U+=$(),void(k="decimalExponentInteger");throw te($())},decimalExponentInteger:function(){if(!j.isDigit(G))return Y("numeric",H*Number(U));U+=$()},hexadecimal:function(){if(j.isHexDigit(G))return U+=$(),void(k="hexadecimalInteger");throw te($())},hexadecimalInteger:function(){if(!j.isHexDigit(G))return Y("numeric",H*Number(U));U+=$()},string:function(){switch(G){case"\\":return $(),void(U+=function(){switch(X()){case"b":return $(),"\b";case"f":return $(),"\f";case"n":return $(),"\n";case"r":return $(),"\r";case"t":return $(),"\t";case"v":return $(),"\v";case"0":if($(),j.isDigit(X()))throw te($());return"\0";case"x":return $(),function(){var e="",t=X();if(!j.isHexDigit(t))throw te($());if(e+=$(),t=X(),!j.isHexDigit(t))throw te($());return e+=$(),String.fromCodePoint(parseInt(e,16))}();case"u":return $(),Z();case"\n":case"\u2028":case"\u2029":return $(),"";case"\r":return $(),"\n"===X()&&$(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw te($())}return $()}());case'"':return z?($(),Y("string",U)):void(U+=$());case"'":return z?void(U+=$()):($(),Y("string",U));case"\n":case"\r":throw te($());case"\u2028":case"\u2029":e=G,console.warn("JSON5: '"+re(e)+"' in strings is not valid ECMAScript; consider escaping");break;case void 0:throw te($())}var e;U+=$()},start:function(){switch(G){case"{":case"[":return Y("punctuator",$())}k="value"},beforePropertyName:function(){switch(G){case"$":case"_":return U=$(),void(k="identifierName");case"\\":return $(),void(k="identifierNameStartEscape");case"}":return Y("punctuator",$());case'"':case"'":return z='"'===$(),void(k="string")}if(j.isIdStartChar(G))return U+=$(),void(k="identifierName");throw te($())},afterPropertyName:function(){if(":"===G)return Y("punctuator",$());throw te($())},beforePropertyValue:function(){k="value"},afterPropertyValue:function(){switch(G){case",":case"}":return Y("punctuator",$())}throw te($())},beforeArrayValue:function(){if("]"===G)return Y("punctuator",$());k="value"},afterArrayValue:function(){switch(G){case",":case"]":return Y("punctuator",$())}throw te($())},end:function(){throw te($())}};function Y(e,t){return{type:e,value:t,line:P,column:I}}function J(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(X()!==i)throw te($());$()}}function Z(){for(var e="",t=4;t-- >0;){var n=X();if(!j.isHexDigit(n))throw te($());e+=$()}return String.fromCodePoint(parseInt(e,16))}var K={start:function(){if("eof"===O.type)throw ne();Q()},beforePropertyName:function(){switch(O.type){case"identifier":case"string":return B=O.value,void(F="afterPropertyName");case"punctuator":return void ee();case"eof":throw ne()}},afterPropertyName:function(){if("eof"===O.type)throw ne();F="beforePropertyValue"},beforePropertyValue:function(){if("eof"===O.type)throw ne();Q()},beforeArrayValue:function(){if("eof"===O.type)throw ne();"punctuator"!==O.type||"]"!==O.value?Q():ee()},afterPropertyValue:function(){if("eof"===O.type)throw ne();switch(O.value){case",":return void(F="beforePropertyName");case"}":ee()}},afterArrayValue:function(){if("eof"===O.type)throw ne();switch(O.value){case",":return void(F="beforeArrayValue");case"]":ee()}},end:function(){}};function Q(){var e;switch(O.type){case"punctuator":switch(O.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=O.value}if(void 0===N)N=e;else{var t=L[L.length-1];Array.isArray(t)?t.push(e):t[B]=e}if(null!==e&&"object"==typeof e)L.push(e),F=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var n=L[L.length-1];F=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function ee(){L.pop();var e=L[L.length-1];F=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function te(e){return ae(void 0===e?"JSON5: invalid end of input at "+P+":"+I:"JSON5: invalid character '"+re(e)+"' at "+P+":"+I)}function ne(){return ae("JSON5: invalid end of input at "+P+":"+I)}function ie(){return ae("JSON5: invalid identifier character at "+P+":"+(I-=5))}function re(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function ae(e){var t=new SyntaxError(e);return t.lineNumber=P,t.columnNumber=I,t}return{parse:function(e,t){C=String(e),F="start",L=[],R=0,P=1,I=0,O=void 0,B=void 0,N=void 0;do{O=W(),K[F]()}while("eof"!==O.type);return"function"==typeof t?function e(t,n,i){var r=t[n];if(null!=r&&"object"==typeof r)for(var a in r){var o=e(r,a,i);void 0===o?delete r[a]:r[a]=o}return i.call(t,n,r)}({"":N},"",t):N},stringify:function(e,t,n){var i,r,a,o=[],s="",u="";if(null==t||"object"!=typeof t||Array.isArray(t)||(n=t.space,a=t.quote,t=t.replacer),"function"==typeof t)r=t;else if(Array.isArray(t)){i=[];for(var c=0,l=t;c<l.length;c+=1){var h=l[c],p=void 0;"string"==typeof h?p=h:("number"==typeof h||h instanceof String||h instanceof Number)&&(p=String(h)),void 0!==p&&i.indexOf(p)<0&&i.push(p)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),u="          ".substr(0,n)):"string"==typeof n&&(u=n.substr(0,10)),function e(t,n){var a=n[t];switch(null!=a&&("function"==typeof a.toJSON5?a=a.toJSON5(t):"function"==typeof a.toJSON&&(a=a.toJSON(t))),r&&(a=r.call(n,t,a)),a instanceof Number?a=Number(a):a instanceof String?a=String(a):a instanceof Boolean&&(a=a.valueOf()),a){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof a?d(a):"number"==typeof a?String(a):"object"==typeof a?Array.isArray(a)?function(t){if(o.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");o.push(t);var n=s;s+=u;for(var i,r=[],a=0;a<t.length;a++){var c=e(String(a),t);r.push(void 0!==c?c:"null")}if(0===r.length)i="[]";else if(""===u){var l=r.join(",");i="["+l+"]"}else{var h=",\n"+s,p=r.join(h);i="[\n"+s+p+",\n"+n+"]"}return o.pop(),s=n,i}(a):function(t){if(o.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");o.push(t);var n=s;s+=u;for(var r,a,c=i||Object.keys(t),l=[],h=0,p=c;h<p.length;h+=1){var d=p[h],m=e(d,t);if(void 0!==m){var v=f(d)+":";""!==u&&(v+=" "),v+=m,l.push(v)}}if(0===l.length)r="{}";else if(""===u)a=l.join(","),r="{"+a+"}";else{var g=",\n"+s;a=l.join(g),r="{\n"+s+a+",\n"+n+"}"}return o.pop(),s=n,r}(a):void 0}("",{"":e});function d(e){for(var t={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},i="",r=0,o=e;r<o.length;r+=1){var s=o[r];switch(s){case"'":case'"':t[s]++,i+=s;continue}if(n[s])i+=n[s];else if(s<" "){var u=s.charCodeAt(0).toString(16);i+="\\x"+("00"+u).substring(u.length)}else i+=s}var c=a||Object.keys(t).reduce(function(e,n){return t[e]<t[n]?e:n});return c+(i=i.replace(new RegExp(c,"g"),n[c]))+c}function f(e){if(0===e.length)return d(e);var t=String.fromCodePoint(e.codePointAt(0));if(!j.isIdStartChar(t))return d(e);for(var n=t.length;n<e.length;n++)if(!j.isIdContinueChar(String.fromCodePoint(e.codePointAt(n))))return d(e);return e}}}}()}),r=t(function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(r+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(t+"")).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var c in a)a[c]&&(u+="; "+c,!0!==a[c]&&(u+="="+a[c]));return document.cookie=t+"="+r+u}t||(o={});for(var l=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,p=0;p<l.length;p++){var d=l[p].split("="),f=d.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var m=d[0].replace(h,decodeURIComponent);if(f=n.read?n.read(f,m):n(f,m)||f.replace(h,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===m){o=f;break}t||(o[m]=f)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}(function(){})},e.exports=n()}),a=t(function(t,n){t.exports=function(){var t=Object.freeze({});function n(e){return null==e}function i(e){return null!=e}function r(e){return!0===e}function a(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function o(e){return null!==e&&"object"==typeof e}var s=Object.prototype.toString;function u(e){return s.call(e).slice(8,-1)}function c(e){return"[object Object]"===s.call(e)}function l(e){return"[object RegExp]"===s.call(e)}function h(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function d(e){var t=parseFloat(e);return isNaN(t)?e:t}function f(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var m=f("slot,component",!0),v=f("key,ref,slot,slot-scope,is");function g(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function x(e,t){return y.call(e,t)}function b(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var w=/-(\w)/g,E=b(function(e){return e.replace(w,function(e,t){return t?t.toUpperCase():""})}),_=b(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),M=/\B([A-Z])/g,S=b(function(e){return e.replace(M,"-$1").toLowerCase()}),A=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function D(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function T(e,t){for(var n in t)e[n]=t[n];return e}function C(e){for(var t={},n=0;n<e.length;n++)e[n]&&T(t,e[n]);return t}function F(e,t,n){}var L=function(e,t,n){return!1},R=function(e){return e};function P(e,t){if(e===t)return!0;var n=o(e),i=o(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),a=Array.isArray(t);if(r&&a)return e.length===t.length&&e.every(function(e,n){return P(e,t[n])});if(r||a)return!1;var s=Object.keys(e),u=Object.keys(t);return s.length===u.length&&s.every(function(n){return P(e[n],t[n])})}catch(e){return!1}}function I(e,t){for(var n=0;n<e.length;n++)if(P(e[n],t))return n;return-1}function O(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var B="data-server-rendered",N=["component","directive","filter"],k=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:F,parsePlatformTagName:R,mustUseProp:L,_lifecycleHooks:k};function z(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function H(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var G,V=/[^\w.$]/,j="__proto__"in{},W="undefined"!=typeof window,X="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,$=X&&WXEnvironment.platform.toLowerCase(),q=W&&window.navigator.userAgent.toLowerCase(),Y=q&&/msie|trident/.test(q),J=q&&q.indexOf("msie 9.0")>0,Z=q&&q.indexOf("edge/")>0,K=(q&&q.indexOf("android"),q&&/iphone|ipad|ipod|ios/.test(q)||"ios"===$),Q=q&&/chrome\/\d+/.test(q)&&!Z,ee={}.watch,te=!1;if(W)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,ne)}catch(e){}var ie=function(){return void 0===G&&(G=!W&&!X&&void 0!==e&&"server"===e.process.env.VUE_ENV),G},re=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ae(e){return"function"==typeof e&&/native code/.test(e.toString())}var oe,se="undefined"!=typeof Symbol&&ae(Symbol)&&"undefined"!=typeof Reflect&&ae(Reflect.ownKeys);oe="undefined"!=typeof Set&&ae(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ue=F,ce=F,le=F,he=F,pe="undefined"!=typeof console,de=/(?:^|[-_])(\w)/g;ue=function(e,t){var n=t?le(t):"";U.warnHandler?U.warnHandler.call(null,e,t,n):pe&&!U.silent&&console.error("[Vue warn]: "+e+n)},ce=function(e,t){pe&&!U.silent&&console.warn("[Vue tip]: "+e+(t?le(t):""))},he=function(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},i=n.name||n._componentTag,r=n.__file;if(!i&&r){var a=r.match(/([^\/\\]+)\.vue$/);i=a&&a[1]}return(i?"<"+i.replace(de,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")+">":"<Anonymous>")+(r&&!1!==t?" at "+r:"")},le=function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var i=t[t.length-1];if(i.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[i,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,t){return""+(0===t?"---\x3e ":function(e,t){for(var n="";t;)t%2==1&&(n+=e),t>1&&(e+=e),t>>=1;return n}(" ",5+2*t))+(Array.isArray(e)?he(e[0])+"... ("+e[1]+" recursive calls)":he(e))}).join("\n")}return"\n\n(found in "+he(e)+")"};var fe=0,me=function(){this.id=fe++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){g(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var ve=[];function ge(e){me.target&&ve.push(me.target),me.target=e}function ye(){me.target=ve.pop()}var xe=function(e,t,n,i,r,a,o,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},be={child:{configurable:!0}};be.child.get=function(){return this.componentInstance},Object.defineProperties(xe.prototype,be);var we=function(e){void 0===e&&(e="");var t=new xe;return t.text=e,t.isComment=!0,t};function Ee(e){return new xe(void 0,void 0,void 0,String(e))}function _e(e){var t=new xe(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.isCloned=!0,t}var Me=Array.prototype,Se=Object.create(Me);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Me[e];H(Se,e,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,a=t.apply(this,n),o=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&o.observeArray(r),o.dep.notify(),a})});var Ae=Object.getOwnPropertyNames(Se),De=!0;function Te(e){De=e}var Ce=function(e){if(this.value=e,this.dep=new me,this.vmCount=0,H(e,"__ob__",this),Array.isArray(e)){var t=j?Fe:Le;t(e,Se,Ae),this.observeArray(e)}else this.walk(e)};function Fe(e,t,n){e.__proto__=t}function Le(e,t,n){for(var i=0,r=n.length;i<r;i++){var a=n[i];H(e,a,t[a])}}function Re(e,t){var n;if(o(e)&&!(e instanceof xe))return x(e,"__ob__")&&e.__ob__ instanceof Ce?n=e.__ob__:De&&!ie()&&(Array.isArray(e)||c(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ce(e)),t&&n&&n.vmCount++,n}function Pe(e,t,n,i,r){var a=new me,o=Object.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.configurable){var s=o&&o.get;s||2!==arguments.length||(n=e[t]);var u=o&&o.set,c=!r&&Re(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return me.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(t)&&function e(t){for(var n=void 0,i=0,r=t.length;i<r;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(t))),t},set:function(t){var o=s?s.call(e):n;t===o||t!=t&&o!=o||(i&&i(),u?u.call(e,t):n=t,c=!r&&Re(t),a.notify())}})}}function Ie(e,t,i){if((n(e)||a(e))&&ue("Cannot set reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,i),i;if(t in e&&!(t in Object.prototype))return e[t]=i,i;var r=e.__ob__;return e._isVue||r&&r.vmCount?(ue("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),i):r?(Pe(r.value,t,i),r.dep.notify(),i):(e[t]=i,i)}function Oe(e,t){if((n(e)||a(e))&&ue("Cannot delete reactive property on undefined, null, or primitive value: "+e),Array.isArray(e)&&h(t))e.splice(t,1);else{var i=e.__ob__;e._isVue||i&&i.vmCount?ue("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):x(e,t)&&(delete e[t],i&&i.dep.notify())}}Ce.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Pe(e,t[n])},Ce.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Re(e[t])};var Be=U.optionMergeStrategies;function Ne(e,t){if(!t)return e;for(var n,i,r,a=Object.keys(t),o=0;o<a.length;o++)n=a[o],i=e[n],r=t[n],x(e,n)?c(i)&&c(r)&&Ne(i,r):Ie(e,n,r);return e}function ke(e,t,n){return n?function(){var i="function"==typeof t?t.call(n,n):t,r="function"==typeof e?e.call(n,n):e;return i?Ne(i,r):r}:t?e?function(){return Ne("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Ue(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function ze(e,t,n,i){var r=Object.create(e||null);return t?(Ve(i,t,n),T(r,t)):r}Be.el=Be.propsData=function(e,t,n,i){return n||ue('option "'+i+'" can only be used during instance creation with the `new` keyword.'),He(e,t)},Be.data=function(e,t,n){return n?ke(e,t,n):t&&"function"!=typeof t?(ue('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):ke(e,t)},k.forEach(function(e){Be[e]=Ue}),N.forEach(function(e){Be[e+"s"]=ze}),Be.watch=function(e,t,n,i){if(e===ee&&(e=void 0),t===ee&&(t=void 0),!t)return Object.create(e||null);if(Ve(i,t,n),!e)return t;var r={};for(var a in T(r,e),t){var o=r[a],s=t[a];o&&!Array.isArray(o)&&(o=[o]),r[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return r},Be.props=Be.methods=Be.inject=Be.computed=function(e,t,n,i){if(t&&Ve(i,t,n),!e)return t;var r=Object.create(null);return T(r,e),t&&T(r,t),r},Be.provide=ke;var He=function(e,t){return void 0===t?e:t};function Ge(e){/^[a-zA-Z][\w-]*$/.test(e)||ue('Invalid component name: "'+e+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'),(m(e)||U.isReservedTag(e))&&ue("Do not use built-in or reserved HTML elements as component id: "+e)}function Ve(e,t,n){c(t)||ue('Invalid value for option "'+e+'": expected an Object, but got '+u(t)+".",n)}function je(e,t,n){!function(e){for(var t in e.components)Ge(t)}(t),"function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var i,r,a,o={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])?(a=E(r),o[a]={type:null}):ue("props must be strings when using array syntax.");else if(c(n))for(var s in n)r=n[s],a=E(s),o[a]=c(r)?r:{type:r};else ue('Invalid value for option "props": expected an Array or an Object, but got '+u(n)+".",t);e.props=o}}(t,n),function(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(c(n))for(var a in n){var o=n[a];i[a]=c(o)?T({from:a},o):{from:o}}else ue('Invalid value for option "inject": expected an Array or an Object, but got '+u(n)+".",t)}}(t,n),function(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}(t);var i=t.extends;if(i&&(e=je(e,i,n)),t.mixins)for(var r=0,a=t.mixins.length;r<a;r++)e=je(e,t.mixins[r],n);var o,s={};for(o in e)l(o);for(o in t)x(e,o)||l(o);function l(i){var r=Be[i]||He;s[i]=r(e[i],t[i],n,i)}return s}function We(e,t,n,i){if("string"==typeof n){var r=e[t];if(x(r,n))return r[n];var a=E(n);if(x(r,a))return r[a];var o=_(a);if(x(r,o))return r[o];var s=r[n]||r[a]||r[o];return i&&!s&&ue("Failed to resolve "+t.slice(0,-1)+": "+n,e),s}}function Xe(e,t,n,i){var r=t[e],a=!x(n,e),s=n[e],c=Ze(Boolean,r.type);if(c>-1)if(a&&!x(r,"default"))s=!1;else if(""===s||s===S(e)){var l=Ze(String,r.type);(l<0||c<l)&&(s=!0)}if(void 0===s){s=function(e,t,n){if(x(t,"default")){var i=t.default;return o(i)&&ue('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof i&&"Function"!==Ye(t.type)?i.call(e):i}}(i,r,e);var h=De;Te(!0),Re(s),Te(h)}return function(e,t,n,i,r){if(e.required&&r)ue('Missing required prop: "'+t+'"',i);else if(null!=n||e.required){var a=e.type,o=!a||!0===a,s=[];if(a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length&&!o;c++){var l=qe(n,a[c]);s.push(l.expectedType||""),o=l.valid}}if(o){var h=e.validator;h&&(h(n)||ue('Invalid prop: custom validator check failed for prop "'+t+'".',i))}else ue('Invalid prop: type check failed for prop "'+t+'". Expected '+s.map(_).join(", ")+", got "+u(n)+".",i)}}(r,e,s,i,a),s}var $e=/^(String|Number|Boolean|Function|Symbol)$/;function qe(e,t){var n,i=Ye(t);if($e.test(i)){var r=typeof e;(n=r===i.toLowerCase())||"object"!==r||(n=e instanceof t)}else n="Object"===i?c(e):"Array"===i?Array.isArray(e):e instanceof t;return{valid:n,expectedType:i}}function Ye(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Je(e,t){return Ye(e)===Ye(t)}function Ze(e,t){if(!Array.isArray(t))return Je(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(Je(t[n],e))return n;return-1}function Ke(e,t,n){if(t)for(var i=t;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var a=0;a<r.length;a++)try{var o=!1===r[a].call(i,e,t,n);if(o)return}catch(e){Qe(e,i,"errorCaptured hook")}}Qe(e,t,n)}function Qe(e,t,n){if(U.errorHandler)try{return U.errorHandler.call(null,e,t,n)}catch(e){et(e,null,"config.errorHandler")}et(e,t,n)}function et(e,t,n){if(ue("Error in "+n+': "'+e.toString()+'"',t),!W&&!X||"undefined"==typeof console)throw e;console.error(e)}var tt,nt,it=[],rt=!1;function at(){rt=!1;var e=it.slice(0);it.length=0;for(var t=0;t<e.length;t++)e[t]()}var ot,st,ut=!1;if("undefined"!=typeof setImmediate&&ae(setImmediate))nt=function(){setImmediate(at)};else if("undefined"==typeof MessageChannel||!ae(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())nt=function(){setTimeout(at,0)};else{var ct=new MessageChannel,lt=ct.port2;ct.port1.onmessage=at,nt=function(){lt.postMessage(1)}}if("undefined"!=typeof Promise&&ae(Promise)){var ht=Promise.resolve();tt=function(){ht.then(at),K&&setTimeout(F)}}else tt=nt;function pt(e,t){var n;if(it.push(function(){if(e)try{e.call(t)}catch(e){Ke(e,t,"nextTick")}else n&&n(t)}),rt||(rt=!0,ut?nt():tt()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}var dt,ft=W&&window.performance;ft&&ft.mark&&ft.measure&&ft.clearMarks&&ft.clearMeasures&&(ot=function(e){return ft.mark(e)},st=function(e,t,n){ft.measure(e,t,n),ft.clearMarks(t),ft.clearMarks(n),ft.clearMeasures(e)});var mt=f("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),vt=function(e,t){ue('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',e)},gt="undefined"!=typeof Proxy&&ae(Proxy);if(gt){var yt=f("stop,prevent,self,ctrl,shift,alt,meta,exact");U.keyCodes=new Proxy(U.keyCodes,{set:function(e,t,n){return yt(t)?(ue("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})}var xt={has:function(e,t){var n=t in e,i=mt(t)||"_"===t.charAt(0);return n||i||vt(e,t),n||!i}},bt={get:function(e,t){return"string"!=typeof t||t in e||vt(e,t),e[t]}};dt=function(e){if(gt){var t=e.$options,n=t.render&&t.render._withStripped?bt:xt;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var wt=new oe;function Et(e){!function e(t,n){var i,r,a=Array.isArray(t);if(!(!a&&!o(t)||Object.isFrozen(t)||t instanceof xe)){if(t.__ob__){var s=t.__ob__.dep.id;if(n.has(s))return;n.add(s)}if(a)for(i=t.length;i--;)e(t[i],n);else for(r=Object.keys(t),i=r.length;i--;)e(t[r[i]],n)}}(e,wt),wt.clear()}var _t,Mt=b(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:n,capture:i,passive:t}});function St(e){function t(){var e=arguments,n=t.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var i=n.slice(),r=0;r<i.length;r++)i[r].apply(null,e)}return t.fns=e,t}function At(e,t,i,r,a){var o,s,u,c;for(o in e)s=e[o],u=t[o],c=Mt(o),n(s)?ue('Invalid handler for event "'+c.name+'": got '+String(s),a):n(u)?(n(s.fns)&&(s=e[o]=St(s)),i(c.name,s,c.once,c.capture,c.passive,c.params)):s!==u&&(u.fns=s,e[o]=u);for(o in t)n(e[o])&&(c=Mt(o),r(c.name,t[o],c.capture))}function Dt(e,t,a){var o;e instanceof xe&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function u(){a.apply(this,arguments),g(o.fns,u)}n(s)?o=St([u]):i(s.fns)&&r(s.merged)?(o=s).fns.push(u):o=St([s,u]),o.merged=!0,e[t]=o}function Tt(e,t,n,r,a){if(i(t)){if(x(t,n))return e[n]=t[n],a||delete t[n],!0;if(x(t,r))return e[n]=t[r],a||delete t[r],!0}return!1}function Ct(e){return a(e)?[Ee(e)]:Array.isArray(e)?function e(t,o){var s,u,c,l,h=[];for(s=0;s<t.length;s++)n(u=t[s])||"boolean"==typeof u||(c=h.length-1,l=h[c],Array.isArray(u)?u.length>0&&(Ft((u=e(u,(o||"")+"_"+s))[0])&&Ft(l)&&(h[c]=Ee(l.text+u[0].text),u.shift()),h.push.apply(h,u)):a(u)?Ft(l)?h[c]=Ee(l.text+u):""!==u&&h.push(Ee(u)):Ft(u)&&Ft(l)?h[c]=Ee(l.text+u.text):(r(t._isVList)&&i(u.tag)&&n(u.key)&&i(o)&&(u.key="__vlist"+o+"_"+s+"__"),h.push(u)));return h}(e):void 0}function Ft(e){return i(e)&&i(e.text)&&!1===e.isComment}function Lt(e,t){return(e.__esModule||se&&"Module"===e[Symbol.toStringTag])&&(e=e.default),o(e)?t.extend(e):e}function Rt(e){return e.isComment&&e.asyncFactory}function Pt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Rt(n)))return n}}function It(e,t,n){n?_t.$once(e,t):_t.$on(e,t)}function Ot(e,t){_t.$off(e,t)}function Bt(e,t,n){_t=e,At(t,n||{},It,Ot,e),_t=void 0}function Nt(e,t){var n={};if(!e)return n;for(var i=0,r=e.length;i<r;i++){var a=e[i],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==t&&a.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(a);else{var s=o.slot,u=n[s]||(n[s]=[]);"template"===a.tag?u.push.apply(u,a.children||[]):u.push(a)}}for(var c in n)n[c].every(kt)&&delete n[c];return n}function kt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Ut(e,t){t=t||{};for(var n=0;n<e.length;n++)Array.isArray(e[n])?Ut(e[n],t):t[e[n].key]=e[n].fn;return t}var zt=null,Ht=!1;function Gt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Vt(e,t){if(t){if(e._directInactive=!1,Gt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Vt(e.$children[n]);jt(e,"activated")}}function jt(e,t){ge();var n=e.$options[t];if(n)for(var i=0,r=n.length;i<r;i++)try{n[i].call(e)}catch(n){Ke(n,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t),ye()}var Wt=100,Xt=[],$t=[],qt={},Yt={},Jt=!1,Zt=!1,Kt=0;function Qt(){var e,t;for(Zt=!0,Xt.sort(function(e,t){return e.id-t.id}),Kt=0;Kt<Xt.length;Kt++)if(e=Xt[Kt],t=e.id,qt[t]=null,e.run(),null!=qt[t]&&(Yt[t]=(Yt[t]||0)+1,Yt[t]>Wt)){ue("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}var n=$t.slice(),i=Xt.slice();Kt=Xt.length=$t.length=0,qt={},Yt={},Jt=Zt=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Vt(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&jt(i,"updated")}}(i),re&&U.devtools&&re.emit("flush")}var en=0,tn=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++en,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new oe,this.newDepIds=new oe,this.expression=t.toString(),"function"==typeof t?this.getter=t:(this.getter=function(e){if(!V.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=function(){},ue('Failed watching path: "'+t+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()};tn.prototype.get=function(){var e;ge(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Ke(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Et(e),ye(),this.cleanupDeps()}return e},tn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},tn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},tn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==qt[t]){if(qt[t]=!0,Zt){for(var n=Xt.length-1;n>Kt&&Xt[n].id>e.id;)n--;Xt.splice(n+1,0,e)}else Xt.push(e);Jt||(Jt=!0,pt(Qt))}}(this)},tn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||o(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Ke(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},tn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},tn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},tn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var nn={enumerable:!0,configurable:!0,get:F,set:F};function rn(e,t,n){nn.get=function(){return this[t][n]},nn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,nn)}function an(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[];e.$parent&&Te(!1);var a=function(a){r.push(a);var o=Xe(a,t,n,e),s=S(a);(v(s)||U.isReservedAttr(s))&&ue('"'+s+'" is a reserved attribute and cannot be used as component prop.',e),Pe(i,a,o,function(){e.$parent&&!Ht&&ue("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',e)}),a in e||rn(e,"_props",a)};for(var o in t)a(o);Te(!0)}(e,t.props),t.methods&&function(e,t){var n=e.$options.props;for(var i in t)null==t[i]&&ue('Method "'+i+'" has an undefined value in the component definition. Did you reference the function correctly?',e),n&&x(n,i)&&ue('Method "'+i+'" has already been defined as a prop.',e),i in e&&z(i)&&ue('Method "'+i+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),e[i]=null==t[i]?F:A(t[i],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;c(t=e._data="function"==typeof t?function(e,t){ge();try{return e.call(t,t)}catch(e){return Ke(e,t,"data()"),{}}finally{ye()}}(t,e):t||{})||(t={},ue("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var n=Object.keys(t),i=e.$options.props,r=e.$options.methods,a=n.length;a--;){var o=n[a];r&&x(r,o)&&ue('Method "'+o+'" has already been defined as a data property.',e),i&&x(i,o)?ue('The data property "'+o+'" is already declared as a prop. Use prop default value instead.',e):z(o)||rn(e,"_data",o)}Re(t,!0)}(e):Re(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),i=ie();for(var r in t){var a=t[r],o="function"==typeof a?a:a.get;null==o&&ue('Getter is missing for computed property "'+r+'".',e),i||(n[r]=new tn(e,o||F,F,on)),r in e?r in e.$data?ue('The computed property "'+r+'" is already defined in data.',e):e.$options.props&&r in e.$options.props&&ue('The computed property "'+r+'" is already defined as a prop.',e):sn(e,r,a)}}(e,t.computed),t.watch&&t.watch!==ee&&function(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)cn(e,n,i[r]);else cn(e,n,i)}}(e,t.watch)}var on={lazy:!0};function sn(e,t,n){var i=!ie();"function"==typeof n?(nn.get=i?un(t):n,nn.set=F):(nn.get=n.get?i&&!1!==n.cache?un(t):n.get:F,nn.set=n.set?n.set:F),nn.set===F&&(nn.set=function(){ue('Computed property "'+t+'" was assigned to but it has no setter.',this)}),Object.defineProperty(e,t,nn)}function un(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function cn(e,t,n,i){return c(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}function ln(e,t){if(e){for(var n=Object.create(null),i=se?Reflect.ownKeys(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}):Object.keys(e),r=0;r<i.length;r++){for(var a=i[r],o=e[a].from,s=t;s;){if(s._provided&&x(s._provided,o)){n[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in e[a]){var u=e[a].default;n[a]="function"==typeof u?u.call(t):u}else ue('Injection "'+a+'" not found',t)}return n}}function hn(e,t){var n,r,a,s,u;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,a=e.length;r<a;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(o(e))for(s=Object.keys(e),n=new Array(s.length),r=0,a=s.length;r<a;r++)u=s[r],n[r]=t(e[u],u,r);return i(n)&&(n._isVList=!0),n}function pn(e,t,n,i){var r,a=this.$scopedSlots[e];if(a)n=n||{},i&&(o(i)||ue("slot v-bind without argument expects an Object",this),n=T(T({},i),n)),r=a(n)||t;else{var s=this.$slots[e];s&&(s._rendered&&ue('Duplicate presence of slot "'+e+'" found in the same render tree - this will likely cause render errors.',this),s._rendered=!0),r=s||t}var u=n&&n.slot;return u?this.$createElement("template",{slot:u},r):r}function dn(e){return We(this.$options,"filters",e,!0)||R}function fn(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function mn(e,t,n,i,r){var a=U.keyCodes[t]||n;return r&&i&&!U.keyCodes[t]?fn(r,i):a?fn(a,e):i?S(i)!==t:void 0}function vn(e,t,n,i,r){if(n)if(o(n)){var a;Array.isArray(n)&&(n=C(n));var s=function(o){if("class"===o||"style"===o||v(o))a=e;else{var s=e.attrs&&e.attrs.type;a=i||U.mustUseProp(t,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}if(!(o in a)&&(a[o]=n[o],r)){var u=e.on||(e.on={});u["update:"+o]=function(e){n[o]=e}}};for(var u in n)s(u)}else ue("v-bind without argument expects an Object or Array value",this);return e}function gn(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t?i:(xn(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i)}function yn(e,t,n){return xn(e,"__once__"+t+(n?"_"+n:""),!0),e}function xn(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&bn(e[i],t+"_"+i,n);else bn(e,t,n)}function bn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function wn(e,t){if(t)if(c(t)){var n=e.on=e.on?T({},e.on):{};for(var i in t){var r=n[i],a=t[i];n[i]=r?[].concat(r,a):a}}else ue("v-on without argument expects an Object value",this);return e}function En(e){e._o=yn,e._n=d,e._s=p,e._l=hn,e._t=pn,e._q=P,e._i=I,e._m=gn,e._f=dn,e._k=mn,e._b=vn,e._v=Ee,e._e=we,e._u=Ut,e._g=wn}function _n(e,n,i,a,o){var s,u=o.options;x(a,"_uid")?(s=Object.create(a))._original=a:(s=a,a=a._original);var c=r(u._compiled),l=!c;this.data=e,this.props=n,this.children=i,this.parent=a,this.listeners=e.on||t,this.injections=ln(u.inject,a),this.slots=function(){return Nt(i,a)},c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=e.scopedSlots||t),u._scopeId?this._c=function(e,t,n,i){var r=Ln(s,e,t,n,i,l);return r&&!Array.isArray(r)&&(r.fnScopeId=u._scopeId,r.fnContext=a),r}:this._c=function(e,t,n,i){return Ln(s,e,t,n,i,l)}}function Mn(e,t,n,i){var r=_e(e);return r.fnContext=n,r.fnOptions=i,t.slot&&((r.data||(r.data={})).slot=t.slot),r}function Sn(e,t){for(var n in t)e[E(n)]=t[n]}En(_n.prototype);var An={init:function(e,t,n,r){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var a=e;An.prepatch(a,a)}else{var o=e.componentInstance=function(e,t,n,r){var a={_isComponent:!0,parent:t,_parentVnode:e,_parentElm:n||null,_refElm:r||null},o=e.data.inlineTemplate;return i(o)&&(a.render=o.render,a.staticRenderFns=o.staticRenderFns),new e.componentOptions.Ctor(a)}(e,zt,n,r);o.$mount(t?e.elm:void 0,t)}},prepatch:function(e,n){var i=n.componentOptions,r=n.componentInstance=e.componentInstance;!function(e,n,i,r,a){Ht=!0;var o=!!(a||e.$options._renderChildren||r.data.scopedSlots||e.$scopedSlots!==t);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=a,e.$attrs=r.data.attrs||t,e.$listeners=i||t,n&&e.$options.props){Te(!1);for(var s=e._props,u=e.$options._propKeys||[],c=0;c<u.length;c++){var l=u[c],h=e.$options.props;s[l]=Xe(l,h,n,e)}Te(!0),e.$options.propsData=n}i=i||t;var p=e.$options._parentListeners;e.$options._parentListeners=i,Bt(e,i,p),o&&(e.$slots=Nt(a,r.context),e.$forceUpdate()),Ht=!1}(r,i.propsData,i.listeners,n,i.children)},insert:function(e){var t,n=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,jt(i,"mounted")),e.data.keepAlive&&(n._isMounted?((t=i)._inactive=!1,$t.push(t)):Vt(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(!(n&&(t._directInactive=!0,Gt(t))||t._inactive)){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);jt(t,"deactivated")}}(t,!0):t.$destroy())}},Dn=Object.keys(An);function Tn(e,a,s,u,c){if(!n(e)){var l=s.$options._base;if(o(e)&&(e=l.extend(e)),"function"==typeof e){var h;if(n(e.cid)&&void 0===(e=function(e,t,a){if(r(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;if(r(e.loading)&&i(e.loadingComp))return e.loadingComp;if(!i(e.contexts)){var s=e.contexts=[a],u=!0,c=function(){for(var e=0,t=s.length;e<t;e++)s[e].$forceUpdate()},l=O(function(n){e.resolved=Lt(n,t),u||c()}),h=O(function(t){ue("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),i(e.errorComp)&&(e.error=!0,c())}),p=e(l,h);return o(p)&&("function"==typeof p.then?n(e.resolved)&&p.then(l,h):i(p.component)&&"function"==typeof p.component.then&&(p.component.then(l,h),i(p.error)&&(e.errorComp=Lt(p.error,t)),i(p.loading)&&(e.loadingComp=Lt(p.loading,t),0===p.delay?e.loading=!0:setTimeout(function(){n(e.resolved)&&n(e.error)&&(e.loading=!0,c())},p.delay||200)),i(p.timeout)&&setTimeout(function(){n(e.resolved)&&h("timeout ("+p.timeout+"ms)")},p.timeout))),u=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(a)}(h=e,l,s)))return function(e,t,n,i,r){var a=we();return a.asyncFactory=e,a.asyncMeta={data:t,context:n,children:i,tag:r},a}(h,a,s,u,c);a=a||{},Pn(e),i(a.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.props||(t.props={}))[n]=t.model.value;var a=t.on||(t.on={});i(a[r])?a[r]=[t.model.callback].concat(a[r]):a[r]=t.model.callback}(e.options,a);var p=function(e,t,r){var a=t.options.props;if(!n(a)){var o={},s=e.attrs,u=e.props;if(i(s)||i(u))for(var c in a){var l=S(c),h=c.toLowerCase();c!==h&&s&&x(s,h)&&ce('Prop "'+h+'" is passed to component '+he(r||t)+', but the declared prop name is "'+c+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+l+'" instead of "'+c+'".'),Tt(o,u,c,l,!0)||Tt(o,s,c,l,!1)}return o}}(a,e,c);if(r(e.options.functional))return function(e,n,r,a,o){var s=e.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=Xe(l,c,n||t);else i(r.attrs)&&Sn(u,r.attrs),i(r.props)&&Sn(u,r.props);var h=new _n(r,u,o,a,e),p=s.render.call(null,h._c,h);if(p instanceof xe)return Mn(p,r,h.parent,s);if(Array.isArray(p)){for(var d=Ct(p)||[],f=new Array(d.length),m=0;m<d.length;m++)f[m]=Mn(d[m],r,h.parent,s);return f}}(e,p,a,s,u);var d=a.on;if(a.on=a.nativeOn,r(e.options.abstract)){var f=a.slot;a={},f&&(a.slot=f)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Dn.length;n++){var i=Dn[n];t[i]=An[i]}}(a);var m=e.options.name||c,v=new xe("vue-component-"+e.cid+(m?"-"+m:""),a,void 0,void 0,void 0,s,{Ctor:e,propsData:p,listeners:d,tag:c,children:u},h);return v}ue("Invalid Component definition: "+String(e),s)}}var Cn=1,Fn=2;function Ln(e,t,s,u,c,l){return(Array.isArray(s)||a(s))&&(c=u,u=s,s=void 0),r(l)&&(c=Fn),function(e,t,s,u,c){if(i(s)&&i(s.__ob__))return ue("Avoid using observed data object as vnode data: "+JSON.stringify(s)+"\nAlways create fresh vnode data objects in each render!",e),we();if(i(s)&&i(s.is)&&(t=s.is),!t)return we();var l,h,p;(i(s)&&i(s.key)&&!a(s.key)&&ue("Avoid using non-primitive value as key, use string/number value instead.",e),Array.isArray(u)&&"function"==typeof u[0]&&((s=s||{}).scopedSlots={default:u[0]},u.length=0),c===Fn?u=Ct(u):c===Cn&&(u=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(u)),"string"==typeof t)?(h=e.$vnode&&e.$vnode.ns||U.getTagNamespace(t),l=U.isReservedTag(t)?new xe(U.parsePlatformTagName(t),s,u,void 0,void 0,e):i(p=We(e.$options,"components",t))?Tn(p,s,e,u,t):new xe(t,s,u,void 0,void 0,e)):l=Tn(t,s,e,u);return Array.isArray(l)?l:i(l)?(i(h)&&function e(t,a,o){if(t.ns=a,"foreignObject"===t.tag&&(a=void 0,o=!0),i(t.children))for(var s=0,u=t.children.length;s<u;s++){var c=t.children[s];i(c.tag)&&(n(c.ns)||r(o)&&"svg"!==c.tag)&&e(c,a,o)}}(l,h),i(s)&&function(e){o(e.style)&&Et(e.style),o(e.class)&&Et(e.class)}(s),l):we()}(e,t,s,u,c)}var Rn=0;function Pn(e){var t=e.options;if(e.super){var n=Pn(e.super),i=e.superOptions;if(n!==i){e.superOptions=n;var r=function(e){var t,n=e.options,i=e.extendOptions,r=e.sealedOptions;for(var a in n)n[a]!==r[a]&&(t||(t={}),t[a]=In(n[a],i[a],r[a]));return t}(e);r&&T(e.extendOptions,r),(t=e.options=je(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function In(e,t,n){if(Array.isArray(e)){var i=[];n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];for(var r=0;r<e.length;r++)(t.indexOf(e[r])>=0||n.indexOf(e[r])<0)&&i.push(e[r]);return i}return e}function On(e){this instanceof On||ue("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function Bn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var a=e.name||n.options.name;a&&Ge(a);var o=function(e){this._init(e)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=t++,o.options=je(n.options,e),o.super=n,o.options.props&&function(e){var t=e.options.props;for(var n in t)rn(e.prototype,"_props",n)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var n in t)sn(e.prototype,n,t[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,N.forEach(function(e){o[e]=n[e]}),a&&(o.options.components[a]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=T({},o.options),r[i]=o,o}}function Nn(e){return e&&(e.Ctor.options.name||e.tag)}function kn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!l(e)&&e.test(t)}function Un(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var a in n){var o=n[a];if(o){var s=Nn(o.componentOptions);s&&!t(s)&&zn(n,a,i,r)}}}function zn(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,g(n,t)}(function(e){e.prototype._init=function(e){var n,i,r=this;r._uid=Rn++,U.performance&&ot&&(n="vue-perf-start:"+r._uid,i="vue-perf-end:"+r._uid,ot(n)),r._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i,n._parentElm=t._parentElm,n._refElm=t._refElm;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(r,e):r.$options=je(Pn(r.constructor),e||{},r),dt(r),r._self=r,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(r),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Bt(e,t)}(r),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,i=e.$vnode=n._parentVnode,r=i&&i.context;e.$slots=Nt(n._renderChildren,r),e.$scopedSlots=t,e._c=function(t,n,i,r){return Ln(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return Ln(e,t,n,i,r,!0)};var a=i&&i.data;Pe(e,"$attrs",a&&a.attrs||t,function(){!Ht&&ue("$attrs is readonly.",e)},!0),Pe(e,"$listeners",n._parentListeners||t,function(){!Ht&&ue("$listeners is readonly.",e)},!0)}(r),jt(r,"beforeCreate"),function(e){var t=ln(e.$options.inject,e);t&&(Te(!1),Object.keys(t).forEach(function(n){Pe(e,n,t[n],function(){ue('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',e)})}),Te(!0))}(r),an(r),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(r),jt(r,"created"),U.performance&&ot&&(r._name=he(r,!1),ot(i),st("vue "+r._name+" init",n,i)),r.$options.el&&r.$mount(r.$options.el)}})(On),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};t.set=function(e){ue("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){ue("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ie,e.prototype.$delete=Oe,e.prototype.$watch=function(e,t,n){if(c(t))return cn(this,e,t,n);(n=n||{}).user=!0;var i=new tn(this,e,t,n);return n.immediate&&t.call(this,i.value),function(){i.teardown()}}}(On),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)this.$on(e[i],n);else(this._events[e]||(this._events[e]=[])).push(n),t.test(e)&&(this._hasHookEvent=!0);return this},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)this.$off(e[i],t);return n}var a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;if(t)for(var o,s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=e.toLowerCase();n!==e&&t._events[n]&&ce('Event "'+n+'" is emitted in component '+he(t)+' but the handler is registered for "'+e+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+S(e)+'" instead of "'+e+'".');var i=t._events[e];if(i){i=i.length>1?D(i):i;for(var r=D(arguments,1),a=0,o=i.length;a<o;a++)try{i[a].apply(t,r)}catch(n){Ke(n,t,'event handler for "'+e+'"')}}return t}}(On),function(e){e.prototype._update=function(e,t){var n=this;n._isMounted&&jt(n,"beforeUpdate");var i=n.$el,r=n._vnode,a=zt;zt=n,n._vnode=e,r?n.$el=n.__patch__(r,e):(n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),zt=a,i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){jt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||g(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),jt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(On),function(e){En(e.prototype),e.prototype.$nextTick=function(e){return pt(e,this)},e.prototype._render=function(){var e,n=this,i=n.$options,r=i.render,a=i._parentVnode;for(var o in n.$slots)n.$slots[o]._rendered=!1;a&&(n.$scopedSlots=a.data.scopedSlots||t),n.$vnode=a;try{e=r.call(n._renderProxy,n.$createElement)}catch(t){if(Ke(t,n,"render"),n.$options.renderError)try{e=n.$options.renderError.call(n._renderProxy,n.$createElement,t)}catch(t){Ke(t,n,"renderError"),e=n._vnode}else e=n._vnode}return e instanceof xe||(Array.isArray(e)&&ue("Multiple root nodes returned from render function. Render function should return a single root node.",n),e=we()),e.parent=a,e}}(On);var Hn=[String,RegExp,Array],Gn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Hn,exclude:Hn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)zn(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){Un(e,function(e){return kn(t,e)})}),this.$watch("exclude",function(t){Un(e,function(e){return!kn(t,e)})})},render:function(){var e=this.$slots.default,t=Pt(e),n=t&&t.componentOptions;if(n){var i=Nn(n),r=this.include,a=this.exclude;if(r&&(!i||!kn(r,i))||a&&i&&kn(a,i))return t;var o=this.cache,s=this.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;o[u]?(t.componentInstance=o[u].componentInstance,g(s,u),s.push(u)):(o[u]=t,s.push(u),this.max&&s.length>parseInt(this.max)&&zn(o,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};(function(e){var t={get:function(){return U},set:function(){ue("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(e,"config",t),e.util={warn:ue,extend:T,mergeOptions:je,defineReactive:Pe},e.set=Ie,e.delete=Oe,e.nextTick=pt,e.options=Object.create(null),N.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,T(e.options.components,Gn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=je(this.options,e),this}}(e),Bn(e),function(e){N.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&Ge(e),"component"===t&&c(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}(e)})(On),Object.defineProperty(On.prototype,"$isServer",{get:ie}),Object.defineProperty(On.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(On,"FunctionalRenderContext",{value:_n}),On.version="2.5.17";var Vn=f("style,class"),jn=f("input,textarea,option,select,progress"),Wn=function(e,t,n){return"value"===n&&jn(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Xn=f("contenteditable,draggable,spellcheck"),$n=f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),qn="http://www.w3.org/1999/xlink",Yn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Jn=function(e){return Yn(e)?e.slice(6,e.length):""},Zn=function(e){return null==e||!1===e};function Kn(e){for(var t=e.data,n=e,r=e;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Qn(r.data,t));for(;i(n=n.parent);)n&&n.data&&(t=Qn(t,n.data));return a=t.staticClass,o=t.class,i(a)||i(o)?ei(a,ti(o)):"";var a,o}function Qn(e,t){return{staticClass:ei(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function ei(e,t){return e?t?e+" "+t:e:t||""}function ti(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,a=e.length;r<a;r++)i(t=ti(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):o(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ii=f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ri=f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ai=function(e){return ii(e)||ri(e)};function oi(e){return ri(e)?"svg":"math"===e?"math":void 0}var si=Object.create(null),ui=f("text,number,password,search,email,tel,url");function ci(e){if("string"==typeof e){var t=document.querySelector(e);return t||(ue("Cannot find element: "+e),document.createElement("div"))}return e}var li=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(e,t){return document.createElementNS(ni[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),hi={create:function(e,t){pi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(pi(e,!0),pi(t))},destroy:function(e){pi(e,!0)}};function pi(e,t){var n=e.data.ref;if(i(n)){var r=e.context,a=e.componentInstance||e.elm,o=r.$refs;t?Array.isArray(o[n])?g(o[n],a):o[n]===a&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])?o[n].indexOf(a)<0&&o[n].push(a):o[n]=[a]:o[n]=a}}var di=new xe("",{},[]),fi=["create","activate","update","remove","destroy"];function mi(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,a=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===a||ui(r)&&ui(a)}(e,t)||r(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&n(t.asyncFactory.error))}function vi(e,t,n){var r,a,o={};for(r=t;r<=n;++r)i(a=e[r].key)&&(o[a]=r);return o}var gi={create:yi,update:yi,destroy:function(e){yi(e,di)}};function yi(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,i,r,a=e===di,o=t===di,s=bi(e.data.directives,e.context),u=bi(t.data.directives,t.context),c=[],l=[];for(n in u)i=s[n],r=u[n],i?(r.oldValue=i.value,Ei(r,"update",t,e),r.def&&r.def.componentUpdated&&l.push(r)):(Ei(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Ei(c[n],"inserted",t,e)};a?Dt(t,"insert",h):h()}if(l.length&&Dt(t,"postpatch",function(){for(var n=0;n<l.length;n++)Ei(l[n],"componentUpdated",t,e)}),!a)for(n in s)u[n]||Ei(s[n],"unbind",e,e,o)}(e,t)}var xi=Object.create(null);function bi(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++)(i=e[n]).modifiers||(i.modifiers=xi),r[wi(i)]=i,i.def=We(t.$options,"directives",i.name,!0);return r}function wi(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Ei(e,t,n,i,r){var a=e.def&&e.def[t];if(a)try{a(n.elm,e,n,i,r)}catch(i){Ke(i,n.context,"directive "+e.name+" "+t+" hook")}}var _i=[hi,gi];function Mi(e,t){var r=t.componentOptions;if(!(i(r)&&!1===r.Ctor.options.inheritAttrs||n(e.data.attrs)&&n(t.data.attrs))){var a,o,s=t.elm,u=e.data.attrs||{},c=t.data.attrs||{};for(a in i(c.__ob__)&&(c=t.data.attrs=T({},c)),c)o=c[a],u[a]!==o&&Si(s,a,o);for(a in(Y||Z)&&c.value!==u.value&&Si(s,"value",c.value),u)n(c[a])&&(Yn(a)?s.removeAttributeNS(qn,Jn(a)):Xn(a)||s.removeAttribute(a))}}function Si(e,t,n){e.tagName.indexOf("-")>-1?Ai(e,t,n):$n(t)?Zn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Xn(t)?e.setAttribute(t,Zn(n)||"false"===n?"false":"true"):Yn(t)?Zn(n)?e.removeAttributeNS(qn,Jn(t)):e.setAttributeNS(qn,t,n):Ai(e,t,n)}function Ai(e,t,n){if(Zn(n))e.removeAttribute(t);else{if(Y&&!J&&"TEXTAREA"===e.tagName&&"placeholder"===t&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var Di={create:Mi,update:Mi};function Ti(e,t){var r=t.elm,a=t.data,o=e.data;if(!(n(a.staticClass)&&n(a.class)&&(n(o)||n(o.staticClass)&&n(o.class)))){var s=Kn(t),u=r._transitionClasses;i(u)&&(s=ei(s,ti(u))),s!==r._prevClass&&(r.setAttribute("class",s),r._prevClass=s)}}var Ci,Fi,Li,Ri,Pi,Ii,Oi,Bi={create:Ti,update:Ti},Ni=/[\w).+\-_$\]]/;function ki(e){var t,n,i,r,a,o=!1,s=!1,u=!1,c=!1,l=0,h=0,p=0,d=0;for(i=0;i<e.length;i++)if(n=t,t=e.charCodeAt(i),o)39===t&&92!==n&&(o=!1);else if(s)34===t&&92!==n&&(s=!1);else if(u)96===t&&92!==n&&(u=!1);else if(c)47===t&&92!==n&&(c=!1);else if(124!==t||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||l||h||p){switch(t){case 34:s=!0;break;case 39:o=!0;break;case 96:u=!0;break;case 40:p++;break;case 41:p--;break;case 91:h++;break;case 93:h--;break;case 123:l++;break;case 125:l--}if(47===t){for(var f=i-1,m=void 0;f>=0&&" "===(m=e.charAt(f));f--);m&&Ni.test(m)||(c=!0)}}else void 0===r?(d=i+1,r=e.slice(0,i).trim()):v();function v(){(a||(a=[])).push(e.slice(d,i).trim()),d=i+1}if(void 0===r?r=e.slice(0,i).trim():0!==d&&v(),a)for(i=0;i<a.length;i++)r=Ui(r,a[i]);return r}function Ui(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var i=t.slice(0,n),r=t.slice(n+1);return'_f("'+i+'")('+e+(")"!==r?","+r:r)}function zi(e){console.error("[Vue compiler]: "+e)}function Hi(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function Gi(e,t,n){(e.props||(e.props=[])).push({name:t,value:n}),e.plain=!1}function Vi(e,t,n){(e.attrs||(e.attrs=[])).push({name:t,value:n}),e.plain=!1}function ji(e,t,n){e.attrsMap[t]=n,e.attrsList.push({name:t,value:n})}function Wi(e,t,n,i,r,a){(e.directives||(e.directives=[])).push({name:t,rawName:n,value:i,arg:r,modifiers:a}),e.plain=!1}function Xi(e,n,i,r,a,o){var s;r=r||t,o&&r.prevent&&r.passive&&o("passive and prevent can't be used together. Passive handler can't prevent default event."),r.capture&&(delete r.capture,n="!"+n),r.once&&(delete r.once,n="~"+n),r.passive&&(delete r.passive,n="&"+n),"click"===n&&(r.right?(n="contextmenu",delete r.right):r.middle&&(n="mouseup")),r.native?(delete r.native,s=e.nativeEvents||(e.nativeEvents={})):s=e.events||(e.events={});var u={value:i.trim()};r!==t&&(u.modifiers=r);var c=s[n];Array.isArray(c)?a?c.unshift(u):c.push(u):s[n]=c?a?[u,c]:[c,u]:u,e.plain=!1}function $i(e,t,n){var i=qi(e,":"+t)||qi(e,"v-bind:"+t);if(null!=i)return ki(i);if(!1!==n){var r=qi(e,t);if(null!=r)return JSON.stringify(r)}}function qi(e,t,n){var i;if(null!=(i=e.attrsMap[t]))for(var r=e.attrsList,a=0,o=r.length;a<o;a++)if(r[a].name===t){r.splice(a,1);break}return n&&delete e.attrsMap[t],i}function Yi(e,t,n){var i=n||{},r=i.number,a=i.trim,o="$$v";a&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(o="_n("+o+")");var s=Ji(t,o);e.model={value:"("+t+")",expression:'"'+t+'"',callback:"function ($$v) {"+s+"}"}}function Ji(e,t){var n=function(e){if(e=e.trim(),Ci=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Ci-1)return(Ri=e.lastIndexOf("."))>-1?{exp:e.slice(0,Ri),key:'"'+e.slice(Ri+1)+'"'}:{exp:e,key:null};for(Fi=e,Ri=Pi=Ii=0;!Ki();)Qi(Li=Zi())?tr(Li):91===Li&&er(Li);return{exp:e.slice(0,Pi),key:e.slice(Pi+1,Ii)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function Zi(){return Fi.charCodeAt(++Ri)}function Ki(){return Ri>=Ci}function Qi(e){return 34===e||39===e}function er(e){var t=1;for(Pi=Ri;!Ki();)if(Qi(e=Zi()))tr(e);else if(91===e&&t++,93===e&&t--,0===t){Ii=Ri;break}}function tr(e){for(var t=e;!Ki()&&(e=Zi())!==t;);}var nr,ir="__r",rr="__c";function ar(e,t,n,i,r){var a;t=(a=t)._withTask||(a._withTask=function(){ut=!0;var e=a.apply(null,arguments);return ut=!1,e}),n&&(t=function(e,t,n){var i=nr;return function r(){var a=e.apply(null,arguments);null!==a&&or(t,r,n,i)}}(t,e,i)),nr.addEventListener(e,t,te?{capture:i,passive:r}:i)}function or(e,t,n,i){(i||nr).removeEventListener(e,t._withTask||t,n)}function sr(e,t){if(!n(e.data.on)||!n(t.data.on)){var r=t.data.on||{},a=e.data.on||{};nr=t.elm,function(e){if(i(e[ir])){var t=Y?"change":"input";e[t]=[].concat(e[ir],e[t]||[]),delete e[ir]}i(e[rr])&&(e.change=[].concat(e[rr],e.change||[]),delete e[rr])}(r),At(r,a,ar,or,t.context),nr=void 0}}var ur={create:sr,update:sr};function cr(e,t){if(!n(e.data.domProps)||!n(t.data.domProps)){var r,a,o=t.elm,s=e.data.domProps||{},u=t.data.domProps||{};for(r in i(u.__ob__)&&(u=t.data.domProps=T({},u)),s)n(u[r])&&(o[r]="");for(r in u){if(a=u[r],"textContent"===r||"innerHTML"===r){if(t.children&&(t.children.length=0),a===s[r])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===r){o._value=a;var c=n(a)?"":String(a);lr(o,c)&&(o.value=c)}else o[r]=a}}}function lr(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.lazy)return!1;if(r.number)return d(n)!==d(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var hr={create:cr,update:cr},pr=b(function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t});function dr(e){var t=fr(e.style);return e.staticStyle?T(e.staticStyle,t):t}function fr(e){return Array.isArray(e)?C(e):"string"==typeof e?pr(e):e}var mr,vr=/^--/,gr=/\s*!important$/,yr=function(e,t,n){if(vr.test(t))e.style.setProperty(t,n);else if(gr.test(n))e.style.setProperty(t,n.replace(gr,""),"important");else{var i=br(t);if(Array.isArray(n))for(var r=0,a=n.length;r<a;r++)e.style[i]=n[r];else e.style[i]=n}},xr=["Webkit","Moz","ms"],br=b(function(e){if(mr=mr||document.createElement("div").style,"filter"!==(e=E(e))&&e in mr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<xr.length;n++){var i=xr[n]+t;if(i in mr)return i}});function wr(e,t){var r=t.data,a=e.data;if(!(n(r.staticStyle)&&n(r.style)&&n(a.staticStyle)&&n(a.style))){var o,s,u=t.elm,c=a.staticStyle,l=a.normalizedStyle||a.style||{},h=c||l,p=fr(t.data.style)||{};t.data.normalizedStyle=i(p.__ob__)?T({},p):p;var d=function(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=dr(r.data))&&T(i,n);(n=dr(e.data))&&T(i,n);for(var a=e;a=a.parent;)a.data&&(n=dr(a.data))&&T(i,n);return i}(t,!0);for(s in h)n(d[s])&&yr(u,s,"");for(s in d)(o=d[s])!==h[s]&&yr(u,s,null==o?"":o)}}var Er={create:wr,update:wr};function _r(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Mr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Sr(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&T(t,Ar(e.name||"v")),T(t,e),t}return"string"==typeof e?Ar(e):void 0}}var Ar=b(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Dr=W&&!J,Tr="transition",Cr="animation",Fr="transition",Lr="transitionend",Rr="animation",Pr="animationend";Dr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Fr="WebkitTransition",Lr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Rr="WebkitAnimation",Pr="webkitAnimationEnd"));var Ir=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Or(e){Ir(function(){Ir(e)})}function Br(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),_r(e,t))}function Nr(e,t){e._transitionClasses&&g(e._transitionClasses,t),Mr(e,t)}function kr(e,t,n){var i=zr(e,t),r=i.type,a=i.timeout,o=i.propCount;if(!r)return n();var s=r===Tr?Lr:Pr,u=0,c=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++u>=o&&c()};setTimeout(function(){u<o&&c()},a+1),e.addEventListener(s,l)}var Ur=/\b(transform|all)(,|$)/;function zr(e,t){var n,i=window.getComputedStyle(e),r=i[Fr+"Delay"].split(", "),a=i[Fr+"Duration"].split(", "),o=Hr(r,a),s=i[Rr+"Delay"].split(", "),u=i[Rr+"Duration"].split(", "),c=Hr(s,u),l=0,h=0;t===Tr?o>0&&(n=Tr,l=o,h=a.length):t===Cr?c>0&&(n=Cr,l=c,h=u.length):(l=Math.max(o,c),h=(n=l>0?o>c?Tr:Cr:null)?n===Tr?a.length:u.length:0);var p=n===Tr&&Ur.test(i[Fr+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:p}}function Hr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return Gr(t)+Gr(e[n])}))}function Gr(e){return 1e3*Number(e.slice(0,-1))}function Vr(e,t){var r=e.elm;i(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var a=Sr(e.data.transition);if(!n(a)&&!i(r._enterCb)&&1===r.nodeType){for(var s=a.css,u=a.type,c=a.enterClass,l=a.enterToClass,h=a.enterActiveClass,p=a.appearClass,f=a.appearToClass,m=a.appearActiveClass,v=a.beforeEnter,g=a.enter,y=a.afterEnter,x=a.enterCancelled,b=a.beforeAppear,w=a.appear,E=a.afterAppear,_=a.appearCancelled,M=a.duration,S=zt,A=zt.$vnode;A&&A.parent;)A=A.parent,S=A.context;var D=!S._isMounted||!e.isRootInsert;if(!D||w||""===w){var T=D&&p?p:c,C=D&&m?m:h,F=D&&f?f:l,L=D&&b||v,R=D&&"function"==typeof w?w:g,P=D&&E||y,I=D&&_||x,B=d(o(M)?M.enter:M);null!=B&&Wr(B,"enter",e);var N=!1!==s&&!J,k=$r(R),U=r._enterCb=O(function(){N&&(Nr(r,F),Nr(r,C)),U.cancelled?(N&&Nr(r,T),I&&I(r)):P&&P(r),r._enterCb=null});e.data.show||Dt(e,"insert",function(){var t=r.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),R&&R(r,U)}),L&&L(r),N&&(Br(r,T),Br(r,C),Or(function(){Nr(r,T),U.cancelled||(Br(r,F),k||(Xr(B)?setTimeout(U,B):kr(r,u,U)))})),e.data.show&&(t&&t(),R&&R(r,U)),N||k||U()}}}function jr(e,t){var r=e.elm;i(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var a=Sr(e.data.transition);if(n(a)||1!==r.nodeType)return t();if(!i(r._leaveCb)){var s=a.css,u=a.type,c=a.leaveClass,l=a.leaveToClass,h=a.leaveActiveClass,p=a.beforeLeave,f=a.leave,m=a.afterLeave,v=a.leaveCancelled,g=a.delayLeave,y=a.duration,x=!1!==s&&!J,b=$r(f),w=d(o(y)?y.leave:y);i(w)&&Wr(w,"leave",e);var E=r._leaveCb=O(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),x&&(Nr(r,l),Nr(r,h)),E.cancelled?(x&&Nr(r,c),v&&v(r)):(t(),m&&m(r)),r._leaveCb=null});g?g(_):_()}function _(){E.cancelled||(e.data.show||((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),p&&p(r),x&&(Br(r,c),Br(r,h),Or(function(){Nr(r,c),E.cancelled||(Br(r,l),b||(Xr(w)?setTimeout(E,w):kr(r,u,E)))})),f&&f(r,E),x||b||E())}}function Wr(e,t,n){"number"!=typeof e?ue("<transition> explicit "+t+" duration is not a valid number - got "+JSON.stringify(e)+".",n.context):isNaN(e)&&ue("<transition> explicit "+t+" duration is NaN - the duration expression might be incorrect.",n.context)}function Xr(e){return"number"==typeof e&&!isNaN(e)}function $r(e){if(n(e))return!1;var t=e.fns;return i(t)?$r(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function qr(e,t){!0!==t.data.show&&Vr(t)}var Yr=[Di,Bi,ur,hr,Er,W?{create:qr,activate:qr,remove:function(e,t){!0!==e.data.show?jr(e,t):t()}}:{}].concat(_i),Jr=function(e){var t,o,s={},u=e.modules,c=e.nodeOps;for(t=0;t<fi.length;++t)for(s[fi[t]]=[],o=0;o<u.length;++o)i(u[o][fi[t]])&&s[fi[t]].push(u[o][fi[t]]);function h(e){var t=c.parentNode(e);i(t)&&c.removeChild(t,e)}function p(e,t){return!t&&!e.ns&&!(U.ignoredElements.length&&U.ignoredElements.some(function(t){return l(t)?t.test(e.tag):t===e.tag}))&&U.isUnknownElement(e.tag)}var d=0;function m(e,t,n,a,o,s,u){if(i(e.elm)&&i(s)&&(e=s[u]=_e(e)),e.isRootInsert=!o,!v(e,t,n,a)){var l=e.data,h=e.children,f=e.tag;i(f)?(l&&l.pre&&d++,p(e,d)&&ue("Unknown custom element: <"+f+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?c.createElementNS(e.ns,f):c.createElement(f,e),E(e),x(e,h,t),i(l)&&w(e,t),y(n,e.elm,a),l&&l.pre&&d--):r(e.isComment)?(e.elm=c.createComment(e.text),y(n,e.elm,a)):(e.elm=c.createTextNode(e.text),y(n,e.elm,a))}}function v(e,t,n,a){var o=e.data;if(i(o)){var u=i(e.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(e,!1,n,a),i(e.componentInstance))return g(e,t),r(u)&&function(e,t,n,r){for(var a,o=e;o.componentInstance;)if(o=o.componentInstance._vnode,i(a=o.data)&&i(a=a.transition)){for(a=0;a<s.activate.length;++a)s.activate[a](di,o);t.push(o);break}y(n,e.elm,r)}(e,t,n,a),!0}}function g(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,b(e)?(w(e,t),E(e)):(pi(e),t.push(e))}function y(e,t,n){i(e)&&(i(n)?n.parentNode===e&&c.insertBefore(e,t,n):c.appendChild(e,t))}function x(e,t,n){if(Array.isArray(t)){D(t);for(var i=0;i<t.length;++i)m(t[i],n,e.elm,null,!0,t,i)}else a(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function b(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return i(e.tag)}function w(e,n){for(var r=0;r<s.create.length;++r)s.create[r](di,e);i(t=e.data.hook)&&(i(t.create)&&t.create(di,e),i(t.insert)&&n.push(e))}function E(e){var t;if(i(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var n=e;n;)i(t=n.context)&&i(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),n=n.parent;i(t=zt)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function _(e,t,n,i,r,a){for(;i<=r;++i)m(n[i],a,e,t,!1,n,i)}function M(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)M(e.children[n])}function S(e,t,n,r){for(;n<=r;++n){var a=t[n];i(a)&&(i(a.tag)?(A(a),M(a)):h(a.elm))}}function A(e,t){if(i(t)||i(e.data)){var n,r=s.remove.length+1;for(i(t)?t.listeners+=r:t=function(e,t){function n(){0==--n.listeners&&h(e)}return n.listeners=t,n}(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&A(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else h(e.elm)}function D(e){for(var t={},n=0;n<e.length;n++){var r=e[n],a=r.key;i(a)&&(t[a]?ue("Duplicate keys detected: '"+a+"'. This may cause an update error.",r.context):t[a]=!0)}}function T(e,t,n,r){for(var a=n;a<r;a++){var o=t[a];if(i(o)&&mi(e,o))return a}}function C(e,t,a,o){if(e!==t){var u=t.elm=e.elm;if(r(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?P(e.elm,t,a):t.isAsyncPlaceholder=!0;else if(r(t.isStatic)&&r(e.isStatic)&&t.key===e.key&&(r(t.isCloned)||r(t.isOnce)))t.componentInstance=e.componentInstance;else{var l,h=t.data;i(h)&&i(l=h.hook)&&i(l=l.prepatch)&&l(e,t);var p=e.children,d=t.children;if(i(h)&&b(t)){for(l=0;l<s.update.length;++l)s.update[l](e,t);i(l=h.hook)&&i(l=l.update)&&l(e,t)}n(t.text)?i(p)&&i(d)?p!==d&&function(e,t,r,a,o){var s,u,l,h,p=0,d=0,f=t.length-1,v=t[0],g=t[f],y=r.length-1,x=r[0],b=r[y],w=!o;for(D(r);p<=f&&d<=y;)n(v)?v=t[++p]:n(g)?g=t[--f]:mi(v,x)?(C(v,x,a),v=t[++p],x=r[++d]):mi(g,b)?(C(g,b,a),g=t[--f],b=r[--y]):mi(v,b)?(C(v,b,a),w&&c.insertBefore(e,v.elm,c.nextSibling(g.elm)),v=t[++p],b=r[--y]):mi(g,x)?(C(g,x,a),w&&c.insertBefore(e,g.elm,v.elm),g=t[--f],x=r[++d]):(n(s)&&(s=vi(t,p,f)),n(u=i(x.key)?s[x.key]:T(x,t,p,f))?m(x,a,e,v.elm,!1,r,d):mi(l=t[u],x)?(C(l,x,a),t[u]=void 0,w&&c.insertBefore(e,l.elm,v.elm)):m(x,a,e,v.elm,!1,r,d),x=r[++d]);p>f?(h=n(r[y+1])?null:r[y+1].elm,_(e,h,r,d,y,a)):d>y&&S(e,t,p,f)}(u,p,d,a,o):i(d)?(i(e.text)&&c.setTextContent(u,""),_(u,null,d,0,d.length-1,a)):i(p)?S(u,p,0,p.length-1):i(e.text)&&c.setTextContent(u,""):e.text!==t.text&&c.setTextContent(u,t.text),i(h)&&i(l=h.hook)&&i(l=l.postpatch)&&l(e,t)}}}function F(e,t,n){if(r(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var a=0;a<t.length;++a)t[a].data.hook.insert(t[a])}var L=!1,R=f("attrs,class,staticClass,staticStyle,key");function P(e,t,n,a){var o,s=t.tag,u=t.data,c=t.children;if(a=a||u&&u.pre,t.elm=e,r(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(!function(e,t,n){return i(t.tag)?0===t.tag.indexOf("vue-component")||!p(t,n)&&t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}(e,t,a))return!1;if(i(u)&&(i(o=u.hook)&&i(o=o.init)&&o(t,!0),i(o=t.componentInstance)))return g(t,n),!0;if(i(s)){if(i(c))if(e.hasChildNodes())if(i(o=u)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==e.innerHTML)return"undefined"==typeof console||L||(L=!0,console.warn("Parent: ",e),console.warn("server innerHTML: ",o),console.warn("client innerHTML: ",e.innerHTML)),!1}else{for(var l=!0,h=e.firstChild,d=0;d<c.length;d++){if(!h||!P(h,c[d],n,a)){l=!1;break}h=h.nextSibling}if(!l||h)return"undefined"==typeof console||L||(L=!0,console.warn("Parent: ",e),console.warn("Mismatching childNodes vs. VNodes: ",e.childNodes,c)),!1}else x(t,c,n);if(i(u)){var f=!1;for(var m in u)if(!R(m)){f=!0,w(t,n);break}!f&&u.class&&Et(u.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,a,o,u,l){if(!n(t)){var h,p=!1,d=[];if(n(e))p=!0,m(t,d,u,l);else{var f=i(e.nodeType);if(!f&&mi(e,t))C(e,t,d,o);else{if(f){if(1===e.nodeType&&e.hasAttribute(B)&&(e.removeAttribute(B),a=!0),r(a)){if(P(e,t,d))return F(t,d,!0),e;ue("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}h=e,e=new xe(c.tagName(h).toLowerCase(),{},[],void 0,h)}var v=e.elm,g=c.parentNode(v);if(m(t,d,v._leaveCb?null:g,c.nextSibling(v)),i(t.parent))for(var y=t.parent,x=b(t);y;){for(var w=0;w<s.destroy.length;++w)s.destroy[w](y);if(y.elm=t.elm,x){for(var E=0;E<s.create.length;++E)s.create[E](di,y);var _=y.data.hook.insert;if(_.merged)for(var A=1;A<_.fns.length;A++)_.fns[A]()}else pi(y);y=y.parent}i(g)?S(g,[e],0,0):i(e.tag)&&M(e)}}return F(t,d,p),t.elm}i(e)&&M(e)}}({nodeOps:li,modules:Yr});J&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&ra(e,"input")});var Zr={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Dt(n,"postpatch",function(){Zr.componentUpdated(e,t,n)}):Kr(e,t,n.context),e._vOptions=[].map.call(e.options,ta)):("textarea"===n.tag||ui(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",na),e.addEventListener("compositionend",ia),e.addEventListener("change",ia),J&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Kr(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,ta);if(r.some(function(e,t){return!P(e,i[t])})){var a=e.multiple?t.value.some(function(e){return ea(e,r)}):t.value!==t.oldValue&&ea(t.value,r);a&&ra(e,"change")}}}};function Kr(e,t,n){Qr(e,t,n),(Y||Z)&&setTimeout(function(){Qr(e,t,n)},0)}function Qr(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var a,o,s=0,u=e.options.length;s<u;s++)if(o=e.options[s],r)a=I(i,ta(o))>-1,o.selected!==a&&(o.selected=a);else if(P(ta(o),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));r||(e.selectedIndex=-1)}else ue('<select multiple v-model="'+t.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),n)}function ea(e,t){return t.every(function(t){return!P(t,e)})}function ta(e){return"_value"in e?e._value:e.value}function na(e){e.target.composing=!0}function ia(e){e.target.composing&&(e.target.composing=!1,ra(e.target,"input"))}function ra(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function aa(e){return!e.componentInstance||e.data&&e.data.transition?e:aa(e.componentInstance._vnode)}var oa={model:Zr,show:{bind:function(e,t,n){var i=t.value,r=(n=aa(n)).data&&n.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,Vr(n,function(){e.style.display=a})):e.style.display=i?a:"none"},update:function(e,t,n){var i=t.value,r=t.oldValue;if(!i!=!r){var a=(n=aa(n)).data&&n.data.transition;a?(n.data.show=!0,i?Vr(n,function(){e.style.display=e.__vOriginalDisplay}):jr(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}}},sa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ua(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ua(Pt(t.children)):e}function ca(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var a in r)t[E(a)]=r[a];return t}function la(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var ha={name:"transition",props:sa,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(function(e){return e.tag||Rt(e)})).length){n.length>1&&ue("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode;i&&"in-out"!==i&&"out-in"!==i&&ue("invalid <transition> mode: "+i,this.$parent);var r=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=ua(r);if(!o)return r;if(this._leaving)return la(e,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var u=(o.data||(o.data={})).transition=ca(this),c=this._vnode,l=ua(c);if(o.data.directives&&o.data.directives.some(function(e){return"show"===e.name})&&(o.data.show=!0),l&&l.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,l)&&!Rt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=T({},u);if("out-in"===i)return this._leaving=!0,Dt(h,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),la(e,r);if("in-out"===i){if(Rt(o))return c;var p,d=function(){p()};Dt(u,"afterEnter",d),Dt(u,"enterCancelled",d),Dt(h,"delayLeave",function(e){p=e})}}return r}}},pa=T({tag:String,moveClass:String},sa);function da(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function fa(e){e.data.newPos=e.elm.getBoundingClientRect()}function ma(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+i+"px,"+r+"px)",a.transitionDuration="0s"}}delete pa.mode;var va={Transition:ha,TransitionGroup:{props:pa,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],a=this.children=[],o=ca(this),s=0;s<r.length;s++){var u=r[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))a.push(u),n[u.key]=u,(u.data||(u.data={})).transition=o;else{var c=u.componentOptions,l=c?c.Ctor.options.name||c.tag||"":u.tag;ue("<transition-group> children must be keyed: <"+l+">")}}if(i){for(var h=[],p=[],d=0;d<i.length;d++){var f=i[d];f.data.transition=o,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?h.push(f):p.push(f)}this.kept=e(t,null,h),this.removed=p}return e(t,null,a)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(da),e.forEach(fa),e.forEach(ma),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,i=n.style;Br(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Lr,n._moveCb=function e(i){i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Lr,e),n._moveCb=null,Nr(n,t))})}}))},methods:{hasMove:function(e,t){if(!Dr)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){Mr(n,e)}),_r(n,t),n.style.display="none",this.$el.appendChild(n);var i=zr(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};On.config.mustUseProp=Wn,On.config.isReservedTag=ai,On.config.isReservedAttr=Vn,On.config.getTagNamespace=oi,On.config.isUnknownElement=function(e){if(!W)return!0;if(ai(e))return!1;if(e=e.toLowerCase(),null!=si[e])return si[e];var t=document.createElement(e);return e.indexOf("-")>-1?si[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:si[e]=/HTMLUnknownElement/.test(t.toString())},T(On.options.directives,oa),T(On.options.components,va),On.prototype.__patch__=W?Jr:F,On.prototype.$mount=function(e,t){return function(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=we,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?ue("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):ue("Failed to mount component: template or render function not defined.",e)),jt(e,"beforeMount"),i=U.performance&&ot?function(){var t=e._name,i=e._uid,r="vue-perf-start:"+i,a="vue-perf-end:"+i;ot(r);var o=e._render();ot(a),st("vue "+t+" render",r,a),ot(r),e._update(o,n),ot(a),st("vue "+t+" patch",r,a)}:function(){e._update(e._render(),n)},new tn(e,i,F,null,!0),n=!1,null==e.$vnode&&(e._isMounted=!0,jt(e,"mounted")),e}(this,e=e&&W?ci(e):void 0,t)},W&&setTimeout(function(){U.devtools&&(re?re.emit("init",On):Q&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==U.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var ga=/\{\{((?:.|\n)+?)\}\}/g,ya=/[-.*+?^${}()|[\]\/\\]/g,xa=b(function(e){var t=e[0].replace(ya,"\\$&"),n=e[1].replace(ya,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")});function ba(e,t){var n=t?xa(t):ga;if(n.test(e)){for(var i,r,a,o=[],s=[],u=n.lastIndex=0;i=n.exec(e);){(r=i.index)>u&&(s.push(a=e.slice(u,r)),o.push(JSON.stringify(a)));var c=ki(i[1].trim());o.push("_s("+c+")"),s.push({"@binding":c}),u=r+i[0].length}return u<e.length&&(s.push(a=e.slice(u)),o.push(JSON.stringify(a))),{expression:o.join("+"),tokens:s}}}var wa,Ea={staticKeys:["staticClass"],transformNode:function(e,t){var n=t.warn||zi,i=qi(e,"class");if(i){var r=ba(i,t.delimiters);r&&n('class="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.')}i&&(e.staticClass=JSON.stringify(i));var a=$i(e,"class",!1);a&&(e.classBinding=a)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}},_a={staticKeys:["staticStyle"],transformNode:function(e,t){var n=t.warn||zi,i=qi(e,"style");if(i){var r=ba(i,t.delimiters);r&&n('style="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.'),e.staticStyle=JSON.stringify(pr(i))}var a=$i(e,"style",!1);a&&(e.styleBinding=a)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},Ma={decode:function(e){return(wa=wa||document.createElement("div")).innerHTML=e,wa.textContent}},Sa=f("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Aa=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Da=f("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Ta=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Ca="[a-zA-Z_][\\w\\-\\.]*",Fa="((?:"+Ca+"\\:)?"+Ca+")",La=new RegExp("^<"+Fa),Ra=/^\s*(\/?)>/,Pa=new RegExp("^<\\/"+Fa+"[^>]*>"),Ia=/^<!DOCTYPE [^>]+>/i,Oa=/^<!\--/,Ba=/^<!\[/,Na=!1;"x".replace(/x(.)?/g,function(e,t){Na=""===t});var ka=f("script,style,textarea",!0),Ua={},za={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},Ha=/&(?:lt|gt|quot|amp);/g,Ga=/&(?:lt|gt|quot|amp|#10|#9);/g,Va=f("pre,textarea",!0),ja=function(e,t){return e&&Va(e)&&"\n"===t[0]};function Wa(e,t){var n=t?Ga:Ha;return e.replace(n,function(e){return za[e]})}var Xa,$a,qa,Ya,Ja,Za,Ka,Qa,eo=/^@|^v-on:/,to=/^v-|^@|^:/,no=/([^]*?)\s+(?:in|of)\s+([^]*)/,io=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ro=/^\(|\)$/g,ao=/:(.*)$/,oo=/^:|^v-bind:/,so=/\.[^.]+/g,uo=b(Ma.decode);function co(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:vo(t),parent:n,children:[]}}function lo(e,t){Xa=t.warn||zi,Za=t.isPreTag||L,Ka=t.mustUseProp||L,Qa=t.getTagNamespace||L,qa=Hi(t.modules,"transformNode"),Ya=Hi(t.modules,"preTransformNode"),Ja=Hi(t.modules,"postTransformNode"),$a=t.delimiters;var n,i,r=[],a=!1!==t.preserveWhitespace,o=!1,s=!1,u=!1;function c(e){u||(u=!0,Xa(e))}function l(e){e.pre&&(o=!1),Za(e.tag)&&(s=!1);for(var n=0;n<Ja.length;n++)Ja[n](e,t)}return function(e,t){for(var n,i,r=[],a=t.expectHTML,o=t.isUnaryTag||L,s=t.canBeLeftOpenTag||L,u=0;e;){if(n=e,i&&ka(i)){var c=0,l=i.toLowerCase(),h=Ua[l]||(Ua[l]=new RegExp("([\\s\\S]*?)(</"+l+"[^>]*>)","i")),p=e.replace(h,function(e,n,i){return c=i.length,ka(l)||"noscript"===l||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),ja(l,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""});u+=e.length-p.length,e=p,A(l,u-c,u)}else{var d=e.indexOf("<");if(0===d){if(Oa.test(e)){var f=e.indexOf("--\x3e");if(f>=0){t.shouldKeepComment&&t.comment(e.substring(4,f)),_(f+3);continue}}if(Ba.test(e)){var m=e.indexOf("]>");if(m>=0){_(m+2);continue}}var v=e.match(Ia);if(v){_(v[0].length);continue}var g=e.match(Pa);if(g){var y=u;_(g[0].length),A(g[1],y,u);continue}var x=M();if(x){S(x),ja(i,e)&&_(1);continue}}var b=void 0,w=void 0,E=void 0;if(d>=0){for(w=e.slice(d);!(Pa.test(w)||La.test(w)||Oa.test(w)||Ba.test(w)||(E=w.indexOf("<",1))<0);)d+=E,w=e.slice(d);b=e.substring(0,d),_(d)}d<0&&(b=e,e=""),t.chars&&b&&t.chars(b)}if(e===n){t.chars&&t.chars(e),!r.length&&t.warn&&t.warn('Mal-formatted tag at end of template: "'+e+'"');break}}function _(t){u+=t,e=e.substring(t)}function M(){var t=e.match(La);if(t){var n,i,r={tagName:t[1],attrs:[],start:u};for(_(t[0].length);!(n=e.match(Ra))&&(i=e.match(Ta));)_(i[0].length),r.attrs.push(i);if(n)return r.unarySlash=n[1],_(n[0].length),r.end=u,r}}function S(e){var n=e.tagName,u=e.unarySlash;a&&("p"===i&&Da(n)&&A(i),s(n)&&i===n&&A(n));for(var c=o(n)||!!u,l=e.attrs.length,h=new Array(l),p=0;p<l;p++){var d=e.attrs[p];Na&&-1===d[0].indexOf('""')&&(""===d[3]&&delete d[3],""===d[4]&&delete d[4],""===d[5]&&delete d[5]);var f=d[3]||d[4]||d[5]||"",m="a"===n&&"href"===d[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;h[p]={name:d[1],value:Wa(f,m)}}c||(r.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:h}),i=n),t.start&&t.start(n,h,c,e.start,e.end)}function A(e,n,a){var o,s;if(null==n&&(n=u),null==a&&(a=u),e&&(s=e.toLowerCase()),e)for(o=r.length-1;o>=0&&r[o].lowerCasedTag!==s;o--);else o=0;if(o>=0){for(var c=r.length-1;c>=o;c--)(c>o||!e&&t.warn)&&t.warn("tag <"+r[c].tag+"> has no matching end tag."),t.end&&t.end(r[c].tag,n,a);r.length=o,i=o&&r[o-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,a):"p"===s&&(t.start&&t.start(e,[],!1,n,a),t.end&&t.end(e,n,a))}A()}(e,{warn:Xa,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,start:function(e,a,u){var h=i&&i.ns||Qa(e);Y&&"svg"===h&&(a=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];go.test(i.name)||(i.name=i.name.replace(yo,""),t.push(i))}return t}(a));var p,d=co(e,a,i);h&&(d.ns=h),"style"!==(p=d).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||ie()||(d.forbidden=!0,Xa("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+e+">, as they will not be parsed."));for(var f=0;f<Ya.length;f++)d=Ya[f](d,t)||d;function m(e){"slot"!==e.tag&&"template"!==e.tag||c("Cannot use <"+e.tag+"> as component root element because it may contain multiple nodes."),e.attrsMap.hasOwnProperty("v-for")&&c("Cannot use v-for on stateful component root element because it renders multiple elements.")}if(o||(function(e){null!=qi(e,"v-pre")&&(e.pre=!0)}(d),d.pre&&(o=!0)),Za(d.tag)&&(s=!0),o?function(e){var t=e.attrsList.length;if(t)for(var n=e.attrs=new Array(t),i=0;i<t;i++)n[i]={name:e.attrsList[i].name,value:JSON.stringify(e.attrsList[i].value)};else e.pre||(e.plain=!0)}(d):d.processed||(po(d),function(e){var t=qi(e,"v-if");if(t)e.if=t,fo(e,{exp:t,block:e});else{null!=qi(e,"v-else")&&(e.else=!0);var n=qi(e,"v-else-if");n&&(e.elseif=n)}}(d),function(e){null!=qi(e,"v-once")&&(e.once=!0)}(d),ho(d,t)),n?r.length||(n.if&&(d.elseif||d.else)?(m(d),fo(n,{exp:d.elseif,block:d})):c("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.")):m(n=d),i&&!d.forbidden)if(d.elseif||d.else)!function(e,t){var n=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];" "!==e[t].text&&Xa('text "'+e[t].text.trim()+'" between v-if and v-else(-if) will be ignored.'),e.pop()}}(t.children);n&&n.if?fo(n,{exp:e.elseif,block:e}):Xa("v-"+(e.elseif?'else-if="'+e.elseif+'"':"else")+" used on element <"+e.tag+"> without corresponding v-if.")}(d,i);else if(d.slotScope){i.plain=!1;var v=d.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[v]=d}else i.children.push(d),d.parent=i;u?l(d):(i=d,r.push(d))},end:function(){var e=r[r.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&!s&&e.children.pop(),r.length-=1,i=r[r.length-1],l(e)},chars:function(t){if(i){if(!Y||"textarea"!==i.tag||i.attrsMap.placeholder!==t){var n,r,u=i.children;(t=s||t.trim()?"script"===(n=i).tag||"style"===n.tag?t:uo(t):a&&u.length?" ":"")&&(!o&&" "!==t&&(r=ba(t,$a))?u.push({type:2,expression:r.expression,tokens:r.tokens,text:t}):" "===t&&u.length&&" "===u[u.length-1].text||u.push({type:3,text:t}))}}else t===e?c("Component template requires a root element, rather than just text."):(t=t.trim())&&c('text "'+t+'" outside root element will be ignored.')},comment:function(e){i.children.push({type:3,text:e,isComment:!0})}}),n}function ho(e,t){var n,i;(i=$i(n=e,"key"))&&("template"===n.tag&&Xa("<template> cannot be keyed. Place the key on real elements instead."),n.key=i),e.plain=!e.key&&!e.attrsList.length,function(e){var t=$i(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){if("slot"===e.tag)e.slotName=$i(e,"name"),e.key&&Xa("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.");else{var t;"template"===e.tag?((t=qi(e,"scope"))&&Xa('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',!0),e.slotScope=t||qi(e,"slot-scope")):(t=qi(e,"slot-scope"))&&(e.attrsMap["v-for"]&&Xa("Ambiguous combined usage of slot-scope and v-for on <"+e.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",!0),e.slotScope=t);var n=$i(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n,"template"===e.tag||e.slotScope||Vi(e,"slot",n))}}(e),function(e){var t;(t=$i(e,"is"))&&(e.component=t),null!=qi(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<qa.length;r++)e=qa[r](e,t)||e;!function(e){var t,n,i,r,a,o,s,u=e.attrsList;for(t=0,n=u.length;t<n;t++)if(i=r=u[t].name,a=u[t].value,to.test(i))if(e.hasBindings=!0,(o=mo(i))&&(i=i.replace(so,"")),oo.test(i))i=i.replace(oo,""),a=ki(a),s=!1,o&&(o.prop&&(s=!0,"innerHtml"===(i=E(i))&&(i="innerHTML")),o.camel&&(i=E(i)),o.sync&&Xi(e,"update:"+E(i),Ji(a,"$event"))),s||!e.component&&Ka(e.tag,e.attrsMap.type,i)?Gi(e,i,a):Vi(e,i,a);else if(eo.test(i))i=i.replace(eo,""),Xi(e,i,a,o,!1,Xa);else{var c=(i=i.replace(to,"")).match(ao),l=c&&c[1];l&&(i=i.slice(0,-(l.length+1))),Wi(e,i,r,a,l,o),"model"===i&&xo(e,a)}else{var h=ba(a,$a);h&&Xa(i+'="'+a+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.'),Vi(e,i,JSON.stringify(a)),!e.component&&"muted"===i&&Ka(e.tag,e.attrsMap.type,i)&&Gi(e,i,"true")}}(e)}function po(e){var t;if(t=qi(e,"v-for")){var n=function(e){var t=e.match(no);if(t){var n={};n.for=t[2].trim();var i=t[1].trim().replace(ro,""),r=i.match(io);return r?(n.alias=i.replace(io,""),n.iterator1=r[1].trim(),r[2]&&(n.iterator2=r[2].trim())):n.alias=i,n}}(t);n?T(e,n):Xa("Invalid v-for expression: "+t)}}function fo(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function mo(e){var t=e.match(so);if(t){var n={};return t.forEach(function(e){n[e.slice(1)]=!0}),n}}function vo(e){for(var t={},n=0,i=e.length;n<i;n++)!t[e[n].name]||Y||Z||Xa("duplicate attribute: "+e[n].name),t[e[n].name]=e[n].value;return t}var go=/^xmlns:NS\d+/,yo=/^NS\d+:/;function xo(e,t){for(var n=e;n;)n.for&&n.alias===t&&Xa("<"+e.tag+' v-model="'+t+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.'),n=n.parent}function bo(e){return co(e.tag,e.attrsList.slice(),e.parent)}var wo,Eo,_o=[Ea,_a,{preTransformNode:function(e,t){if("input"===e.tag){var n,i=e.attrsMap;if(!i["v-model"])return;if((i[":type"]||i["v-bind:type"])&&(n=$i(e,"type")),i.type||n||!i["v-bind"]||(n="("+i["v-bind"]+").type"),n){var r=qi(e,"v-if",!0),a=r?"&&("+r+")":"",o=null!=qi(e,"v-else",!0),s=qi(e,"v-else-if",!0),u=bo(e);po(u),ji(u,"type","checkbox"),ho(u,t),u.processed=!0,u.if="("+n+")==='checkbox'"+a,fo(u,{exp:u.if,block:u});var c=bo(e);qi(c,"v-for",!0),ji(c,"type","radio"),ho(c,t),fo(u,{exp:"("+n+")==='radio'"+a,block:c});var l=bo(e);return qi(l,"v-for",!0),ji(l,":type",n),ho(l,t),fo(u,{exp:r,block:l}),o?u.else=!0:s&&(u.elseif=s),u}}}}],Mo={expectHTML:!0,modules:_o,directives:{model:function(e,t,n){Oi=n;var i=t.value,r=t.modifiers,a=e.tag,o=e.attrsMap.type;if("input"===a&&"file"===o&&Oi("<"+e.tag+' v-model="'+i+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.'),e.component)return Yi(e,i,r),!1;if("select"===a)!function(e,t,n){var i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";i=i+" "+Ji(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Xi(e,"change",i,null,!0)}(e,i,r);else if("input"===a&&"checkbox"===o)!function(e,t,n){var i=n&&n.number,r=$i(e,"value")||"null",a=$i(e,"true-value")||"true",o=$i(e,"false-value")||"false";Gi(e,"checked","Array.isArray("+t+")?_i("+t+","+r+")>-1"+("true"===a?":("+t+")":":_q("+t+","+a+")")),Xi(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+o+");if(Array.isArray($$a)){var $$v="+(i?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Ji(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Ji(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Ji(t,"$$c")+"}",null,!0)}(e,i,r);else if("input"===a&&"radio"===o)!function(e,t,n){var i=n&&n.number,r=$i(e,"value")||"null";Gi(e,"checked","_q("+t+","+(r=i?"_n("+r+")":r)+")"),Xi(e,"change",Ji(t,r),null,!0)}(e,i,r);else if("input"===a||"textarea"===a)!function(e,t,n){var i=e.attrsMap.type,r=e.attrsMap["v-bind:value"]||e.attrsMap[":value"],a=e.attrsMap["v-bind:type"]||e.attrsMap[":type"];if(r&&!a){var o=e.attrsMap["v-bind:value"]?"v-bind:value":":value";Oi(o+'="'+r+'" conflicts with v-model on the same element because the latter already expands to a value binding internally')}var s=n||{},u=s.lazy,c=s.number,l=s.trim,h=!u&&"range"!==i,p=u?"change":"range"===i?ir:"input",d="$event.target.value";l&&(d="$event.target.value.trim()"),c&&(d="_n("+d+")");var f=Ji(t,d);h&&(f="if($event.target.composing)return;"+f),Gi(e,"value","("+t+")"),Xi(e,p,f,null,!0),(l||c)&&Xi(e,"blur","$forceUpdate()")}(e,i,r);else{if(!U.isReservedTag(a))return Yi(e,i,r),!1;Oi("<"+e.tag+' v-model="'+i+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.")}return!0},text:function(e,t){t.value&&Gi(e,"textContent","_s("+t.value+")")},html:function(e,t){t.value&&Gi(e,"innerHTML","_s("+t.value+")")}},isPreTag:function(e){return"pre"===e},isUnaryTag:Sa,mustUseProp:Wn,canBeLeftOpenTag:Aa,isReservedTag:ai,getTagNamespace:oi,staticKeys:function(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}(_o)},So=b(function(e){return f("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))});function Ao(e,t){e&&(wo=So(t.staticKeys||""),Eo=t.isReservedTag||L,function e(t){if(t.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||m(e.tag)||!Eo(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(wo))))}(t),1===t.type){if(!Eo(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var n=0,i=t.children.length;n<i;n++){var r=t.children[n];e(r),r.static||(t.static=!1)}if(t.ifConditions)for(var a=1,o=t.ifConditions.length;a<o;a++){var s=t.ifConditions[a].block;e(s),s.static||(t.static=!1)}}}(e),function e(t,n){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=n),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var i=0,r=t.children.length;i<r;i++)e(t.children[i],n||!!t.for);if(t.ifConditions)for(var a=1,o=t.ifConditions.length;a<o;a++)e(t.ifConditions[a].block,n)}}(e,!1))}var Do=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,To=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Co={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Fo={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Lo=function(e){return"if("+e+")return null;"},Ro={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Lo("$event.target !== $event.currentTarget"),ctrl:Lo("!$event.ctrlKey"),shift:Lo("!$event.shiftKey"),alt:Lo("!$event.altKey"),meta:Lo("!$event.metaKey"),left:Lo("'button' in $event && $event.button !== 0"),middle:Lo("'button' in $event && $event.button !== 1"),right:Lo("'button' in $event && $event.button !== 2")};function Po(e,t,n){var i=t?"nativeOn:{":"on:{";for(var r in e)i+='"'+r+'":'+Io(r,e[r])+",";return i.slice(0,-1)+"}"}function Io(e,t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return Io(e,t)}).join(",")+"]";var n=To.test(t.value),i=Do.test(t.value);if(t.modifiers){var r="",a="",o=[];for(var s in t.modifiers)if(Ro[s])a+=Ro[s],Co[s]&&o.push(s);else if("exact"===s){var u=t.modifiers;a+=Lo(["ctrl","shift","alt","meta"].filter(function(e){return!u[e]}).map(function(e){return"$event."+e+"Key"}).join("||"))}else o.push(s);o.length&&(r+=function(e){return"if(!('button' in $event)&&"+e.map(Oo).join("&&")+")return null;"}(o)),a&&(r+=a);var c=n?"return "+t.value+"($event)":i?"return ("+t.value+")($event)":t.value;return"function($event){"+r+c+"}"}return n||i?t.value:"function($event){"+t.value+"}"}function Oo(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=Co[e],i=Fo[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(i)+")"}var Bo={on:function(e,t){t.modifiers&&ue("v-on without argument does not support modifiers."),e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:F},No=function(e){this.options=e,this.warn=e.warn||zi,this.transforms=Hi(e.modules,"transformCode"),this.dataGenFns=Hi(e.modules,"genData"),this.directives=T(T({},Bo),e.directives);var t=e.isReservedTag||L;this.maybeComponent=function(e){return!t(e.tag)},this.onceId=0,this.staticRenderFns=[]};function ko(e,t){var n=new No(t),i=e?Uo(e,n):'_c("div")';return{render:"with(this){return "+i+"}",staticRenderFns:n.staticRenderFns}}function Uo(e,t){if(e.staticRoot&&!e.staticProcessed)return zo(e,t);if(e.once&&!e.onceProcessed)return Ho(e,t);if(e.for&&!e.forProcessed)return function(e,t,n,i){var r=e.for,a=e.alias,o=e.iterator1?","+e.iterator1:"",s=e.iterator2?","+e.iterator2:"";return t.maybeComponent(e)&&"slot"!==e.tag&&"template"!==e.tag&&!e.key&&t.warn("<"+e.tag+' v-for="'+a+" in "+r+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',!0),e.forProcessed=!0,(i||"_l")+"(("+r+"),function("+a+o+s+"){return "+(n||Uo)(e,t)+"})"}(e,t);if(e.if&&!e.ifProcessed)return Go(e,t);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',i=Wo(e,t),r="_t("+n+(i?","+i:""),a=e.attrs&&"{"+e.attrs.map(function(e){return E(e.name)+":"+e.value}).join(",")+"}",o=e.attrsMap["v-bind"];return!a&&!o||i||(r+=",null"),a&&(r+=","+a),o&&(r+=(a?"":",null")+","+o),r+")"}(e,t);var n;if(e.component)n=function(e,t,n){var i=t.inlineTemplate?null:Wo(t,n,!0);return"_c("+e+","+Vo(t,n)+(i?","+i:"")+")"}(e.component,e,t);else{var i=e.plain?void 0:Vo(e,t),r=e.inlineTemplate?null:Wo(e,t,!0);n="_c('"+e.tag+"'"+(i?","+i:"")+(r?","+r:"")+")"}for(var a=0;a<t.transforms.length;a++)n=t.transforms[a](e,n);return n}return Wo(e,t)||"void 0"}function zo(e,t){return e.staticProcessed=!0,t.staticRenderFns.push("with(this){return "+Uo(e,t)+"}"),"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Ho(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Go(e,t);if(e.staticInFor){for(var n="",i=e.parent;i;){if(i.for){n=i.key;break}i=i.parent}return n?"_o("+Uo(e,t)+","+t.onceId+++","+n+")":(t.warn("v-once can only be used inside v-for that is keyed. "),Uo(e,t))}return zo(e,t)}function Go(e,t,n,i){return e.ifProcessed=!0,function e(t,n,i,r){if(!t.length)return r||"_e()";var a=t.shift();return a.exp?"("+a.exp+")?"+o(a.block)+":"+e(t,n,i,r):""+o(a.block);function o(e){return i?i(e,n):e.once?Ho(e,n):Uo(e,n)}}(e.ifConditions.slice(),t,n,i)}function Vo(e,t){var n="{",i=function(e,t){var n=e.directives;if(n){var i,r,a,o,s="directives:[",u=!1;for(i=0,r=n.length;i<r;i++){a=n[i],o=!0;var c=t.directives[a.name];c&&(o=!!c(e,a,t.warn)),o&&(u=!0,s+='{name:"'+a.name+'",rawName:"'+a.rawName+'"'+(a.value?",value:("+a.value+"),expression:"+JSON.stringify(a.value):"")+(a.arg?',arg:"'+a.arg+'"':"")+(a.modifiers?",modifiers:"+JSON.stringify(a.modifiers):"")+"},")}return u?s.slice(0,-1)+"]":void 0}}(e,t);i&&(n+=i+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var r=0;r<t.dataGenFns.length;r++)n+=t.dataGenFns[r](e);if(e.attrs&&(n+="attrs:{"+qo(e.attrs)+"},"),e.props&&(n+="domProps:{"+qo(e.props)+"},"),e.events&&(n+=Po(e.events,!1,t.warn)+","),e.nativeEvents&&(n+=Po(e.nativeEvents,!0,t.warn)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t){return"scopedSlots:_u(["+Object.keys(e).map(function(n){return jo(n,e[n],t)}).join(",")+"])"}(e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var a=function(e,t){var n=e.children[0];if(1===e.children.length&&1===n.type||t.warn("Inline-template components must have exactly one child element."),1===n.type){var i=ko(n,t.options);return"inlineTemplate:{render:function(){"+i.render+"},staticRenderFns:["+i.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}(e,t);a&&(n+=a+",")}return n=n.replace(/,$/,"")+"}",e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function jo(e,t,n){if(t.for&&!t.forProcessed)return function(e,t,n){var i=t.for,r=t.alias,a=t.iterator1?","+t.iterator1:"",o=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,"_l(("+i+"),function("+r+a+o+"){return "+jo(e,t,n)+"})"}(e,t,n);var i="function("+String(t.slotScope)+"){return "+("template"===t.tag?t.if?t.if+"?"+(Wo(t,n)||"undefined")+":undefined":Wo(t,n)||"undefined":Uo(t,n))+"}";return"{key:"+e+",fn:"+i+"}"}function Wo(e,t,n,i,r){var a=e.children;if(a.length){var o=a[0];if(1===a.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag)return(i||Uo)(o,t);var s=n?function(e,t){for(var n=0,i=0;i<e.length;i++){var r=e[i];if(1===r.type){if(Xo(r)||r.ifConditions&&r.ifConditions.some(function(e){return Xo(e.block)})){n=2;break}(t(r)||r.ifConditions&&r.ifConditions.some(function(e){return t(e.block)}))&&(n=1)}}return n}(a,t.maybeComponent):0,u=r||$o;return"["+a.map(function(e){return u(e,t)}).join(",")+"]"+(s?","+s:"")}}function Xo(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function $o(e,t){return 1===e.type?Uo(e,t):3===e.type&&e.isComment?(i=e,"_e("+JSON.stringify(i.text)+")"):"_v("+(2===(n=e).type?n.expression:Yo(JSON.stringify(n.text)))+")";var n,i}function qo(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+='"'+i.name+'":'+Yo(i.value)+","}return t.slice(0,-1)}function Yo(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Jo=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Zo=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Ko=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function Qo(e){var t=[];return e&&function e(t,n){if(1===t.type){for(var i in t.attrsMap)if(to.test(i)){var r=t.attrsMap[i];r&&("v-for"===i?ts(t,'v-for="'+r+'"',n):eo.test(i)?es(r,i+'="'+r+'"',n):is(r,i+'="'+r+'"',n))}if(t.children)for(var a=0;a<t.children.length;a++)e(t.children[a],n)}else 2===t.type&&is(t.expression,t.text,n)}(e,t),t}function es(e,t,n){var i=e.replace(Ko,""),r=i.match(Zo);r&&"$"!==i.charAt(r.index-1)&&n.push('avoid using JavaScript unary operator as property name: "'+r[0]+'" in expression '+t.trim()),is(e,t,n)}function ts(e,t,n){is(e.for||"",t,n),ns(e.alias,"v-for alias",t,n),ns(e.iterator1,"v-for iterator",t,n),ns(e.iterator2,"v-for iterator",t,n)}function ns(e,t,n,i){if("string"==typeof e)try{new Function("var "+e+"=_")}catch(r){i.push("invalid "+t+' "'+e+'" in expression: '+n.trim())}}function is(e,t,n){try{new Function("return "+e)}catch(r){var i=e.replace(Ko,"").match(Jo);i?n.push('avoid using JavaScript keyword as property name: "'+i[0]+'"\n  Raw expression: '+t.trim()):n.push("invalid expression: "+r.message+" in\n\n    "+e+"\n\n  Raw expression: "+t.trim()+"\n")}}function rs(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),F}}function as(e){var t=Object.create(null);return function(n,i,r){var a=(i=T({},i)).warn||ue;delete i.warn;try{new Function("return 1")}catch(e){e.toString().match(/unsafe-eval|CSP/)&&a("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var o=i.delimiters?String(i.delimiters)+n:n;if(t[o])return t[o];var s=e(n,i);s.errors&&s.errors.length&&a("Error compiling template:\n\n"+n+"\n\n"+s.errors.map(function(e){return"- "+e}).join("\n")+"\n",r),s.tips&&s.tips.length&&s.tips.forEach(function(e){return ce(e,r)});var u={},c=[];return u.render=rs(s.render,c),u.staticRenderFns=s.staticRenderFns.map(function(e){return rs(e,c)}),s.errors&&s.errors.length||!c.length||a("Failed to generate render function:\n\n"+c.map(function(e){var t=e.err,n=e.code;return t.toString()+" in\n\n"+n+"\n"}).join("\n"),r),t[o]=u}}var os,ss,us=(ss=function(e,t){var n=lo(e.trim(),t);!1!==t.optimize&&Ao(n,t);var i=ko(n,t);return{ast:n,render:i.render,staticRenderFns:i.staticRenderFns}},function(e){function t(t,n){var i=Object.create(e),r=[],a=[];if(i.warn=function(e,t){(t?a:r).push(e)},n)for(var o in n.modules&&(i.modules=(e.modules||[]).concat(n.modules)),n.directives&&(i.directives=T(Object.create(e.directives||null),n.directives)),n)"modules"!==o&&"directives"!==o&&(i[o]=n[o]);var s=ss(t,i);return r.push.apply(r,Qo(s.ast)),s.errors=r,s.tips=a,s}return{compile:t,compileToFunctions:as(t)}})(Mo).compileToFunctions;function cs(e){return(os=os||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',os.innerHTML.indexOf("&#10;")>0}var ls=!!W&&cs(!1),hs=!!W&&cs(!0),ps=b(function(e){var t=ci(e);return t&&t.innerHTML}),ds=On.prototype.$mount;return On.prototype.$mount=function(e,t){if((e=e&&ci(e))===document.body||e===document.documentElement)return ue("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var i=n.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&((i=ps(i))||ue("Template element not found or is empty: "+n.template,this));else{if(!i.nodeType)return ue("invalid template option:"+i,this),this;i=i.innerHTML}else e&&(i=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(i){U.performance&&ot&&ot("compile");var r=us(i,{shouldDecodeNewlines:ls,shouldDecodeNewlinesForHref:hs,delimiters:n.delimiters,comments:n.comments},this),a=r.render,o=r.staticRenderFns;n.render=a,n.staticRenderFns=o,U.performance&&ot&&(ot("compile end"),st("vue "+this._name+" compile","compile","compile end"))}}return ds.call(this,e,t)},On.compile=us,On}()}),o=(n=a)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,s={html:["text/html"],htm:["text/html"],php:["text/html"],css:["text/css"],js:["text/javascript","application/javascript","application/x-javascript"],json:["text/json","application/json"],json5:["text/json5","application/json5","text/plain"],xml:["text/xml","application/xml"],md:["text/markdown"],jpg:["image/jpg"],bmp:["image/bmp"],gif:["image/gif"],png:["image/png"],svg:["image/svg","image/svg+xml"],tga:["image/tga","text/plain"],psd:["image/psd","text/plain"],fbx:["application/fbx","text/plain"],eot:["font/eot","application/vnd.ms-fontobject"],otf:["font/otf","font/opentype"],ttf:["font/ttf"],woff:["font/woff"],woff2:["font/woff2"]};async function u(e,t=null){try{const t=new XMLHttpRequest;return t.open("GET",e),t.send(),await new Promise((e,n)=>{t.onload=function(){200==t.status?e(t.response):n(Error(t.statusText))}})}catch(e){throw Error(e)}}async function c(e,t=null){try{const n=await fetch(e,t);if(!1===n.ok)return!1;const i=d(e);let r="text";if(h(s[i]))throw Error("fetchFile: FILETYPE ERROR");return"blob"===(r=h(t)||h(t.type)?s[i][0].split("/")[0]:t.type)?await n.blob():"array"===r?await n.arrayBuffer():"json"===r?await n.json():await n.text()}catch(e){throw Error(e)}}async function l(e){return await c(e,{type:"text"})}function h(e){return!e||0===e||!1===e||Boolean(e&&"object"==typeof e)&&!Object.keys(e).length}function p(e){let t=e.split("/");return t[t.length-1]}function d(e){return-1!==e.indexOf("/")?e=p(e):-1!==e.indexOf("\\")&&(e=f(e)),e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase()}function f(e){let t=e.split("\\");return t[t.length-1]}function m(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}function v(e){var t;for(var n in t=-1!==e.indexOf("_")?e.split("_"):e.split(/(?=[A-Z])/))t[n]=m(t[n]);return t.join(" ")}var g=Object.freeze({requestData:u,fetchFile:c,getData:async function(e){return await u(e,{})},getFileContents:l,parseJson:function(e){return JSON5.parse(e)},getJsonFile:async function(e){let t=await l(e);return JSON5.parse(t)},getAssetsFile:async function(e){return await c(e,{type:"blob"})},isEmpty:h,isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"object"==typeof e&&null!==e||"function"==typeof e},getFileStrFromUrl:p,getPathDirFromUrl:function(e){let t=p(e);return e.replace(t,"")},getFileStrFromDir:f,getPathDirFromDir:function(e){let t=f(e);return e.replace(t,"")},getFileName:function(e){return-1!==e.indexOf("/")?e=p(e):-1!==e.indexOf("\\")&&(e=f(e)),e.substring(0,e.lastIndexOf(".")).toLowerCase()},getFileExt:d,padNumber:function(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e},wait:function(e){return new Promise(t=>setTimeout(t,e))},genUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},capFirst:m,beautifyString:v,getLang:function(e,t){try{return void 0===e()[t]?v(t):e()[t]}catch(e){return v(t)}}});const y="APPLOADER: ";class x{constructor(e){this.userData=e,this.appConfig,this.appLibraries,this.appLang}async check(){return this.awaitConfigs=[this.appConfig=this.checkAppConfig(),this.appLibraries=this.checkAppLibraries(),this.appLang=this.checkAppLang()],Promise.all(this.awaitConfigs).then(e=>!0===e[0]&&!0===e[1]&&!0===e[2]?(console.log(y+"USERDATA CHECKED"),this.userData):(console.log(y+"USERDATA LOADED"),this.userData))}async checkAppConfig(){let e;if(SFE.isEmpty(this.userData.APPID)||SFE.isEmpty(this.userData.APPMODE)||SFE.isEmpty(this.userData.INFO)){const t=this.userData.paths.appPath+"configs/appconfig.json5";let n=e=await SFE.getJsonFile(t);n.appMode="start",n.lang=this.userData.lang,n.isMobile=!1,n.useCache=!0,this.userData.info=n}else e=!0;return e}async checkAppLibraries(){let e;if(SFE.isEmpty(this.userData.libs)){const t=this.userData.paths.appPath+"configs/applibraries.json5";e=await SFE.getJsonFile(t),this.userData.libs=e}else e=!0;return e}async checkAppLang(){let e;if(SFE.isEmpty(this.userData.langs)){const t=this.userData.paths.appPath+"configs/lang/"+this.userData.info.lang+".json5";e=await SFE.getJsonFile(t),this.userData.langs=e}else e=!0;return e}}const b="APPLOADER: ";class w{constructor(e){if(!0===window.USERDATA.libs.Loaded)return!0;this.basePath=e.paths.appPath,this.libraries=e.libs,this.fonts=this.libraries.fonts,this.styles=this.libraries.styles,this.scripts=this.libraries.scripts,this.modules=this.libraries.modules,this.lodedFont,this.lodedStyle,this.lodedScript;let t={};for(var n=document.fonts.values(),i=0;i<document.fonts.size;i++){var r=n.next().value;t[r.family]=r.loaded}this.lodedFont=t;var a={};for(var o in document.styleSheets){var s=document.styleSheets[o].href;if(void 0!==s)a[SFE.getFileStrFromUrl(s)]=s}this.lodedStyle=a;var u={};for(var o in document.scripts){var c=document.scripts[o].src;if(void 0!==c)u[SFE.getFileStrFromUrl(c)]=c}this.lodedScript=u}async load(){var e=0;let t=[];if(!SFE.isEmpty(this.fonts))for(var n in this.fonts)this.checkFont(this.fonts[n]),e++;if(!SFE.isEmpty(this.styles))for(var n in this.styles)this.checkStyle(this.styles[n]);if(!SFE.isEmpty(this.scripts))for(var n in this.scripts)this.checkScript(this.scripts[n]);if(!SFE.isEmpty(this.modules))for(var n in this.modules)t[e]=this.checkModule(this.modules[n]),e++;return Promise.all(t).then(function(){window.USERDATA.libs.Loaded=!0,console.log(b+"LIBRARY LOADED")})}checkFont(e){SFE.getFileStrFromUrl(e.src);void 0===this.lodedFont[e.fontFamily]&&this.injectCSS(e.css)}checkStyle(e){let t=SFE.getFileStrFromUrl(e);void 0===this.lodedStyle[t]&&this.injectCSS(e)}checkScript(e){let t=SFE.getFileStrFromUrl(e);void 0===this.lodedScript[t]&&this.injectScript(e)}async checkModule(e){let t=this;if(void 0===(n=e.id,SFE.isArray(n)?void 0!==window[n[0]]?window[n[0]][n[1]]:void 0:window[n]))return async function(e,t){t.src;t.roader;return e.loadModule(e.basePath,t)}(t,e);var n;void 0!==e.src||e.roader}injectCSS(e){let t=document.querySelector("head"),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=this.basePath+e,t.insertBefore(n,t.lastChild.nextSibling)}injectScript(e){let t=document.querySelector("head"),n=document.createElement("script");n.type="text/javascript",n.src=this.basePath+e,t.insertBefore(n,t.lastChild.nextSibling)}async loadModule(e,t){let n,i=function(e){return SystemJS.import(e)};return"inject"===t.type?this.injectScript(t.src):"ES5"===t.type&&(i=function(e){return SystemJS.import(e)}),"ES5"!==t.type&&"ES6"!==t.type||(void 0!==t.src?(n=i(e+t.src),!0===t.register&&n.then(function(e){return function(e,t){let n={};SFE.isArray(e)?(window[e[0]][e[1]]=n,Object.assign(n,t)):(window[e]=n,Object.assign(n,t))}(t.id,e)}),void 0!==t.roader&&n.then(function(){return i(e+t.roader)})):void 0!==t.roader&&(n=i(e+t.roader))),n}}const E="AppLoader: ";window.JSON5=i,window.Cookies=r,window.Vue=o,void 0===window.SFE&&(window.SFE={}),Object.assign(SFE,g),SFE.DataTransporter=class{constructor(){}async getSessionData(){try{const e=await SFE.getData("/xhr.php?call=getSessionData");return SFE.parseJson(e)}catch(e){throw Error(e)}}readyServerEvent(){let e=new EventSource("/sse.php");e.onopen=function(){console.log("SSE:","READY")},e.onerror=function(){console.log("SSE:","ERROR")},e.addEventListener("message",function(e){let t=SFE.parseJson(e.data);console.log("SSE:",t.log)}),e.addEventListener("session",function(e){let t=SFE.parseJson(e.data);console.log("SSE:",t.log)})}},SFE.VueSiteModeler=class{constructor(e){this.SFEData=e,this.SiteData={},this.VueSite={}}async makeSite(){return await this.defineSiteData(),this.makeVueSite(),this.VueSite}async defineSiteData(){var e=this.SFEData,t=this.SFEData.paths.appPath+this.SFEData.conf.appHtml,n=await SFE.getFileContents(t);this.SiteData={appId:e.info.appId,appName:e.info.appName,appTitle:e.info.title,appMode:e.info.appMode,appVersion:e.info.appVersion,appUrl:("on"==e.server.HTTPS?"https://":"http://")+e.server.HTTP_HOST+"/"+e.info.appId,appIcon:e.paths.icons+e.libs.icons["favicon-16x16"],homepage:e.conf.homepage,appTemplate:n,appInfo:{target:"",status:""},siteName:e.conf.siteName,siteOwner:e.conf.siteOwner}}makeVueSite(){const e=this.SFEData.langs;Vue.component("sfe-site-title",{props:["data"],template:'\n                <div id="apptitle" class="navbar top">\n                    <app-logo :appicon="data.appIcon"></app-logo>\n                    <app-menu></app-menu>\n                    <app-title \n                        :url="data.appUrl"\n                        :sitename="data.siteName"\n                        :title="data.appTitle"\n                        :info="data.appInfo"\n                    ></app-title>\n                    <app-user></app-user>\n                </div>\n            ',components:{"app-logo":{props:["appicon"],template:'<i class="BI iconSS"></i>'},"app-menu":{template:'\n                        <div class="menu">\n                            <div class="item">{{ text.file }}</div>\n                            <div class="item">{{ text.sequence }}</div>\n                            <div class="item">{{ text.scene }}</div>\n                            <div class="item">{{ text.view }}</div>\n                        </div>\n                    ',computed:{text:function(){return{file:SFE.getLang(()=>e,"file"),sequence:SFE.getLang(()=>e,"sequence"),scene:SFE.getLang(()=>e,"scene"),view:SFE.getLang(()=>e,"view")}}}},"app-title":{props:["url","sitename","title","info"],template:'\n                        <div class="title">\n                            <a v-bind:href="url">\n                                {{ titles }}\n                            </a>\n                        </div>\n                    ',computed:{titles:function(){this.sitename,this.title,this.info.target;var e=this.sitename+" : "+this.title;document.querySelector("title").text=e;var t=this.title;return this.info.target&&(t=this.title+" : "+this.info.target),t}}},"app-user":{template:'<div class="user"><i class="xi xi-user"></i></div>'}}}),Vue.component("sfe-site-footer",{props:["data"],template:'\n                <div id="appfooter" class="navbar bottom">\n                    <app-status\n                        :info="data.appInfo"\n                    ></app-status>\n                    <app-version\n                        :homepage="data.homepage"\n                        :siteowner="data.siteOwner"\n                        :appname="data.appName"\n                        :version="data.appVersion"\n                    ></app-version>\n                </div>\n            ',components:{"app-status":{props:["info"],template:'\n                        <div class="status">\n                            <i class="xi xi-info-o"></i>\n                            {{ info.status }}\n                        </div>\n                    '},"app-version":{props:["homepage","siteowner","appname","version"],template:'\n                        <div class="version">\n                            <i class="xi xi-twitter text-twitter"></i>\n                            <a v-bind:href="homepage">\n                            \x3c!-- {{ appname }} {{ version }} --\x3e\n                            {{ siteowner }}\n                            </a>\n                        </div>\n                    '}}}),Vue.component("sfe-site-main",{props:["data"],template:'\n                <div id="appmain" class="contents" \n                    :class="data.appId"\n                    v-html="data.appTemplate"\n                >\n                </div>\n            '}),this.VueSite=new Vue({el:"#appbody",data:{SiteData:this.SiteData}})}},SFE.ConfigLoader=x,SFE.LibraryLoader=w,SFE.AppLoader=class{constructor(e=null){if(!e||SFE.isEmpty(e))throw Error(E+"USERDATA REQUIRED");this.userData=e,SFE.isEmpty(window.USERDATA)?window.USERDATA=this.userData:this.userData=e}async checkUserData(){var e=new x(this.userData);this.userData=await e.check()}async loadLibrary(){var e=new w(this.userData);return await e.load()}startApp(e=null){e||(SFE.isEmpty(this.userData.info.startScript)?console.error("STARTSCRIPT REQUIRED"):e=this.userData.info.startScript);var t=document.createElement("script");t.id="scriptStartApp",t.type="module",t.src=this.userData.paths.appPath+e;var n=document.querySelector("head");n.insertBefore(t,n.lastChild.nextSibling),console.log(E+"START")}};var _=Object.freeze({});class M{constructor(e){void 0===window.TASKS&&(window.TASKS={}),window.TASKS[e.name]=this,this.taskList={},this.basePath=e.basePath,this.onTaskRun,this.onTasking,this.onTaskEnd}make(e){var t=SFE.genUUID();return this.taskList[t]=new S(this.basePath+e,this),this.taskList[t].uuid=t,this.taskList[t]}delete(e){}}class S{constructor(e,t){this.name="",-1!==e.indexOf("/")?this.name=SFE.getFileStrFromUrl(e):-1!==e.indexOf("\\")?this.name=SFE.getFileStrFromDir(e):this.name=e,this.queue={},this.num=0,this.thread=new Worker(e);var n=this;this.thread.onmessage=function(e){var t=e.data.taskId,i=(e.data.name,e.data.value);n.queue[t].resolve(i),delete n.queue[t]},this.onTaskRun,this.onTasking,this.onTaskEnd}post(e,t){var n=e+"-"+this.num++,i={taskId:n,name:e,value:t};this.thread.postMessage(i);var r={};return this.queue[n]=new Promise((e,t)=>{r.resolve=e,r.reject=t}),this.queue[n].resolve=r.resolve,this.queue[n].reject=r.reject,this.queue[n]}}const A="AssetsManager: ";async function D(e,t=null,n=!1){try{var i,r=!1;t&&t.file===e.file&&(r=!0);var a=new XMLHttpRequest;a.open("GET",e.file,!0),a.responseType="arraybuffer",!0===n&&a.setRequestHeader("Cache-Control","no-cache"),a.send(),e.status="READY";var o=!1,s=0;await new Promise(n=>{a.onreadystatechange=async function(u){if(this.readyState==this.HEADERS_RECEIVED){if(a.lengthComputable)o=!0,s=a.total;else if((s=Number(a.getResponseHeader("content-length")))>0){o=!0;a.getResponseHeader("content-encoding")}e.modified=Date.parse(a.getResponseHeader("Last-Modified"))/1e3,!0===r&&e.modified===t.modified?async function(n){console.log(A+"USE CACHED:",e.name),n.abort(),e.cacheUsed=!0,i=t.data,e.size=t.size,e.loaded=t.size,e.progress=100,e.status="USE CACHED","function"==typeof e.onProgress&&e.onProgress()}(a):await async function(t){console.log("REDOWNLOAD",e.name),e.cacheUsed=!1;var n=0;t.onprogress=function(t){if(e.status="DOWNLOADING",n=t.loaded,!0===o){e.size=s,e.loaded=n;var i=Math.round(n/s*100);i>=100&&(i=100,e.status="LOADING"),e.progress=i}else e.loaded=n,e.progress=100;"function"==typeof e.onProgress&&e.onProgress()},i=await new Promise((n,i)=>{t.onload=function(r){200==t.status?(e.size=r.loaded,n(t.response)):i(Error(t.statusText))}})}(a),setTimeout(function(){!async function(){e.buffer=i,e.progress=100,e.status="DONE","function"==typeof e.onProgress&&e.onProgress()}(),n()},0)}}})}catch(t){throw e.status="ERROR","function"==typeof e.onError&&e.onError(),Error(t)}return e}void 0===window.SFE&&(window.SFE={}),SFE.LoadingManager=class{constructor(){Vue.directive("ready",{}),this.loading=!0,this.queue=[],this.status="ready",this.models={},this.textures={},this.progress={initialize:0,load_model:0,load_texture:0,make_assets:0},this.onStart,this.onFinish,this.onChange,this.onError,this.loadingCircle={},void 0===window.VIEWMODEL&&(window.VIEWMODEL={})}reset(){this.queue=[],this.status="ready",this.models={},this.textures={},this.progress={initialize:0,load_model:0,load_texture:0,make_assets:0},this.onStart=null,this.onChange=null,this.onFinish=null,this.onError=null}start(){var e;this.reset(),this.status="initialize",e=this,Vue.component("v3d-progress",{props:["data"],template:'\n            <div v-if="data.loading" id="ui_loader" :class="classes">\n                <div class="info">\n                <span class="persent">{{ progress }}</span>\n                <span class="status">{{ status }}</span>\n                </div>\n                <svg class="loadingcircle" :height="radius*2" :width="radius*2">\n                    \x3c!--\n                        <circle class="backcircle" fill="transparent" \n                            :stroke-width="stroke" \n                            :r="normalizedRadius" \n                            :cx="radius" :cy="radius" \n                        />\n                    --\x3e\n                    <circle class="frontcircle initialize" fill="transparent" \n                        v-if="data.progress.initialize > 0"\n                        :stroke-dasharray="dasharray" \n                        :style="{ strokeDashoffset: progresses.initialize }" \n                        :stroke-width="stroke" \n                        :r="normalizedRadius" \n                        :cx="radius" :cy="radius" \n                    />\n                    <circle class="frontcircle load_model" fill="transparent"\n                        v-if="data.progress.load_model > 0"\n                        :stroke-dasharray="dasharray" \n                        :style="{ strokeDashoffset: progresses.load_model }" \n                        :stroke-width="stroke" \n                        :r="normalizedRadius" \n                        :cx="radius" :cy="radius" \n                    />\n                    <circle class="frontcircle load_texture" fill="transparent" \n                        v-if="data.progress.load_texture > 0"\n                        :stroke-dasharray="dasharray" \n                        :style="{ strokeDashoffset: progresses.load_texture }" \n                        :stroke-width="stroke" \n                        :r="normalizedRadius" \n                        :cx="radius" :cy="radius" \n                    />\n                    <circle class="frontcircle make_assets" fill="transparent" \n                        v-if="data.progress.make_assets > 0"\n                        :stroke-dasharray="dasharray" \n                        :style="{ strokeDashoffset: progresses.make_assets }" \n                        :stroke-width="stroke" \n                        :r="normalizedRadius" \n                        :cx="radius" :cy="radius" \n                    />\n                </svg>\n            </div>\n        ',data:function(){const e=104*Math.PI;return{radius:60,stroke:4,dasharray:e+" "+e,normalizedRadius:52,circumference:e}},computed:{progress:function(){return this.data.progress[this.data.status]+"%"},status:function(){return this.data.status.replace(/_/g," ").toUpperCase()},classes:function(){return[this.data.status,{loading:this.data.loading}]},progresses:function(){return{initialize:this.circumference-this.data.progress.initialize/100*this.circumference,load_model:this.circumference-this.data.progress.load_model/100*this.circumference,load_texture:this.circumference-this.data.progress.load_texture/100*this.circumference,make_assets:this.circumference-this.data.progress.make_assets/100*this.circumference}}}}),Vue.component("v3d-loader",{props:["data"],template:['<div v-if="data.loading" id="ui_loader" class="blue" :class="{ loading:data.loading }">','<div class="progress">{{ progress }}</div>',"</div>"].join("\n"),computed:{progress:function(){const e=this.data.progress;return padNumber(e,2)+"%"}}}),e.loadingCircle=new Vue({el:"#v3d_splash",data:{loader:e}}),void 0===window.VIEWMODEL.appLoader&&(window.VIEWMODEL.VueLoader=this.loadingCircle),"function"==typeof this.onStart&&this.onStart()}changeFileProgress(e){var t,n;if("model"===e.type?(t=this.models,n="load_model"):"texture"===e.type&&(t=this.textures,n="load_texture"),n!==this.status)return!1;void 0===t[e.name]&&(t[e.name]={}),t[e.name].size=e.size,t[e.name].loaded=e.loaded;var i=0,r=0;for(var a in t)i+=t[a].size,r+=t[a].loaded;var o=Math.round(r/i*100);o>=100&&(o=100),o<this.progress[n]&&(o=this.progress[n]),o!==this.progress[n]&&(this.progress[n]=o,this.changeStatus())}async changeStatus(e=null){e?"finish"===e?this.finish():this.status=e:("initialize"===this.status&&this.progress.initialize>=100&&(await SFE.wait(350),this.status="load_model"),"load_model"===this.status&&this.progress.load_model>=100&&(await SFE.wait(350),this.status="load_texture"),"load_texture"===this.status&&this.progress.load_texture>=100&&(await SFE.wait(350),this.status="make_assets"),"make_assets"===this.status&&this.progress.make_assets>=100&&this.finish()),"function"==typeof this.onProgress&&this.onChange()}error(){"function"==typeof this.onError&&this.onError()}async finish(){await SFE.wait(500),this.loading=!1,"function"==typeof this.onFinish&&this.onFinish(),this.reset()}},SFE.TaskManager=M,SFE.AssetsManager=class{constructor(e){this.assetsPaths=e.options.global.assetsPaths,this.models={},this.meshes={},this.textures={},this.materials={},this.animations={},this.lights={},this.cameras={},this.helpers={},this.Loader=e.Loader,this.Tasks=new M({name:"AssetsManager",basePath:"/engine/src/"}),this.FBXParser=this.Tasks.make("workers/FBXLoader.custom.worker.js"),"0.0.1"===USERDATA.info.version&&localforage.dropInstance({name:"localforage"}),this.makeDefaultAssets()}makeDefaultAssets(){this.makeTexture("dummy.png").load()}makeModel(e,t=null,n=""){const i=this;return this.models[e]={name:e,file:this.assetsPaths.models+n+e,type:"model",category:t,mimeType:null,cacheUsed:!1,embed:null,modified:0,size:0,loaded:0,progress:0,status:"NONE",data:null,buffer:null,load:async function(e){return await async function(e,t,n=!1){if(console.log(A+"LOAD:",e.name),"function"==typeof e.onStart&&e.onStart(),!e.mimeType){const t=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase();"fbx"===t?e.mimeType="application/fbx":console.error(A+"MODEL LOAD ERROR: "+e.name)}if(!1===n)var i=await t.getCache(e);else var i=null;!1===(e=await D(e,i,n)).cacheUsed&&(e.buffer=await t.FBXParser.post("parse",e.buffer));var r=new THREE.FBXTreeParser.Custom(e,t).parse(e.buffer);return!1===e.cacheUsed&&t.setCache(e),e.buffer=null,delete e.buffer,r.name=e.name,e.data=r,"function"==typeof e.onLoad&&e.onLoad(),e.data}(this,i,e)},onStart:null,onLoad:null,onProgress:null,onError:null},this.models[e]}makeTexture(e,t=null,n=""){const i=this;return this.textures[e]={name:e,file:this.assetsPaths.textures+n+e,type:"texture",category:t,mimeType:null,cacheUsed:!1,embedded:null,modified:0,size:0,loaded:0,width:0,height:0,progress:0,status:"NONE",data:null,buffer:null,load:async function(e){return await async function(e,t,n=!1){if("function"==typeof e.onStart&&e.onStart(),!e.mimeType){var i=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase();"bmp"===i?e.mimeType="image/bmp":"jpg"===i||"jpeg"===i?e.mimeType="image/jpeg":"png"===i?e.mimeType="image/png":"tif"===i?e.mimeType="image/tiff":"tga"===i?e.mimeType="image/tga":"svg"===i?e.mimeType="image/svg+xml":console.error(A+"TEXTURE LOAD ERROR: "+e.name)}setTimeout(function(){!async function(e,t,n=!1){var i;if(!1===n)var r=await t.getCache(e);else var r=null;try{if(e.embedded&&e.buffer?(r&&!0===t.models[e.embedded].cacheUsed?(i=r.data,e.cacheUsed=!0):i=e.buffer,i instanceof ArrayBuffer?e.size=i.byteLength:e.size=i.size,e.modified=t.models[e.embedded].modified):(e=await D(e,r,n),i=e.buffer),"image/tga"===e.mimeType){var a=new THREE.TGALoader;e.data.image=a.parse(i),e.data.needsUpdate=!0}else if("image/svg+xml"===e.mimeType){var o=new Image;o.crossorigin="anonymous",o.src=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:e.mimeType})),o.width=1024,o.height=1024,e.data.image=o,o.onload=(()=>{e.data.needsUpdate=!0})}else{var o=new Image;o.crossorigin="anonymous",o.src=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:e.mimeType})),e.data.image=o,o.src.search(/\.jpe?g$/i)>0||0===o.src.search(/^data\:image\/jpeg/)?e.data.format=THREE.RGBFormat:e.data.format=THREE.RGBAFormat,o.onload=(()=>{e.data.needsUpdate=!0})}!1===e.cacheUsed&&t.setCache(e),e.buffer=null,delete e.buffer}catch(e){throw Error(e)}"function"==typeof e.onLoad&&e.onLoad()}(e,t,n)},10);var r=new THREE.Texture;return e.data=r,"dummy.png"!==e.name&&(e.data.image=t.textures["dummy.png"].data.image,e.data.needsUpdate=!0),e.data}(this,i,e)},onStart:null,onLoad:null,onProgress:null,onError:null},this.textures[e]}async getCache(e){return null}async setCache(e){return!1}},SFE.ComponentsMaker=class{constructor(){}PerspectiveCamera(e,t){var n=new THREE.PerspectiveCamera(e.fov,t.clientWidth/t.clientHeight,e.near,e.far);return n.name="PerspectiveCamera",n.position.fromArray(e.position),n.options=e,n.targets={},n.targets.focused="free",n.targets.free=(new THREE.Vector3).fromArray(e.target),n.lookAt(n.targets.free),n.update=function(){const e=this.options;if(void 0!==this.orbit){const t=100,n=300,i=this.orbit.distance;if("free"!==this.targets.focused){const r=e.focusOffset[0],a=e.focusOffset[1],o=e.focusOffset[2];let s=0;i>=n?s=0:i<=t?s=1:(s=1-(i-t)/(n-t),s*=s),this.orbit.offset.x=r*s,this.orbit.offset.y=a*s,this.orbit.offset.z=o*s}}},n}OrbitControls(e,t){var n=new THREE.OrbitControls(e,t.container);return n.target=e.targets.free,n.rotateSpeed=t.rotateSpeed,n.panSpeed=t.panSpeed,n.zoomSpeed=t.zoomSpeed,n.screenSpacePanning=t.screenSpacePanning,n.enableDamping=t.enableDamping,n.dampingFactor=t.dampingFactor,n.minDistance=0,e.orbit={},e.orbit=new Proxy({distance:0,angle:0,position:e.position,targets:e.targets,offset:new THREE.Vector3(0,0,0)},{get:function(e,t){if(t in e){if("distance"===t){const t=e;return t.position.distanceTo(t.targets[t.targets.focused])}return e[t]}},set:function(e,t,n){return"distance"===t||(e[t]=n,!0)}}),n.update(),n}Scene(e=null){var t=new THREE.Scene;return e&&(t.background=new THREE.Color(e.background),t.fog=new THREE.Fog(e.fog[0],e.fog[1],e.fog[2])),t}DirectionalLight(e,t){var n=new THREE.Object3D,i=t.lightTarget.position;n.position.set(i[0],i[1],i[2]),e.add(n);var r=new THREE.DirectionalLight(t.color,t.intensity);r.target=n;var a=t.position;r.position.set(a[0],a[1],a[2]),r.castShadow=t.castShadow;var o=t.shadow,s=o.mapSize;r.shadow.mapSize.set(s,s),r.shadow.bias=o.bias,r.shadow.radius=o.radius;var u=o.camera;return r.shadow.camera.near=u.near,r.shadow.camera.far=u.far,r.shadow.camera.top=u.top,r.shadow.camera.bottom=u.bottom,r.shadow.camera.left=u.left,r.shadow.camera.right=u.right,e.add(r),e}AmbientLight(e,t){var n=new THREE.AmbientLight(t.color,t.intensity);return e.add(n),e}HemisphereLight(e,t){var n=new THREE.HemisphereLight(t.skyColor,t.groundColor,t.intensity),i=t.position;return n.position.set(i[0],i[1],i[2]),e.add(n),e}GroundMesh(e,t){if(!1===t.use)return e;let n=t.mesh;if(!0===n.use){let t=n.size,i=new THREE.Mesh(new THREE.PlaneBufferGeometry(t[0],t[1]),new THREE.MeshPhongMaterial({color:n.color,depthWrite:n.depthWrite}));i.rotation.x=-Math.PI/2,i.receiveShadow=n.receiveShadow,e.add(i)}let i=t.grid;if(!0===i.use){let t=new THREE.GridHelper(i.size,i.divisions,i.colorCenterLine,i.colorGrid);t.material.opacity=i.opacity,t.material.transparent=i.transparent,e.add(t)}return e}WebGLRenderer(e,t){var n=t.getContext("webgl2",{antialias:!0,powerPreference:"high-performance"}),i=new THREE.WebGLRenderer({canvas:t,context:n,antialias:e.antialias,alpha:!0});return i.setPixelRatio(1),i.setSize(t.clientWidth,t.clientHeight,!1),i.autoClear=!0,i.gammaInput=e.gammaInput,i.gammaOutput=e.gammaOutput,i.shadowMap.enabled=e.shadowMap.enabled,i.shadowMap.type=THREE[e.shadowMap.type],i}};var T=Object.freeze({});const C="SFEPlayer: ";class F{async getDefault(){const e=USERDATA.paths.appPath+USERDATA.info.defaultConfig;try{const t=await SFE.getFileContents(e);if(!1===t)throw Error(C+"CONFIG ERROR");return SFE.parseJson(t)}catch(e){throw Error(e)}}async getConfig(e){const t=USERDATA.paths.appPath+e,n=SFE.getFileExt(t);"json"!==n&&"json5"!==n&&(console.error(C+"CONFIGFILE IS NOT JSON"),this.getDefault());try{const e=await SFE.getFileContents(t);return!1===e?this.getDefault():(console.log(C+"USERCONFIG LOADED"),SFE.parseJson(e))}catch(e){throw Error(e)}}getFromUrl(e){for(var t=location.search,n=t.substring(t.indexOf("?")+1).split("&"),i=0;i<n.length;i++){n[i]=n[i].split("=");var r=n[i][0],a=decodeURIComponent(n[i][1]);if(a&&"null"!=a&&"undefined"!=a)if("model"==r){var o={};Object.assign(o,e.defaultModel),o.name=a,e.models=[o]}else if("models"==r){var s=a.split(",");for(var r in e.models=[],s){o={};Object.assign(o,e.defaultModel),o.name=s[r],e.models.push(o)}}else if("camera_position"==r||"camera-position"==r){if(3!=(u=a.split(",")).length)continue;a=[Number(u[0]),Number(u[1]),Number(u[2])],e.camera.position=a}else if("camera_target"==r||"camera-target"==r){var u;if(3!=(u=a.split(",")).length)continue;a=[Number(u[0]),Number(u[1]),Number(u[2])],e.camera.target=a}else"autostart"==r?("true"==a||"1"==a?a=!0:"false"!=a&&"0"!=a||(a=!1),e.player.autoStart=a):"starttime"==r?(-1!==a.indexOf(":")&&(a=a.replace(/:/g,".")),e.player.startTime=Number(a)):"focustarget"==r?"center"!==a&&"root"!==a||(e.camera.focusTarget=a):"outline"==r&&("true"==a||"1"==a?a=!0:"false"!=a&&"0"!=a||(a=!1),e.effect.outline.enabled=a)}return e}assignNew(e,t,n=!0){var i={};for(var r in e)if(void 0===t[r])i[r]=e[r];else if(!0===n&&"models"===r){var a=e.defaultModel;if(SFE.isEmpty(t.models))i.models=[a];else for(var o in i.models=[],t.models){var s=this.assignNew(a,t.models[o],!1);i.models.push(s)}}else"object"==typeof e[r]?i[r]=this.assignNew(e[r],t[r],!1):i[r]=t[r];return i}}class L{constructor(){}ready(e,t,n){e.meshes={},e.materials={},e.bones={};const i={};if(e.traverse(function(r){if(r.isMesh){var a=r;if(e.meshes[a.name]=a,t.meshes[a.name]=a,a.castShadow=n.mesh.castShadow,a.receiveShadow=n.mesh.receiveShadow,a.frustumCulled=n.mesh.frustumCulled,a.materialSlots={},SFE.isArray(a.material))for(var o in a.material){var s=a.material[o].name;a.material[o].fog=n.material.fog,i[s]=a.material[o],a.materialSlots[o]=s,void 0===t.materials[s]&&(t.materials[s]={}),t.materials[s].default=a.material[o]}else{s=a.material.name;a.material.fog=n.material.fog,i[s]=a.material,a.materialSlots=s,void 0===t.materials[s]&&(t.materials[s]={}),t.materials[s].default=a.material}}else if(r.isBone&&r.name!==r.parent.name){var u=r;e.bones[r.name]=u}}),e.materials=i,!SFE.isEmpty(e.bones))for(var r in e.children)("Group"===e.children[r].type&&!SFE.isEmpty(e.children[r].children)||"Bone"===e.children[r].type&&!SFE.isEmpty(e.children[r].children))&&"Bone"===e.children[r].children[0].type&&(e.bones.root=e.children[r]);return e}add(e,t,n){const i=e.materials;for(var r in i){var a=new THREE.MeshBasicMaterial;a.copy(i[r]),a.lights=!1,a.specularMap=null,a.envMap=null,a.emissiveMap=null,a.normalMap=null,t.materials[r].diffuse=a;var o=new THREE.MeshPhongMaterial;o.copy(i[r]),o.flatShading=!0,o.color=new THREE.Color(.8,.8,.8),o.side=0,o.opacity=1,o.transparent=!1,o.blending=1,o.map=null,o.specularMap=null,o.specular=new THREE.Color(0),o.envMap=null,o.reflectivity=0,o.shininess=0,o.emissive=new THREE.Color(0),o.emissiveIntensity=0,o.emissiveMap=null,o.normalMap=null,o.polygonOffset=!0,o.polygonOffsetFactor=1,o.polygonOffsetUnits=1,t.materials[r].flat=o,t.materials[r].edgedFace=o;var s=new THREE.MeshPhongMaterial;s.copy(o),s.wireframe=!0,s.color=new THREE.Color(0),s.opacity=.2,s.transparent=!0,t.materials[r].wireframe=s}const u={wireframes:"wireframe"};for(var c in u){const n=new THREE.Group;n.name=c,n.visible=!1;var l=u[c];for(var h in e.meshes){var p=e.meshes[h].clone();if(p.material=[],"SkinnedMesh"===p.type&&p.bind(e.meshes[h].skeleton,e.meshes[h].matrix),p.morphTargetDictionary=e.meshes[h].morphTargetDictionary,p.morphTargetInfluences=e.meshes[h].morphTargetInfluences,p.materialSlots=e.meshes[h].materialSlots,"wireframes"!==c&&"outlines"!==c||(p.castShadow=!1,p.receiveShadow=!1),SFE.isObject(p.materialSlots))for(var d in p.materialSlots){r=p.materialSlots[d];p.material.push(t.materials[r][l])}else{r=p.materialSlots;p.material=t.materials[r][l]}n.add(p)}e[c]=n,e.add(n)}return e}}const R="SFEPlayer: ";class P{constructor(e){Vue.directive("ready",{}),this.Viewer3D=e,this.V3Doptions=this.Viewer3D.options,this.V3Dcontrols=this.Viewer3D.controls,this.V3Dcamera=this.Viewer3D.camera,this.V3Dmodel,this.V3Danimation,this.V3Dmixer,this.V3Daction,this.Viewer,this.VueUI,this.VueData}makeVueUI(){let e=this.V3Doptions.ui.elementId;return SFE.isEmpty(e)?(console.error(R+"VueUI:","ELEMENTID REQUIRED"),!1):("#"!==e.substring(0,1)&&(e="#"+e),document.querySelector(e)?(this.defineVueData(),this.makeVueComponents(),this.VueUI=new Vue({el:"#viewer3d_ui",data:this.VueData,methods:{touch:function(e){SFE.isEmpty(this.ui.events)||"function"!=typeof this.ui.events.touch||this.ui.events.touch(e)},mouseInput:function(e){SFE.isEmpty(this.ui.events)||"function"!=typeof this.ui.events.mouseInput||this.ui.events.mouseInput(e)}}}),this.VueUI):(console.error(R+"VueUI:","UI CONTAINER NOT EXIST"),!1))}defineVueData(){const e=this.Viewer3D,t=this.Viewer3D.VueCanvas,n=this.V3Doptions,i=n.global,r=n.models,a=n.ui,o=a.stats;let s={};for(var u in o.data)!0===o.data[u]&&(s[u]=null);this.VueData={canvas:t.data,ui:{name:"ui",use:!0,display:a.display,ready:!1,events:{}},overlay:{name:"overlay",use:!0,display:!0,color:"black",dimming:!0,events:{}},message:{name:"message",use:!0,display:!0,class:"info",value:"",icon:"xi-info-o",events:{}},info:{name:"info",use:!0,display:!0,title:i.title,model:r[0].name,description:i.description,author:i.author,icon:"xi-info-o",events:{}},stats:{name:"stats",use:o.use,display:!0,title:"WebGL",lists:s,events:{}},share:{name:"share",use:!0,display:!0,linkUrl:"linkUrl",events:{},download:{name:"download",icon:"xi-download",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},screenshot:{name:"screenshot",icon:"xi-image-o",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},link:{name:"link",icon:"xi-link",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}},menu:{name:"",icon:"",type:"window",show:!1,active:!1,deactive:!1,popup:!1,events:{}}},share:{name:"share",icon:"xi-share-alt",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}}},camera:{name:"camera",use:!0,display:!0,mode:"free",focused:"free",events:{},rotate:{name:"rotate",icon:"xi-renew",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},pan:{name:"pan",icon:"xi-arrows",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},zoom:{name:"zoom",icon:"xi-zoom-in",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},focus:{name:"focus",icon:"xi-focus-frame",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},reset:{name:"reset",icon:"xi-close-circle-o",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}}},player:{name:"player",use:!1,display:!0,paused:!0,reverse:!1,loopMode:n.player.loopMode,playMode:"time",onStepPlay:!1,duration:0,time:0,timeDuration:0,timeScale:1,timeProgress:0,frame:0,frameTime:0,frameRate:0,frameCount:0,frameLength:0,events:{},play:{name:"play",icon:"xi-play",button:{name:"",icon:"",active:!0,deactive:!1,popup:!1,events:{click:{}}}},forward:{name:"forward",icon:"xi-step-forward",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},backward:{name:"backward",icon:"xi-step-backward",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},repeat:{name:"repeat",icon:"xi-repeat",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},tune:{name:"tune",icon:"xi-tune",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}},menu:{name:"",icon:"",type:"window",show:!1,active:!1,deactive:!1,popup:!1,events:{}}},timeline:{name:"timeline",icon:"xi-time-o xi-flip-horizontal",menu:{name:"",icon:"",type:"slide",orient:"horizontal",show:!0,active:!1,deactive:!1,popup:!1,events:{}}},counter:{name:"counter",icon:"xi-time-o xi-flip-horizontal",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}}},setting:{name:"setting",use:!0,display:!0,events:{},blur:t.data.blur,fitScreen:t.data.fitScreen,aspectRatio:t.data.aspectRatio,screenWidth:e.container.clientWidth,screenHeight:e.container.clientHeight,renderingWidth:t.data.width,renderingHeight:t.data.height,fov:n.camera.fov,pixelRatio:1,shadingMode:"default",outlineEnabled:n.effect.outline.enabled,gammaFactor:2,gammaInput:!0,gammaOutput:!0,shadowMapEnabled:!0,shadowMapType:"PCFSoftShadowMap",shadowMapSize:n.light.directionalLight.shadow.mapSize,textureFilter:!0,textureMipMap:!0,anisotropicFilter:1,help:{name:"help",icon:"xi-help-o",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}},display:{name:"display",icon:"xi-desktop",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}},menu:{name:"",icon:"",type:"window",show:!1,active:!1,deactive:!1,popup:{pixelRatio:!1,fieldOfView:!1},events:{}}},rendering:{name:"rendering",icon:"xi-library-books-o",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}},menu:{name:"",icon:"",type:"window",show:!1,active:!1,deactive:!1,popup:!1,events:{}}},setting:{name:"setting",icon:"xi-cog",button:{name:"",icon:"",active:!1,deactive:!1,popup:!1,events:{click:{}}}}}}}makeVueComponents(){const e=this.Viewer3D,t=this.VueData,n=(this.V3Doptions,new Date),i=USERDATA.langs[USERDATA.info.appId],r={click:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.click||this.data.events.click(e,this.data)},hover:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.hover||this.data.events.hover(e,this.data)},touch:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.touch||this.data.events.touch(e)},input:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.input||this.data.events.input(e,this.data)},mouseInput:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.mouseInput||this.data.events.mouseInput(e,this.data)},change:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.change||this.data.events.change(e,this.data)},transition:function(e){SFE.isEmpty(this.data.events)||"function"!=typeof this.data.events.transition||this.data.events.transition(e,this.data)}},a=this.getPositionClasses;Vue.component("v3d-overlay",{props:["data","message"],template:'\n                <div id="ui_overlay">\n                    <v3d-message :data="message"></v3d-message>\n                    <div class="dimming" :class="classes" \n                    v-on:transitionend="transition"></div>\n                </div>\n            ',computed:{classes:function(){return[this.data.color,{show:this.data.dimming}]}},methods:{transition:r.transition}}),Vue.component("v3d-message",{props:["data"],template:'\n                <div v-if="data.value" id="ui_message" class="info"\n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <div class="msg" :class="data.class">\n                        <i :class="icon"></i>{{ data.value }}\n                    </div>\n                </div>\n            ',computed:{icon:function(){return"xi "+this.data.icon}},methods:{hover:r.hover}}),Vue.component("v3d-menu-slide",{props:["data"],template:'\n                <div v-if="data" class="menu" :class="classes">\n                    <div class="line">\n                        <input :name="data.name" type="range" class="pointer" orient="vertical" \n                        v-on:input="input"\n                        step="0.1" min="0.1" max="1" :value="1">\n                    </div>\n                </div>\n            ',computed:{classes:function(){return[this.data.type,this.data.orient,{show:this.data.show}]}},methods:{input:r.input}}),Vue.component("v3d-popup-title",{props:["data","text","offset"],template:'\n                <div class="popup" :class="show" :style="offsets">\n                    {{ text }}\n                </div>\n            ',computed:{show:function(){return void 0===this.$parent.data.menu?this.data?"show":null:!0!==this.$parent.data.menu.show?this.data?"show":null:void 0},offsets:function(){if(void 0!==this.offset)return"left:"+this.offset+"px"}}}),Vue.component("v3d-button",{props:["name","icon","data","menu"],template:'\n                <div :id="id" class="button">\n                <button type="button" :class="classes" \n                    v-on:click="click"\n                    v-on:mouseover="hover"\n                    v-on:mouseout="hover"\n                    v-on:mousedown="mouseInput"\n                >\n                <i :class="icons"></i>\n                </button>\n                <v3d-popup-title :data="data.popup" :text="title"></v3d-popup-title>\n                <v3d-menu-slide v-if="data.menu && data.menu.type===\'slide\'" :data="data.menu"></v3d-menu-slide>\n                </div>\n            ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),void 0!==this.menu&&(this.data.menu=this.menu),"button_"+this.data.name},icons:function(){return"xi "+this.data.icon},title:function(){const e=this.$parent.data.name,t=this.data.name;return SFE.getLang(()=>i[e],t)},classes:function(){return[this.data.name,{active:this.data.active,deactive:this.data.deactive||SFE.isEmpty(this.data.events.click)}]}},methods:{click:r.click,hover:r.hover,mouseInput:r.mouseInput}}),Vue.component("v3d-stats",{props:["data"],template:'\n                <div v-if="data.use" id="ui_stats" class="info" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <div class="title">{{ data.title }}</div>\n                    <v3d-statslist \n                        v-for="(value, key) in data.lists" \n                        :key="key" :value="value"\n                    >\n                    </v3d-statslist>\n                </div>\n            ',components:{"v3d-statslist":{props:["value"],template:'\n                        <div class="list">\n                            <span class="label">{{ this.$vnode.key }}: </span>\n                            <span class="value">{{ value }}</span>\n                        </div>\n                    '}},methods:{hover:r.hover}}),Vue.component("v3d-title",{props:["data"],template:'\n                <div id="ui_title" class="info" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    {{ title }}\n                </div>\n            ',computed:{title:function(){let e=this.data.title;return SFE.isEmpty(e)&&(e=this.data.model),void 0!==VIEWMODEL.VueSite&&(VIEWMODEL.VueSite.SiteData.appInfo.target=e),e}},methods:{hover:r.hover}}),Vue.component("v3d-description",{props:["data"],template:'\n                <div v-if="data.description" id="ui_info" class="info" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <i :class="icon"></i>\n                    {{ data.description }}\n                </div>\n            ',computed:{icon:function(){return"xi "+this.data.icon}},methods:{hover:r.hover}}),Vue.component("v3d-copyright",{props:["data"],template:'\n                <div v-if="data.author" id="ui_copyright" class="info" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    {{ copyright }}\n                </div>\n            ',computed:{copyright:function(){return["Copyright ©",n.getFullYear(),this.data.author].join(" ")}},methods:{hover:r.hover}}),Vue.component("v3d-camera",{props:["data"],template:'\n                <div v-if="data.use" id="ui_camera" class="tools" :class="classes" \n                    :focused="focused"\n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <v3d-button :name="data.rotate.name" :icon="data.rotate.icon" :data="data.rotate.button"></v3d-button>\n                    <v3d-button :name="data.pan.name" :icon="data.pan.icon" :data="data.pan.button"></v3d-button>\n                    <v3d-button :name="data.zoom.name" :icon="data.zoom.icon" :data="data.zoom.button"></v3d-button>\n                    <v3d-button :name="data.focus.name" :icon="data.focus.icon" :data="data.focus.button"></v3d-button>\n                    <v3d-button :name="data.reset.name" :icon="data.reset.icon" :data="data.reset.button"></v3d-button>\n                </div>\n            ',data:function(){return{classes:a(this)}},computed:{focused:function(){return"free"===this.data.focused?(this.data.focus.name="freeCamera",this.data.focus.icon="xi-focus-frame"):"center"===this.data.focused?(this.data.focus.name="fixedCamera",this.data.focus.icon="xi-focus-center"):"root"===this.data.focused&&(this.data.focus.name="calibratedCamera",this.data.focus.icon="xi-focus-weak"),this.data.focused}},methods:{hover:r.hover}}),Vue.component("v3d-share",{props:["data"],template:'\n                <div v-if="data.use" id="ui_share" \n                    class="tools" :class="classes" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <v3d-button :name="data.download.name" :icon="data.download.icon" :data="data.download.button"></v3d-button>\n                    <v3d-button :name="data.screenshot.name" :icon="data.screenshot.icon" :data="data.screenshot.button"></v3d-button>\n                    <v3d-button :name="data.link.name" :icon="data.link.icon" :data="data.link.button" :menu="data.link.menu"></v3d-button>\n                    <v3d-button :name="data.share.name" :icon="data.share.icon" :data="data.share.button"></v3d-button>\n\n                    <v3d-menu-link :name="data.link.name" :icon="data.link.icon" :data="data.link.menu"></v3d-menu-link>\n                </div>\n            ',data:function(){return{classes:a(this)}},methods:{hover:r.hover}}),Vue.component("v3d-menu-link",{props:["name","icon","data"],template:'\n                <div :id="id" class="menu" :class="classes">\n                    <div class="header">\n                        <div class="ui row">\n                            <span class="title"><i :class="icons"></i>{{ text.title }}</span>\n                            <button name="closeMenu" class="icon small close" v-on:click="click"><i class="xi xi-close"></i></button>\n                        </div>\n                        <div v-if="text.info" class="info">{{ text.info }}</div>\n                    </div>\n                    \n                    <div class="items">\n                        <div class="ui row">\n                            <div class="item input">\n                                <label>\n                                    <span class="label">{{ text.autoStart }}</span>\n                                    <input type="checkbox" name="checkautoStart" id="checkautoStart"\n                                        v-on:change="change"\n                                    >\n                                </label>\n                            </div>\n                            <div class="item input">\n                                <label>\n                                    <span class="label">{{ text.startTime }}</span>\n                                    <input type="checkbox" name="checkStartTime" id="checkStartTime"\n                                        v-on:change="change"\n                                    >\n                                </label>\n                                <input id="startTime" type="text" :value="startTime" readonly disabled>\n                            </div>\n                        </div>\n                        <div class="item input">\n                            <input id="linkUrl" type="text" :value="url" readonly>\n                        </div>\n                        <div class="item buttons right">\n                            <button name="copyUrl" class="text" v-on:click="click">{{ text.copyUrl }}</button>\n                        </div>\n                    </div>\n                </div>\n            ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),void 0!==this.menu&&(this.data.menu=this.menu),"menu_"+this.data.name},icons:function(){return"xi "+this.data.icon},classes:function(){return[this.data.type,{show:this.data.show}]},text:function(){var e=this.$parent.data.name,t=this.data.name;return{title:SFE.getLang(()=>i[e],t),info:SFE.getLang(()=>i[e],t+"_info"),copyUrl:SFE.getLang(()=>i.share,"copyUrl"),autoStart:SFE.getLang(()=>i.player,"autoStart"),startTime:SFE.getLang(()=>i.player,"startTime")}},startTime:function(){return t.player.time},url:function(){return this.$parent.data.linkUrl}},methods:{click:r.click,change:r.change}}),Vue.component("v3d-animator",{props:["data"],template:'\n                <div v-if="data.use" id="ui_animator" \n                    class="tools" :class="classes" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <v3d-button :name="data.tune.name" :icon="data.tune.icon" :data="data.tune.button" :menu="data.tune.menu"></v3d-button>\n                    <v3d-button :name="loopMode.name" :icon="loopMode.icon" :data="data.repeat.button"></v3d-button>\n                    <v3d-counter :name="data.counter.name" :icon="data.counter.icon" :data="data.counter.button" :mode="playMode"></v3d-counter>\n\n                    <v3d-menu-animation :name="data.tune.name" :icon="data.tune.icon" :data="data.tune.menu"></v3d-menu-animation>\n                </div>\n                <div id="ui_animator" class="dummy" v-else></div>\n            ',data:function(){return{classes:a(this)}},computed:{loopMode:function(){var e=this.data.loopMode,t="",n="";return"repeat"===e?(t="repeatInfinity",n="xi-repeat"):"once"===e?(t="repeatOne",n="xi-repeat-one"):"pingpong"===e&&(t="repeatPingpong",n="xi-exchange"),{name:t,icon:n}},playMode:function(){return this.data.counter.name=this.data.playMode,this.data.playMode}},methods:{hover:r.hover},components:{"v3d-counter":{props:["name","icon","data","mode"],template:'\n                        <div :id="id" class="button">\n                            <div class="counter" type="button" \n                                v-on:click="click"\n                                v-on:mouseover="hover"\n                                v-on:mouseout="hover"\n                            >\n                                <i :class="icons"></i>\n                                <span :class="mode">{{ value }}</span>\n                                <span class="info">{{ info }}</span>\n                            </div>\n                            <v3d-popup-title :data="data.popup" :text="title"></v3d-popup-title>\n                        </div>\n                    ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),"button_"+this.data.name},icons:function(){return"time"===this.mode?"xi "+this.data.icon:"frame"===this.mode?"xi xi-chart-line":void 0},value:function(){return"time"===this.mode?this.$parent.data.time:"frame"===this.mode?this.$parent.data.frame:void 0},info:function(){return"time"===this.mode?(this.$parent.data.frameRate*this.$parent.data.timeScale).toFixed(2)+"FPS":"frame"===this.mode?(this.$parent.data.frameTime/this.$parent.data.timeScale).toFixed(2)+"Sec.":void 0},title:function(){return"time"===this.mode?SFE.getLang(()=>i.player,"realtime"):"frame"===this.mode?SFE.getLang(()=>i.player,"keyframe"):void 0}},methods:{click:r.click,hover:r.hover}}}}),Vue.component("v3d-menu-animation",{props:["name","icon","data"],template:'\n                <div :id="id" class="menu" :class="classes">\n                    <div class="header">\n                        <div class="ui row">\n                            <span class="title"><i :class="icons"></i>{{ text.title }}</span>\n                            <button name="closeMenu" class="icon small close" v-on:click="click"><i class="xi xi-close"></i></button>\n                        </div>\n                        \x3c!-- <div v-if="text.info" class="info">{{ text.info }}</div> --\x3e\n                        <div class="info">\n                            <label>{{ text.infom }}</label>\n                            <i :class="playInfo.timeScale.icon"></i>\n                            <span class="timeScale">{{ playInfo.timeScale.value }}</span>\n                            <i :class="playInfo.time.icon"></i>\n                            <span class="time">{{ playInfo.time.value }}</span>\n                            <span class="info">{{ playInfo.time.info }}</span>\n                            <i :class="playInfo.frame.icon"></i>\n                            <span class="frame">{{ playInfo.frame.value }}</span>\n                            <span class="info">{{ playInfo.frame.info }}</span>\n                        </div>\n                    </div>\n                    \n                    <div class="items">\n                        <div class="ui row">\n                            <label>{{ text.playSpeed }}</label>\n                            <div class="item input slide horizontal">\n                                <input name="timeScale" type="range"\n                                    step="0.1" min="0.1" max="2" :value="timeScale.value"\n                                    v-on:mouseover="hover"\n                                    v-on:mouseout="hover"\n                                    v-on:mousedown.stop="mouseInput"\n                                    v-on:input="input"\n                                >\n                                <div class="line timeScale">\n                                    <div class="value" :class="timeScale.overhalf" :style="timeScale.style">\n                                        <div class="half"></div>\n                                        <div class="pointer"></div>\n                                        <v3d-popup-title :data="data.popup" :text="timeScale.unit"></v3d-popup-title>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n                            <label>{{ text.loopMode }}</label>\n                            <div class="item buttons continuous center">\n                                <button name="loopMode" value="repeat" class="text" :class="loopMode.repeat" v-on:click="click">\n                                    \x3c!-- <i class="xi xi-repeat"></i> --\x3e\n                                    {{ text.repeat }}\n                                </button>\n                                <button name="loopMode" value="once" class="text" :class="loopMode.once" v-on:click="click">\n                                    \x3c!-- <i class="xi xi-repeat-one"></i> --\x3e\n                                    {{ text.once }}\n                                </button>\n                                <button name="loopMode" value="pingpong" class="text" :class="loopMode.pingpong" v-on:click="click">\n                                    \x3c!-- <i class="xi xi-exchange"></i> --\x3e\n                                    {{ text.pingpong }}\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n                            <div class="item buttons continuous">\n                                <label>{{ text.playMode }}</label>\n                                <button name="playMode" value="forward" class="text" :class="playMode.forward" v-on:click="click">\n                                    {{ text.forwardPlay }}\n                                </button>\n                                <button name="playMode" value="backward" class="text" :class="playMode.backward" v-on:click="click">\n                                    {{ text.backwardPlay }}\n                                </button>\n                            </div>\n                            <div class="item buttons continuous">\n                                <button name="playMode" value="time" class="text" :class="playMode.time" v-on:click="click">\n                                    {{ text.realtime }}\n                                </button>\n                                <button name="playMode" value="frame" class="text" :class="playMode.frame" v-on:click="click">\n                                    {{ text.keyframe }}\n                                </button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),void 0!==this.menu&&(this.data.menu=this.menu),"menu_"+this.data.name},icons:function(){return"xi "+this.data.icon},classes:function(){return[this.data.type,{show:this.data.show}]},text:function(){var e=this.$parent.data.name,t=this.data.name;return{title:SFE.getLang(()=>i[e],t),info:SFE.getLang(()=>i[e],t+"_info"),infom:SFE.getLang(()=>i,"info"),playSpeed:SFE.getLang(()=>i.player,"playSpeed"),loopMode:SFE.getLang(()=>i.player,"loopMode"),playMode:SFE.getLang(()=>i.player,"playMode"),forwardPlay:SFE.getLang(()=>i.player,"forwardPlay"),backwardPlay:SFE.getLang(()=>i.player,"backwardPlay"),realtime:SFE.getLang(()=>i.player,"realtime"),keyframe:SFE.getLang(()=>i.player,"keyframe"),once:SFE.getLang(()=>i.player,"repeatOne"),repeat:SFE.getLang(()=>i.player,"repeatInfinity"),pingpong:SFE.getLang(()=>i.player,"repeatPingpong")}},playInfo:function(){return{time:{icon:"xi xi-time-o xi-flip-horizontal",value:this.$parent.data.time+"/"+this.$parent.data.timeDuration,info:(this.$parent.data.frameRate*this.$parent.data.timeScale).toFixed(2)+"FPS"},frame:{icon:"xi xi-chart-line",value:this.$parent.data.frame,info:(this.$parent.data.frameTime/this.$parent.data.timeScale).toFixed(2)+"Sec."},timeScale:{icon:"xi xi-run",value:"X"+Number(this.$parent.data.timeScale).toFixed(2)}}},loopMode:function(){return{once:"once"===this.$parent.data.loopMode?"active":"",repeat:"repeat"===this.$parent.data.loopMode?"active":"",pingpong:"pingpong"===this.$parent.data.loopMode?"active":""}},playMode:function(){return{forward:!1===this.$parent.data.reverse?"active":"",backward:!0===this.$parent.data.reverse?"active":"",time:"time"===this.$parent.data.playMode?"active":"",frame:"frame"===this.$parent.data.playMode?"active":""}},timeScale:function(){return{value:this.$parent.data.timeScale,unit:"X"+Number(this.$parent.data.timeScale).toFixed(2),style:"width:"+this.$parent.data.timeScale/2*100+"%",overhalf:this.$parent.data.timeScale>1?"overhalf":""}}},methods:{click:r.click,input:r.input,mouseInput:r.mouseInput,hover:r.hover}}),Vue.component("v3d-player",{props:["data"],template:'\n                <div v-if="data.use" id="ui_player" \n                    class="tools" :class="classes" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    \x3c!-- <v3d-button :name="data.backward.name" :icon="data.backward.icon" :data="data.backward.button"></v3d-button> --\x3e\n                    \x3c!-- <v3d-button :name="data.play.name" :icon="data.play.icon" :data="data.play.button"></v3d-button> --\x3e\n                    \x3c!-- <v3d-button :name="data.forward.name" :icon="data.forward.icon" :data="data.forward.button"></v3d-button> --\x3e\n\n                    <v3d-button :name="player.backward.name" :icon="player.backward.icon" :data="data.backward.button"></v3d-button>\n                    <v3d-button :name="player.play.name" :icon="player.play.icon" :data="data.play.button"></v3d-button>\n                    <v3d-button :name="player.forward.name" :icon="player.forward.icon" :data="data.forward.button"></v3d-button>\n                </div>\n                <div id="ui_player" class="dummy" v-else></div>\n            ',data:function(){return{classes:a(this)}},computed:{timeDuration:function(){return this.data.time},player:function(){var e={forward:{name:"forward",icon:"xi-step-forward"},play:{name:"play",icon:"xi-play"},backward:{name:"backward",icon:"xi-step-backward"}};return!0===this.data.paused?(!1===this.data.reverse?(e.play.name="play",e.play.icon="xi-play"):!0===this.data.reverse&&(e.play.name="playReverse",e.play.icon="xi-play xi-flip-horizontal"),this.data.play.button.active=!0):(e.play.name="pause",e.play.icon="xi-pause",this.data.play.button.active=!1),!0===this.data.onStepPlay&&(e.forward.name="playForward",e.backward.name="playBackward"),e}},methods:{hover:r.hover}}),Vue.component("v3d-timeline",{props:["data"],template:'\n                <div v-if="data.use" id="ui_timeline" \n                    class="tools" :class="classes" \n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <v3d-timeline-input \n                        :name="data.timeline.name"\n                        :icon="data.timeline.icon"\n                        :playMode="data.playMode"\n                        :timeProgress="data.timeProgress"\n                        :data="data.timeline.menu"\n                    ></v3d-timeline-input>\n                </div>\n            ',computed:{classes:function(){return[this.data.timeline.name,{active:this.data.timeline.menu.active}]}},methods:{hover:r.hover},components:{"v3d-timeline-input":{props:["name","icon","playMode","timeProgress","data"],template:'\n                        <div :id="id" class="line" :class="playMode">\n                            <input name="timeline" type="range"\n                                :step="step.step" :min="step.min" :max="step.max" :value="value"\n                                v-on:mouseover="hover"\n                                v-on:mouseout="hover"\n                                v-on:mousedown.stop="mouseInput"\n                                v-on:input="input"\n                            >\n                            <div class="progress" :style="progress">\n                                <div class="pointer"></div>\n                                <v3d-popup-title :data="data.popup" :text="timelineValue" :offset="popOffset"></v3d-popup-title>\n                            </div>\n                            <div v-if="playMode === \'frame\'" class="tickmarks">\n                                <span v-for="n in tick" class="tick"></span>\n                            </div>\n                        </div>\n                    ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),"input_"+this.data.name},step:function(){return"time"===this.playMode?{step:.1,min:0,max:100}:"frame"===this.playMode?{step:1,min:0,max:this.$parent.data.frameLength}:void 0},value:function(){return this.timeProgress},tick:function(){if("frame"===this.playMode)return this.$parent.data.frameLength+1},progress:function(){return"time"===this.playMode?"width:"+this.timeProgress+"%":"frame"===this.playMode?"width:"+this.$parent.data.frameCount/this.$parent.data.frameLength*100+"%":void 0},timelineValue:function(){return"time"===this.playMode?this.$parent.data.time:"frame"===this.playMode?this.$parent.data.frame:void 0},popOffset:function(){this.timeProgress,this.data.popup;var e=0,t=this.$vnode.elm;if(void 0!==t){t.querySelector(".progress");var n=t.querySelector(".popup"),i=t.clientWidth,r=Number((i/100*this.timeProgress).toFixed(1)),a=n.clientWidth/2;a>r?e=Number((a-r).toFixed(1)):a>i-r&&(e=0-Number((a-(i-r)).toFixed(1)))}return e}},methods:{input:r.input,mouseInput:r.mouseInput,hover:r.hover}}}}),Vue.component("v3d-setting",{props:["data"],template:'\n                <div v-if="data.use" :id="id" \n                    class="tools" :class="classes"\n                    v-on:mouseenter="hover"\n                    v-on:mouseleave="hover"\n                >\n                    <v3d-button :name="data.help.name" :icon="data.help.icon" :data="data.help.button"></v3d-button>\n                    <v3d-button :name="data.display.name" :icon="data.display.icon" :data="data.display.button"></v3d-button>\n                    <v3d-button :name="data.rendering.name" :icon="data.rendering.icon" :data="data.rendering.button" :menu="data.rendering.menu"></v3d-button>\n                    <v3d-button :name="data.setting.name" :icon="data.setting.icon" :data="data.setting.button"></v3d-button>\n\n                    <v3d-menu-display :name="data.display.name" :icon="data.display.icon" :data="data.display.menu"></v3d-menu-display>\n                    <v3d-menu-rendering :name="data.rendering.name" :icon="data.rendering.icon" :data="data.rendering.menu"></v3d-menu-rendering>\n                </div>\n            ',data:function(){return{classes:a(this)}},computed:{id:function(){return this.data.blur=t.canvas.blur,this.data.fitScreen=t.canvas.fitScreen,this.data.aspectRatio=t.canvas.aspectRatio,this.data.renderingWidth=t.canvas.width,this.data.renderingHeight=t.canvas.height,this.data.screenWidth=e.container.clientWidth,this.data.screenHeight=e.container.clientHeight,"ui_setting"}},methods:{hover:r.hover}}),Vue.component("v3d-menu-display",{props:["name","icon","data"],template:'\n                <div :id="id" class="menu" :class="classes">\n                    <div class="header">\n                        <div class="ui row">\n                            <span class="title"><i :class="icons"></i>{{ text.title }}</span>\n                            <button name="closeMenu" class="icon small close" v-on:click="click"><i class="xi xi-close"></i></button>\n                        </div>\n                        \x3c!-- <div v-if="text.info" class="info">{{ text.info }}</div> --\x3e\n                        <div class="info">\n                            <label>{{ text.infom }}</label>\n                            <i :class="displayInfo.screen.icon"></i>\n                            <span class="screen">{{ displayInfo.screen.value }}</span>\n                            <i :class="displayInfo.size.icon"></i>\n                            <span class="size">{{ displayInfo.size.value }}</span>\n                            <span class="ratio">{{ displayInfo.size.info }}</span>\n                            <i :class="displayInfo.fieldOfView.icon"></i>\n                            <span class="size">{{ displayInfo.fieldOfView.value }}</span>\n                            <i :class="displayInfo.aspect.icon"></i>\n                            <span class="size">{{ displayInfo.aspect.value }}</span>\n                        </div>\n                    </div>\n                    \n                    <div class="items">\n\n                        <div class="ui row">\n                            <label>{{ text.resolution }}</label>\n                            <div class="item input slide horizontal">\n                                <input name="pixelRatio" type="range"\n                                    step="0.05" min="0.05" max="4" :value="display.ratio"\n                                    v-on:mouseover="hover"\n                                    v-on:mouseout="hover"\n                                    v-on:mousedown.stop="mouseInput"\n                                    v-on:input="input"\n                                >\n                                <div class="line pixelRatio">\n                                    <div class="value" :class="display.overhalf" :style="display.style">\n                                        <div class="half quarter"></div>\n                                        <div class="pointer"></div>\n                                        <v3d-popup-title :data="data.popup.pixelRatio" :text="display.size"></v3d-popup-title>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n                            <label>{{ text.fieldOfView }}</label>\n                            <div class="item input slide horizontal">\n                                <input name="fieldOfView" type="range"\n                                    step="1" min="0" max="180" :value="display.fieldOfView"\n                                    v-on:mouseover="hover"\n                                    v-on:mouseout="hover"\n                                    v-on:mousedown.stop="mouseInput"\n                                    v-on:input="input"\n                                >\n                                <div class="line fieldOfView">\n                                    <div class="value" :style="display.fieldOfViewStyle">\n                                        <div class="pointer"></div>\n                                        <v3d-popup-title :data="data.popup.fieldOfView" :text="display.fieldOfView"></v3d-popup-title>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n                            <label>{{ text.aspectRatio }}</label>\n                            <div class="item buttons continuous center">\n                                <button name="aspectRatio" value="auto" class="text small" :class="aspectRatio.auto" v-on:click="click">\n                                    {{ text.auto }}\n                                </button>\n                                <button name="aspectRatio" value="1" class="text small" :class="aspectRatio._1_1" v-on:click="click">\n                                    1:1\n                                </button>\n                                <button name="aspectRatio" value="0.75" class="text small" :class="aspectRatio._4_3" v-on:click="click">\n                                    4:3\n                                </button>\n                                <button name="aspectRatio" value="0.5625" class="text small" :class="aspectRatio._16_9" v-on:click="click">\n                                    16:9\n                                </button>\n                                <button name="aspectRatio" value="0.421875" class="text small" :class="aspectRatio._21_9" v-on:click="click">\n                                    21:9\n                                </button>\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n\n                            <div class="item input">\n                                <label>\n                                    <span class="label">{{ text.fitScreen }}</span>\n                                    <input type="checkbox" name="fitScreen" id="fitScreen"\n                                        :checked="display.fitScreen"\n                                        v-on:change="change"\n                                    >\n                                </label>\n                            </div>\n\n                            <div class="ui row">\n                                <div class="item input">\n                                    <label>\n                                        <span class="label">{{ text.smoothing }}</span>\n                                        <input type="checkbox" name="canvasSmooth" id="canvasSmooth"\n                                            :checked="display.smooth"\n                                            v-on:change="change"\n                                        >\n                                    </label>\n                                </div>\n                                <div class="item input">\n                                    <label>\n                                        <span class="label">{{ text.gammaCorrection }}</span>\n                                        <input type="checkbox" name="gammaCorrection" id="gammaCorrection"\n                                            :checked="display.gammaCorrection"\n                                            v-on:change="change"\n                                        >\n                                    </label>\n                                </div>\n                            </div>\n                            \n                        </div>\n\n                    </div>\n                </div>\n            ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),void 0!==this.menu&&(this.data.menu=this.menu),"menu_"+this.data.name},icons:function(){return"xi "+this.data.icon},classes:function(){return[this.data.type,{show:this.data.show}]},text:function(){var e=this.$parent.data.name,t=this.data.name;return{title:SFE.getLang(()=>i[e],t),info:SFE.getLang(()=>i[e],t+"_info"),infom:SFE.getLang(()=>i,"info"),auto:SFE.getLang(()=>i.setting,"auto"),smoothing:SFE.getLang(()=>i.setting,"smoothing"),fitScreen:SFE.getLang(()=>i.setting,"fitScreen"),resolution:SFE.getLang(()=>i.setting,"resolution"),aspectRatio:SFE.getLang(()=>i.setting,"aspectRatio"),fieldOfView:SFE.getLang(()=>i.setting,"fieldOfView"),gammaCorrection:SFE.getLang(()=>i.setting,"gammaCorrection")}},display:function(){return{fieldOfView:this.$parent.data.fov,fieldOfViewStyle:"width:"+this.$parent.data.fov/180*100+"%",smooth:t.canvas.smooth,size:this.$parent.data.renderingWidth+"X"+this.$parent.data.renderingHeight,screen:this.$parent.data.screenWidth+"X"+this.$parent.data.screenHeight,ratio:this.$parent.data.pixelRatio,fitScreen:this.$parent.data.fitScreen,style:"width:"+this.$parent.data.pixelRatio/4*100+"%",overhalf:this.$parent.data.pixelRatio>1?"overhalf":"",gammaCorrection:this.$parent.data.gammaInput&&this.$parent.data.gammaOutput}},displayInfo:function(){var e=this.$parent.data.aspectRatio,t="auto";return"auto"===e?t="auto":1===e?t="1:1":.75===e?t="4:3":.5625===e?t="16:9":.421875===e&&(t="21:9"),{screen:{icon:"xi xi-desktop",value:this.display.screen},size:{icon:"xi xi-image-o",value:this.display.size,info:"(X"+Number(this.display.ratio).toFixed(2)+")"},fieldOfView:{icon:"xi xi-eye-o",value:this.display.fieldOfView},aspect:{icon:"xi xi-overscan",value:t}}},aspectRatio:function(){return{auto:"auto"===this.$parent.data.aspectRatio?"active":"",_1_1:1===this.$parent.data.aspectRatio?"active":"",_4_3:.75===this.$parent.data.aspectRatio?"active":"",_16_9:.5625===this.$parent.data.aspectRatio?"active":"",_21_9:.421875===this.$parent.data.aspectRatio?"active":""}}},methods:{click:r.click,input:r.input,mouseInput:r.mouseInput,hover:r.hover,change:r.change,getAspect:function(e,t){var n=function e(t,n){return 0==n?t:e(n,t%n)}(e,t);return e/n+":"+t/n}}}),Vue.component("v3d-menu-rendering",{props:["name","icon","data"],template:'\n                <div :id="id" class="menu" :class="classes">\n                    <div class="header">\n                        <div class="ui row">\n                            <span class="title"><i :class="icons"></i>{{ text.title }}</span>\n                            <button name="closeMenu" class="icon small close" v-on:click="click"><i class="xi xi-close"></i></button>\n                        </div>\n                        \x3c!-- <div v-if="text.info" class="info">{{ text.info }}</div> --\x3e\n                        <div class="info">\n                        </div>\n                    </div>\n                    \n                    <div class="items">\n\n                        <div class="ui row">\n                            <label>{{ text.quickShading }}</label>\n                            <div class="item buttons continuous left">\n                                <button name="changeShading" value="default" class="text small" :class="shadingMode.default" v-on:click="click">\n                                    Default\n                                </button>\n                                <button name="changeShading" value="diffuse" class="text small" :class="shadingMode.diffuse" v-on:click="click">\n                                    Diffuse\n                                </button>\n                                <button name="changeShading" value="edgedFace" class="text small" :class="shadingMode.edgedFace" v-on:click="click">\n                                    EdgedFace\n                                </button>\n                            </div>\n                            <label>\n                                <span class="label">{{ text.outline }}</span>\n                                <input type="checkbox" name="outlineEnabled" id="outlineEnabled"\n                                    :checked="rendering.outlineEnabled"\n                                    v-on:change="change"\n                                >\n                            </label>\n                        </div>\n\n                        <div class="ui row">\n                            <div class="item input">\n                                <label>\n                                    <span class="label">{{ text.textureFiltering }}</span>\n                                    <input type="checkbox" name="textureFilter" id="textureFilter"\n                                        :checked="rendering.textureFilter"\n                                        v-on:change="change"\n                                    >\n                                </label>\n                            </div>\n                            <div class="item input">\n                                <label>\n                                    <span class="label">{{ text.mipmap }}</span>\n                                    <input type="checkbox" name="textureMipMap" id="textureMipMap"\n                                        :checked="rendering.textureMipMap"\n                                        v-on:change="change"\n                                    >\n                                </label>\n                            </div>\n                            <div class="item input">\n                                <label>{{ text.anisotropicFiltering }}</label>\n                                <input name="anisotropicFilter" id="anisotropicFilter" type="number" \n                                    min="0" max="16"\n                                    :value="rendering.anisotropicFilter"\n                                    v-on:input="input"\n                                >\n                            </div>\n                        </div>\n\n                        <div class="ui row">\n                            <label>\n                                <span class="label">{{ text.shadowMap }}</span>\n                                <input type="checkbox" name="shadowMapEnabled" id="shadowMapEnabled"\n                                    :checked="rendering.shadowMapEnabled"\n                                    v-on:change="change"\n                                >\n                            </label>\n\n                            <div class="item buttons continuous center">\n                                <button name="shadowMapType" value="BasicShadowMap" class="text small" :class="shadowMapType.BasicShadowMap" v-on:click="click">\n                                    Basic\n                                </button>\n                                <button name="shadowMapType" value="PCFShadowMap" class="text small" :class="shadowMapType.PCFShadowMap" v-on:click="click">\n                                    PCF\n                                </button>\n                                <button name="shadowMapType" value="PCFSoftShadowMap" class="text small" :class="shadowMapType.PCFSoftShadowMap" v-on:click="click">\n                                    PCFSoft\n                                </button>\n                            </div>\n                            <div class="item input">\n                                <input name="shadowMapSize" id="shadowMapSize" type="number" \n                                    :value="rendering.shadowMapSize"\n                                    v-on:input="input"\n                                >\n                            </div>\n                        </div>\n\n                        \x3c!--\n                            <div class="item buttons right">\n                                <button name="test" class="text" v-on:click="click">\n                                    test\n                                </button>\n                                <button name="recompile" class="text" v-on:click="click">\n                                    recompile\n                                </button>\n                                <button name="dispose" class="text" v-on:click="click">\n                                    dispose\n                                </button>\n                            </div>\n                        --\x3e\n\n                    </div>\n                </div>\n            ',computed:{id:function(){return void 0!==this.name&&(this.data.name=this.name),void 0!==this.icon&&(this.data.icon=this.icon),void 0!==this.menu&&(this.data.menu=this.menu),"menu_"+this.data.name},icons:function(){return"xi "+this.data.icon},classes:function(){return[this.data.type,{show:this.data.show}]},text:function(){var e=this.$parent.data.name,t=this.data.name;return{title:SFE.getLang(()=>i[e],t),info:SFE.getLang(()=>i[e],t+"_info"),infom:SFE.getLang(()=>i,"info"),quickShading:SFE.getLang(()=>i.setting,"quickShading"),outline:SFE.getLang(()=>i.setting,"outline"),textureFiltering:SFE.getLang(()=>i.setting,"textureFiltering"),mipmap:SFE.getLang(()=>i.setting,"mipmap"),anisotropicFiltering:SFE.getLang(()=>i.setting,"anisotropicFiltering"),shadowMap:SFE.getLang(()=>i.setting,"shadowMap")}},rendering:function(){return{outlineEnabled:this.$parent.data.outlineEnabled,shadowMapEnabled:this.$parent.data.shadowMapEnabled,shadowMapSize:this.$parent.data.shadowMapSize,textureFilter:this.$parent.data.textureFilter,textureMipMap:this.$parent.data.textureMipMap,anisotropicFilter:this.$parent.data.anisotropicFilter}},renderingInfo:function(){var e=this.$parent.data.aspectRatio,t="auto";return"auto"===e?t="auto":1===e?t="1:1":.75===e?t="4:3":.5625===e?t="16:9":.421875===e&&(t="21:9"),{screen:{icon:"xi xi-desktop",value:this.display.screen},size:{icon:"xi xi-image-o",value:this.display.size,info:"(X"+Number(this.display.ratio).toFixed(2)+")"},aspect:{icon:"xi xi-overscan",value:t}}},shadingMode:function(){return{default:"default"===this.$parent.data.shadingMode?"active":"",diffuse:"diffuse"===this.$parent.data.shadingMode?"active":"",edgedFace:"edgedFace"===this.$parent.data.shadingMode?"active":""}},shadowMapType:function(){return{BasicShadowMap:"BasicShadowMap"===this.$parent.data.shadowMapType?"active":"",PCFShadowMap:"PCFShadowMap"===this.$parent.data.shadowMapType?"active":"",PCFSoftShadowMap:"PCFSoftShadowMap"===this.$parent.data.shadowMapType?"active":""}}},methods:{click:r.click,input:r.input,mouseInput:r.mouseInput,hover:r.hover,change:r.change}})}getPositionClasses(e){const t=function(e){let t,n;document.querySelector("#ui_header "+e)?t="top":document.querySelector("#ui_main "+e)?t="middle":document.querySelector("#ui_footer "+e)&&(t="bottom");const i=document.querySelector(e).parentNode;return{vertical:t,horizontal:n=i.classList.contains("left")?"left":i.classList.contains("right")?"right":i.firstElementChild.localName===e?"left":i.lastElementChild.localName===e?"right":"center"}}(e.$vnode.componentOptions.tag);let n,i;if(void 0!==t)return[n=t.vertical?t.vertical:null,i=t.horizontal?t.horizontal:null].join(" ")}}const I="SFEPlayer: ";class O{constructor(e){this.SFEPlayer=e,this.SFEOptions=this.SFEPlayer.options,this.Loader=this.SFEPlayer.Loader,this.SFECanvas=this.SFEPlayer.canvas,this.SFEScene=this.SFEPlayer.scene,this.SFERenderer=this.SFEPlayer.renderer,this.SFECamera=this.SFEPlayer.camera,this.SFEControls=this.SFEPlayer.controls,this.SFEAssets,this.SFEModel,this.SFEAnimation,this.SFEMixer,this.SFEAction,this.VueUI=e.VueUI,this.VueData=e.VueData,this.canvas=this.VueData.canvas,this.message=this.VueData.message,this.share=this.VueData.share,this.camera=this.VueData.camera,this.player=this.VueData.player,this.setting=this.VueData.setting,this.menus={},this.onInput=!1,this.onInputData=!1,this.onClick=!1}readyUI(){const e=this;this.VueData.ui.events.mouseInput=function(t){"mousedown"===t.type&&t.stopPropagation(),e.checkInput(t),e.toggleControls(t)},this.VueData.ui.events.touch=(t=>{"touchstart"===t.type&&t.stopPropagation(),e.checkInput(t),e.toggleControls(t)});let t=[this.VueData.message,this.VueData.info,this.VueData.stats,this.VueData.share,this.VueData.camera,this.VueData.player,this.VueData.setting];for(const n in t){const i=t[n];i.events.hover=function(t,n){!1===t.sourceCapabilities.firesTouchEvents&&e.toggleControls(t,n)};for(const t in i)void 0!==i[t].button&&(i[t].button.events.hover=function(t,n){e.togglePopup(t,n)})}this.player.play.button.events.click=function(t,n){e.togglePlay(t,n)},this.player.forward.button.events.click=function(t,n){e.step(t,n)},this.player.forward.button.events.mouseInput=function(t,n){e.stepPlay(t,n)},this.player.backward.button.events.click=function(t,n){e.step(t,n)},this.player.backward.button.events.mouseInput=function(t,n){e.stepPlay(t,n)},this.player.timeline.menu.events.input=function(t,n){e.changeTime(t,n)},this.player.timeline.menu.events.mouseInput=function(t,n){e.checkInput(t,n)},this.player.timeline.menu.events.hover=function(t,n){e.togglePopup(t,n)},this.player.counter.button.events.hover=function(t,n){e.togglePopup(t,n)},this.player.counter.button.events.click=function(t,n){e.changePlayMode(t,n)},this.player.repeat.button.events.click=function(t,n){e.changeLoopMode(t,n)},this.menus[this.player.tune.name]=this.player.tune,this.player.tune.button.events.click=function(t,n){e.toggleMenu(t,e.player.tune)},this.player.tune.menu.events.click=function(t,n){e.handleAnimationMenu(t,n)},this.player.tune.menu.events.input=function(t,n){e.changeTimeScale(t,n)},this.player.tune.menu.events.mouseInput=function(t,n){e.checkInput(t,n)},this.player.tune.menu.events.hover=function(t,n){e.togglePopup(t,n)},this.camera.rotate.button.events.click=function(t,n){e.changeCameraMode(t,n)},this.camera.pan.button.events.click=function(t,n){e.changeCameraMode(t,n)},this.camera.zoom.button.events.click=function(t,n){e.changeCameraMode(t,n)},this.camera.focus.button.events.click=function(t,n){e.changeFocus(t,n)},this.camera.reset.button.events.click=function(t,n){e.resetCamera(t,n)},this.menus[this.setting.display.name]=this.setting.display,this.setting.display.button.events.click=function(t,n){e.toggleMenu(t,e.setting.display)},this.setting.display.menu.events.click=function(t,n){e.handleDisplayMenu(t,n)},this.setting.display.menu.events.change=function(t,n){e.handleDisplayMenu(t,n)},this.setting.display.menu.events.input=function(t,n){e.handleDisplayMenu(t,n)},this.setting.display.menu.events.mouseInput=function(t,n){e.checkInput(t,n)},this.setting.display.menu.events.hover=function(t,n){e.togglePopup(t,n)},this.menus[this.setting.rendering.name]=this.setting.rendering,this.setting.rendering.button.events.click=function(t,n){e.toggleMenu(t,e.setting.rendering)},this.setting.rendering.menu.events.click=function(t,n){e.handleRenderingMenu(t,n)},this.setting.rendering.menu.events.change=function(t,n){e.handleRenderingMenu(t,n)},this.setting.rendering.menu.events.input=function(t,n){e.handleRenderingMenu(t,n)},this.share.download.button.events.click=function(t,n){e.downloadModel(t,n)},this.share.screenshot.button.events.click=function(t,n){e.takeScreenshot(t,n)},this.menus[this.share.link.name]=this.share.link,this.share.link.button.events.click=function(t,n){e.toggleLinkMenu(t,n)},this.share.link.menu.events.click=function(t,n){e.handleLinkMenu(t,n)},this.share.link.menu.events.change=function(t,n){e.handleLinkMenu(t,n)},this.showUI()}showUI(){this.VueData.overlay.dimming=!1,this.VueData.overlay.events.transition=((e,t)=>{this.VueData.ui.ready=!0,delete t.events.transition}),this.VueData.canvas.blur=-1,this.VueData.canvas.ready=!0}async readyPlayer(e){this.SFEAssets=this.SFEPlayer.Assets,this.SFEModel=e;var t={get:function(e,t){if(t in e)return e[t]},set:function(e,t,n){return!0}},n={get:function(e,t){if(t in e)return"x"===t?e.x+e.offset.x:"y"===t?e.y+e.offset.y:"z"===t?e.z+e.offset.z:e[t]},set:function(e,t,n){return!0}};if(SFE.isEmpty(this.SFEModel.animations)){const e=this.SFEModel.position;this.SFECamera.targets.center=new Proxy(e,t),JSON.stringify(this.SFEOptions.camera.offset)!==JSON.stringify([0,0,0])&&(e.offset=this.SFECamera.orbit.offset,this.SFECamera.targets.root=new Proxy(e,n))}else{this.SFEAnimation=this.SFEModel.animations[0],this.SFEMixer=this.SFEModel.mixer,this.SFEAction=this.SFEMixer.action;const e=this.SFEModel.position;if(this.SFECamera.targets.center=new Proxy(e,t),void 0!==this.SFEModel.bones.root){const e=this.SFEModel.bones.root.position;JSON.stringify(this.SFEOptions.camera.offset)!==JSON.stringify([0,0,0])&&(e.offset=this.SFECamera.orbit.offset,this.SFECamera.targets.root=new Proxy(e,n))}var i=this.SFEAnimation.tracks[0].times,r=i[1],a=Number((1/r).toFixed(2)),o=i.length-1;this.SFEAnimation.frameTime=r,this.SFEAnimation.frameTimes=i,this.SFEAnimation.frameRate=a,this.SFEAnimation.frameLength=o,this.SFEAnimation.frameCount=0,this.player.use=!0,this.player.duration=this.SFEAnimation.duration,this.player.timeScale=this.SFEAction.timeScale,this.player.frameTime=this.SFEAnimation.frameTime,this.player.frameRate=this.SFEAnimation.frameRate,this.player.frameLength=this.SFEAnimation.frameLength}var s=this.SFEOptions.camera.focusTarget;"center"!==s&&"root"!==s||this.changeFocus(null,this.camera.focus.button,s);var u=this.SFEOptions.player.startTime;u>0&&(u>=this.player.duration?this.SFEAction.time=this.player.duration:this.SFEAction.time=u),await SFE.wait(200),!0===this.SFEOptions.player.autoStart&&this.startPlayer()}updatePlayer(){var e=this.SFEAction.time,t=this.SFEAnimation.duration,n=this.SFEAnimation.frameTime,i=(this.SFEAnimation.frameTimes,this.SFEAnimation.frameCount=Math.round(e/n)),r=this.SFEAnimation.frameLength;this.player.frameCount=i,this.player.frame=String(i)+"/"+String(r);var a=String(e.toFixed(2)).split(".");void 0===a[0]&&(a[0]=0),void 0===a[1]&&(a[1]=0),this.player.time=SFE.padNumber(a[0],2)+":"+SFE.padNumber(a[1],2);var o=String(t.toFixed(2)).split(".");void 0===o[0]&&(o[0]=0),void 0===o[1]&&(o[1]=0),this.player.timeDuration=SFE.padNumber(o[0],2)+":"+SFE.padNumber(o[1],2),this.player.timeProgress=(this.SFEAction.time/this.SFEAnimation.duration*100).toFixed(1)}startPlayer(e,t){this.player.paused=!1,this.SFEAction.paused=!1}togglePlay(e,t){!1===this.SFEAction.enabled&&(this.SFEAction.enabled=!0),"once"===this.player.loopMode&&(this.SFEAction.time===this.SFEAnimation.duration?this.SFEAction.time=0:!0===this.player.reverse&&0===this.SFEAction.time&&(this.SFEAction.time=this.SFEAnimation.duration)),!1===this.player.paused?(this.player.paused=!0,this.SFEAction.paused=!0):!0===this.player.paused&&(this.player.paused=!1,this.SFEAction.paused=!1)}changeTime(e,t){var n=e.target.value,i=this.player.playMode;if("time"===i)var r=this.player.duration*n/100;else if("frame"===i)r=this.player.frameTime*n;this.SFEAction.time=r}step(e,t){if(!0===this.player.onStepPlay)return this.player.onStepPlay=!1,!1;const n=this.SFEAnimation.frameLength,i=this.SFEAnimation.frameCount,r=this.SFEAnimation.frameTimes;!1===this.player.paused&&(this.SFEAction.paused=!0,this.player.paused=!0),"forward"===t.name&&i<n?(console.log(I+"STEP FORWARD"),this.SFEAction.time=r[i+1]):"backward"===t.name&&i>0&&(console.log(I+"STEP BACKWARD"),this.SFEAction.time=r[i-1])}async stepPlay(e,t){if(this.onInputData=t,await SFE.wait(400),!1===this.onClick)return!1;!1!==this.onInputData&&document.querySelector("button:hover")===e.target&&(await SFE.wait(100),!0===this.onClick&&(!1===this.SFEAction.enabled&&(this.SFEAction.enabled=!0),!0===this.player.reverse?this.onInputData.reverse=!0:this.onInputData.reverse=!1,this.player.onStepPlay=!0,t.active=!0,this.player.paused=!0,"forward"===t.name?(console.log(I+"STEPPLAY FORWARD"),"once"===this.player.loopMode&&this.SFEAction.time===this.SFEAnimation.duration&&(this.SFEAction.time=0),this.player.reverse=!1,this.SFEAction.paused=!1):"backward"===t.name&&(console.log(I+"STEPPLAY BACKWARD"),"once"===this.player.loopMode&&0===this.SFEAction.time&&(this.SFEAction.time=this.SFEAnimation.duration),this.player.reverse=!0,this.SFEAction.paused=!1)))}changeLoopMode(e,t,n=null){if(!n){var i=this.player.loopMode;if("repeat"===i)n="once";else if("once"===i)n="pingpong";else if("pingpong"===i)n="repeat"}"repeat"===n?(this.player.loopMode="repeat",this.SFEAction.loop=THREE.LoopRepeat):"once"===n?(this.player.loopMode="once",this.SFEAction.loop=THREE.LoopOnce):"pingpong"===n&&(this.player.loopMode="pingpong",this.SFEAction.loop=THREE.LoopOnce)}changePlayMode(e,t,n=null){if(!n){var i=this.player.playMode;if("time"===i){n="frame";this.SFEPlayer.clock.stop()}else if("frame"===i)n="time"}if("frame"===n?(this.player.playMode="frame",this.SFEPlayer.clock.stop()):"time"===n&&(this.player.playMode="time",this.SFEPlayer.clock.start()),0===this.SFEAction.time||this.SFEAction.time===this.SFEAnimation.duration);else{const e=this.SFEAnimation.frameCount,t=this.SFEAnimation.frameTime;this.SFEAction.time=t*e}}changeTimeScale(e,t){const n=e.target.value;t.value=n,this.SFEAction.timeScale=n,this.player.timeScale=n}async resetCamera(e,t){const n=this.SFEControls,i=this.SFECamera,r=this.SFEOptions.camera,a=r.position,o=r.target;this.resetCameraMode(),this.resetFocus(),n.enabled=!1,t.active=!0;const s=new TWEEN.Tween(i.position).to(i.position.clone().set(a[0],a[1],a[2]),500).easing(TWEEN.Easing.Cubic.Out),u=new TWEEN.Tween(n.target).to(n.target.clone().set(o[0],o[1],o[2]),500).easing(TWEEN.Easing.Cubic.Out);s.start(),u.start(),await SFE.wait(500),n.enabled=!0,t.active=!1}async changeFocus(e,t,n=null){let i,r=this.camera.focused;if("free"===(i=n||("free"===r?"center":"center"===r&&void 0!==this.SFECamera.targets.root?"root":"free")))t.active=!1,this.camera.focused="free",this.SFEControls.enablePan=!0,this.camera.pan.button.deactive=!1,this.SFECamera.targets.free=this.SFECamera.targets[r].clone(),this.SFEControls.target=this.SFECamera.targets.free,this.SFECamera.targets.focused="free";else{t.active=!0,this.camera.focused=i,this.SFECamera.targets.focused=i,this.SFEControls.enablePan=!1,this.camera.pan.button.deactive=!0;const e=300;this.SFEControls.target=this.SFECamera.targets[r].clone(),new TWEEN.Tween(this.SFEControls.target).to(this.SFECamera.targets[i],e).easing(TWEEN.Easing.Exponential.Out).start(),await SFE.wait(e),this.SFEControls.target=this.SFECamera.targets[i]}}resetFocus(){const e=this.camera.focus.button;this.changeFocus(null,e,"free")}changeCameraMode(e,t,n=!1){const i=this.camera.mode;!0===n||t.name===i?(this.camera.mode="free",this.camera.rotate.button.active=!1,this.camera.pan.button.active=!1,this.camera.zoom.button.active=!1,this.SFEControls.enableRotate=!0,this.SFEControls.enablePan=!0,this.SFEControls.enableZoom=!0,this.SFEControls.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT}):(this.camera.mode=t.name,this.SFEControls.enableRotate=!1,this.SFEControls.enablePan=!1,this.SFEControls.enableZoom=!1,"rotate"===t.name?(this.camera.rotate.button.active=!0,this.camera.pan.button.active=!1,this.camera.zoom.button.active=!1,this.SFEControls.enableRotate=!0,this.SFEControls.mouseButtons={LEFT:THREE.MOUSE.LEFT}):"pan"===t.name?(this.camera.rotate.button.active=!1,this.camera.pan.button.active=!0,this.camera.zoom.button.active=!1,this.SFEControls.enablePan=!0,this.SFEControls.mouseButtons={RIGHT:THREE.MOUSE.LEFT}):"zoom"===t.name&&(this.camera.rotate.button.active=!1,this.camera.pan.button.active=!1,this.camera.zoom.button.active=!0,this.SFEControls.enableZoom=!0,this.SFEControls.mouseButtons={MIDDLE:THREE.MOUSE.LEFT}))}resetCameraMode(){this.changeCameraMode(null,null,!0)}handleRenderingMenu(e,t){var n=e.target.name,i=e.target.value;if("closeMenu"===n)this.toggleMenu(e,this.setting.rendering);else if("changeShading"===n)this.setting.shadingMode=i,this.changeShadingMode(i);else if("outlineEnabled"===n)i=e.target.checked,this.setting.outlineEnabled=i,this.changeShadingMode(this.setting.shadingMode);else if("gammaCorrection"===n)i=e.target.checked,this.setting.gammaInput=i,this.setting.gammaOutput=i,this.SFERenderer.gammaInput=i,this.SFERenderer.gammaOutput=i,this.SFERenderer.dispose();else if("shadowMapEnabled"===n)i=e.target.checked,this.setting.shadowMapEnabled=i,this.SFERenderer.shadowMap.enabled=i,this.SFERenderer.dispose();else if("shadowMapType"===n)this.setting.shadowMapType=i,this.SFERenderer.shadowMap.type=THREE[i],this.SFERenderer.dispose();else if("shadowMapSize"===n)for(var r in this.setting.shadowMapSize=[i,i],this.SFEScene.children){"DirectionalLight"===(a=this.SFEScene.children[r]).type&&a.shadow.mapSize.set(i,i)}else if("textureFilter"===n||"textureMipMap"===n){for(var r in i=e.target.checked,this.setting[n]=i,this.SFEAssets.textures){var a=this.SFEAssets.textures[r];!0===this.setting.textureFilter?(a.data.magFilter=THREE.LinearFilter,!0===this.setting.textureMipMap?a.data.minFilter=THREE.LinearMipMapLinearFilter:!1===this.setting.textureMipMap&&(a.data.minFilter=THREE.LinearFilter)):!1===this.setting.textureFilter&&(a.data.magFilter=THREE.NearestFilter,!0===this.setting.textureMipMap?a.data.minFilter=THREE.NearestMipMapNearestFilter:!1===this.setting.textureMipMap&&(a.data.minFilter=THREE.NearestFilter))}this.SFERenderer.dispose()}else if("anisotropicFilter"===n){for(var r in this.setting.anisotropicFilter=i,this.SFEAssets.textures){(a=this.SFEAssets.textures[r]).data.anisotropy=i}this.SFERenderer.dispose()}else if("recompile"===n)this.SFERenderer.compile(this.SFEScene,this.SFECamera);else if("dispose"===n)this.SFERenderer.dispose();else if("test"===n){for(var r in this.SFEAssets.textures){var o=this.SFEAssets.textures[r];o.data.image.width=2560,o.data.image.height=2560,o.data.needsUpdate=!0}this.SFERenderer.dispose()}}changeShadingMode(e=null){function t(e,t){if(SFE.isObject(e.materialSlots))for(var n in e.materialSlots)e.material[n]=o[e.materialSlots[n]][t];else e.material=o[e.materialSlots][t]}var n=this.setting.outlineEnabled,i=this.SFEPlayer.effects.outline,r=this.SFEAssets.models,a=this.SFEAssets.meshes,o=this.SFEAssets.materials,s=this.setting.shadingMode;if(!e){e="default";e="default"===s?"diffuse":"diffuse"===s?"edgedFace":"default"}for(var u in this.setting.shadingMode=e,a)t(a[u],e);for(var u in r){var c=r[u].data.wireframes;"default"===e?(c.visible=!1,i.enabled=n):"diffuse"===e?(c.visible=!1,i.enabled=n):"edgedFace"===e&&(c.visible=!0,i.enabled=n)}}handleDisplayMenu(e,t){var n=e.target.name,i=e.target.value;"fieldOfView"===n?this.changefieldOfView(e,t):"pixelRatio"===n?this.changePixelRatio(e,t):"closeMenu"===n?this.toggleMenu(e,this.setting.display):"canvasSmooth"===n?(i=e.target.checked,this.VueData.canvas.smooth=i):"fitScreen"===n?(i=e.target.checked,this.VueData.canvas.fitScreen=i):"aspectRatio"===n?("auto"!==i&&(i=Number(i)),this.VueData.canvas.aspectRatio=i,this.changeAspectRatio(i)):"gammaCorrection"===n&&(i=e.target.checked,this.setting.gammaInput=i,this.setting.gammaOutput=i,this.SFERenderer.gammaInput=i,this.SFERenderer.gammaOutput=i,this.SFERenderer.dispose())}changefieldOfView(e,t){var n=e.target.value;this.setting.fov=n,this.SFECamera.fov=n,this.SFECamera.updateProjectionMatrix()}changePixelRatio(e,t){var n=e.target.value;this.setting.pixelRatio=n,this.SFERenderer.setPixelRatio(n)}changeAspectRatio(e){var t=this.SFEPlayer.container.clientWidth;if("auto"===e)var n=this.SFEPlayer.container.clientHeight;else n=this.SFEPlayer.container.clientWidth*e;this.SFECamera.aspect=t/n,this.SFECamera.updateProjectionMatrix(),this.SFERenderer.setSize(t,n,!1)}downloadModel(e,t){const n=this.SFEAssets.models;for(var i in n){var r=n[i],a=document.createElement("a");document.body.appendChild(a),a.href=r.file,a.download=r.name;var o=document.querySelector("#tempinput");o.insertBefore(a,o.lastChild),a.click(),a.remove()}}async takeScreenshot(e,t){var n=document.createElement("canvas"),i=n.getContext("2d"),r=window.open("","");r.document.title="Screenshot",r.document.body.appendChild(n);var a=new Image;this.SFEPlayer.render(),a.src=this.SFECanvas.toDataURL("image/png"),a.onload=(()=>{n.width=a.width,n.height=a.height,i.drawImage(a,0,0)})}toggleLinkMenu(e,t){var n=this.share.link.button,i=this.share.link.menu;!1===i.show?(this.closeAllMenu(),n.active=!0,this.getLinkUrl(),i.show=!0):!0===i.show&&(n.active=!1,i.show=!1)}handleLinkMenu(e,t){var n=e.target.attributes.name.value;"checkautoStart"===n?this.getLinkUrl():"checkStartTime"===n?(!0===e.target.checked?document.getElementById("startTime").disabled=!1:!1===e.target.checked&&(document.getElementById("startTime").disabled=!0),this.getLinkUrl()):"closeMenu"===n?this.toggleLinkMenu(e,t):"copyUrl"===n&&(this.getLinkUrl(),setTimeout(()=>{this.copyLinkUrl()},10))}getLinkUrl(){var e=this.SFECamera.position,t=this.SFEControls.target,n=[];const i=this.SFEAssets.models;for(var r in i)n.push(i[r].name);var a={models:n.join(","),camera_position:[Math.round(e.x),Math.round(e.y),Math.round(e.z)],camera_target:[Math.round(t.x),Math.round(t.y),Math.round(t.z)]};!0===document.getElementById("checkautoStart").checked&&(a.autostart=!0),!0===document.getElementById("checkStartTime").checked&&(a.starttime=this.VueData.player.time),"free"!==this.SFECamera.targets.focused&&(a.focustarget=this.SFECamera.targets.focused),!0===this.setting.outlineEnabled&&(a.outline=!0);var o="";for(var r in a){var s=a[r];SFE.isEmpty(s)||(o=o+"&"+r+"="+s)}var u=decodeURIComponent(location.href).split("?")[0]+"?"+o.substring(1);this.share.linkUrl=u}copyLinkUrl(){var e=document.getElementById("linkUrl");e.focus(),e.select(),document.execCommand("copy",!1)}handleAnimationMenu(e,t){"closeMenu"===e.target.name?this.toggleMenu(e,this.player.tune):"loopMode"===e.target.name?this.changeLoopMode(e,t,e.target.value):"playMode"===e.target.name&&("forward"===e.target.value?this.player.reverse=!1:"backward"===e.target.value?this.player.reverse=!0:"time"===e.target.value?this.changePlayMode(null,null,"time"):"frame"===e.target.value&&this.changePlayMode(null,null,"frame"))}async togglePopup(e,t){await SFE.wait(200),SFE.isObject(t.popup)?"mouseover"===e.type?t.popup[e.target.name]=!0:"mouseout"===e.type&&(t.popup[e.target.name]=!1):"mouseover"===e.type?t.popup=!0:"mouseout"===e.type&&(t.popup=!1)}toggleMenu(e,t){!1===t.menu.show?(this.closeAllMenu(),t.button.active=!0,t.menu.show=!0):!0===t.menu.show&&(t.button.active=!1,t.menu.show=!1)}closeAllMenu(e=null){for(var t in this.menus)e?this.menus[t].name!==e&&(this.menus[t].button.active=!1,this.menus[t].menu.show=!1):(this.menus[t].button.active=!1,this.menus[t].menu.show=!1)}checkInput(e,t){"mousedown"===e.type?(this.onClick=!0,!0===this.SFEControls.enabled?this.onInput=!0:"input"===e.target.localName&&"range"===e.target.type&&(void 0!==t&&void 0!==t.active?(t.active=!0,this.onInputData=t):this.onInput=!0,"timeline"===e.target.name&&!1===this.SFEAction.paused&&(this.SFEAction.paused=!0))):"mouseup"===e.type&&(this.onClick=!1,this.onInputData&&(!0===this.onInputData.active&&(this.onInputData.active=!1),"playForward"===this.onInputData.name||"playBackward"===this.onInputData.name?(this.player.reverse=this.onInputData.reverse,this.SFEAction.paused=!0):"timeline"===this.onInputData.name&&!1===this.player.paused&&(this.SFEAction.paused=!1)),this.onInputData=!1,this.onInput=!1)}toggleControls(e){if(!1!==this.onInput)return!1;"mouseenter"===e.type||"touchstart"===e.type?this.SFEControls.enabled=!1:"mouseleave"!==e.type&&"touchend"!==e.type||(this.SFEControls.enabled=!0)}test(){console.log(this)}}const B="SFEPlayer: ";var N=new SFE.ComponentsMaker;void 0===window.SFE&&(window.SFE={}),SFE.Player=class{constructor(e=null){if(void 0===window.USERDATA)throw Error(B+"USERDATA REQUIRED");this.userOptions=e,this.options,this.container,this.Loader,this.VueUI,this.VueData,this.stats,this.VueCanvas,this.Sequence,this.targetSequence,this.canvas,this.scene,this.renderer,this.camera,this.controls,this.light,this.models,this.helpers,this.clock,this.frameClock,this.mixers,this.effects={},this.Controller,this.Assets}init(){if(this.startLoad(),!THREE.WEBGL.isWebGLAvailable())throw THREE.WEBGL.getWebGLErrorMessage(),Error(B+"WEBGL SUPPORTED BROWSER REQUIRED");console.log(B+"SFE Sequence Player v0.0.1. based on three.js r97"),console.log(B+"WebGL2:",THREE.WEBGL.isWebGL2Available()),this.getOptions(this.userOptions).then(e=>{this.options=e,this.container=this.getContainer(),this.makeSequence(),this.makeComponents(),this.makeVueUI(),this.loadAssets(),this.animate()})}startLoad(){this.Loader=new SFE.LoadingManager,this.Loader.start()}async getOptions(e){const t=new F;let n;return n=e.global.userConfig?await t.getConfig(e.global.userConfig):await t.getDefault(),e&&(n=t.assignNew(n,e)),!0===n.global.useUrlOptions&&(n=t.getFromUrl(n)),console.log(B+"Options:",n),n}getContainer(){let e=this.options.global.containerId;"#"!==e.substring(0,1)&&(e="#"+e);let t=document.querySelector(e);if(!t||0===t.length)throw console.error("containerId:",this.options.global.containerId),Error(B+"CONTAINER IS NOT EXIST");return t}makeSequence(e=0){this.Sequence={container:this.container,target:e,scenes:[],timeline:[]};var t=this.options,n=this.makeCanvas("viewer3d_render"),i={canvas:n,scene:N.Scene(t.scene),renderer:N.WebGLRenderer(t.renderer,n),camera:N.PerspectiveCamera(t.camera,n)};this.Sequence.scenes.push(i),this.targetSequence=this.Sequence.scenes[e],this.canvas=this.targetSequence.canvas,this.scene=this.targetSequence.scene,this.renderer=this.targetSequence.renderer,this.camera=this.targetSequence.camera}makeCanvas(e="viewer3d_render"){var t=this.container;return this.VueCanvas=new Vue({el:"#"+e,data:{data:{name:"canvas",id:e,use:!0,display:!0,type:"WebGL",ready:!1,events:{},blur:16,smooth:!0,fitScreen:!0,aspectRatio:"auto",width:0,height:0}},template:'<canvas id="viewer3d_render" :class="classes" :style="styles"></canvas>',computed:{classes:function(){var e=this.data.aspectRatio,n=!1,i=!1;if(!0===this.data.fitScreen)if("auto"===e)n=!0,i=!0;else{if(0===this.data.width||0===this.data.height)return!1;var r=t.clientHeight/t.clientWidth;this.data.width===this.data.height?t.clientWidth===t.clientHeight?(n=!0,i=!0):t.clientWidth>t.clientHeight?i=!0:t.clientWidth<t.clientHeight&&(n=!0):this.data.width>this.data.height?e===r?(n=!0,i=!0):e<r?n=!0:e>r&&(i=!0):this.data.width<this.data.height&&(e===r?(n=!0,i=!0):e<r?i=!0:e>r&&(n=!0))}return[this.data.type,{smooth:this.data.smooth,ready:this.data.ready,maxwidth:n,maxheight:i}]},styles:function(){if(!0===this.data.smooth&&this.data.blur>=0)return"filter:blur("+this.data.blur+"px)"}}}),this.VueCanvas.$el}makeComponents(){this.Loader.progress.initialize=25,this.Loader.changeStatus(),this.Assets=new SFE.AssetsManager(this),this.models={},this.clock=new THREE.Clock,this.frameClock=new THREE.Clock,this.mixers=[],this.VueCanvas.$el.clientWidth,this.VueCanvas.$el.clientHeight,this.helpers=new THREE.Group,this.helpers.name="Helpers",this.scene.add(this.helpers),new THREE.Mesh(new THREE.BoxGeometry(30,30,30),new THREE.MeshBasicMaterial({color:65280,wireframe:!0})),new THREE.Mesh(new THREE.SphereGeometry(10),new THREE.MeshBasicMaterial({color:65280,wireframe:!0}));var e=this.options.controls;e.container=this.container,this.controls=N.OrbitControls(this.camera,e);var t=this.options.light,n=t.directionalLight;SFE.isEmpty(n)||(this.scene=N.DirectionalLight(this.scene,n));var i=t.ambientLight;SFE.isEmpty(i)||(this.scene=N.AmbientLight(this.scene,i));var r=t.hemisphereLight;SFE.isEmpty(r)||(this.scene=N.HemisphereLight(this.scene,r));var a=this.options.groundMesh;SFE.isEmpty(a)||(this.scene=N.GroundMesh(this.scene,a)),this.VueCanvas.data.width=this.VueCanvas.$el.width,this.VueCanvas.data.height=this.VueCanvas.$el.height,new MutationObserver((e,t)=>{for(var n of e)"attributes"==n.type&&("width"===n.attributeName&&(this.VueCanvas.data.width=n.target.width),"height"===n.attributeName&&(this.VueCanvas.data.height=n.target.height))}).observe(this.renderer.domElement,{attributes:!0});var o=this.options.effect.outline;this.effects.outline=new THREE.OutlineEffect.Custom(this.renderer,o),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}makeVueUI(){this.Loader.progress.initialize=50,this.Loader.changeStatus(),void 0===window.VIEWMODEL&&(window.VIEWMODEL={}),void 0===window.VIEWMODEL.VueUI&&(window.VIEWMODEL.VueUI={});const e=this.options.ui,t=new P(this);this.VueUI=t.makeVueUI(),this.VueData=t.VueData,this.stats=new THREE.Stats,this.stats.info=this.VueData.stats,!1===this.stats.info?e.stats.use=!1:this.defineStatData(),window.VIEWMODEL.VueUI[USERDATA.info.appId]=this.VueUI,console.log(B+"VueData:",this.VueData),this.Controller=new O(this)}loadAssets(){var e=!0;for(var t in this.options.models){var n=this.options.models[t],i=this.Assets.makeModel(n.name,n.category,n.relativePath);this.loadModel(i,n,e),e=!1}}async loadModel(e,t=null,n=!1){!0===n&&(this.Loader.progress.initialize=100,await this.Loader.changeStatus()),t||(t=this.options.defaultModel);const i=e.name,r=this.Assets,a=this.Loader,o=this.Controller;var s=new L;e.onStart=function(){a.queue.push(new Promise(t=>{e.onLoad=function(){setTimeout(function(){t(!0)},0)}}))},e.onProgress=function(){a.changeFileProgress(this)};var u=await e.load();if(u=s.ready(u,r,t),this.scene.add(u),this.models[i]=u,this.stats.refresh=!0,u.animations){u.mixer=new THREE.AnimationMixer(u),this.mixers.push(u.mixer);const e=u.mixer.clipAction(u.animations[0]);u.mixer.action=e,u.mixer.addEventListener("loop",function(e){void 0!==this.action.onLoop&&"function"==typeof this.action.onLoop&&this.action.onLoop(e,this)}),u.mixer.addEventListener("finished",function(e){void 0!==this.action.onLoop&&"function"==typeof this.action.onLoop&&this.action.onLoop(e,this)}),u.mixer.action.onLoop=function(e,t){var n=o.player.loopMode;if("once"===n)o.player.paused=!0;else{if("repeat"===n)return!1;"pingpong"===n&&(!1===o.player.reverse?o.player.reverse=!0:o.player.reverse=!1,o.V3Daction.enabled=!0,o.V3Daction.paused=!1)}},u.mixer.action.play(),u.mixer.action.paused=!0}!0===n&&(await Promise.all(a.queue),this.Loader.progress.make_assets=50,this.Loader.changeStatus(),console.log(B+"Assets:",this.Assets),console.log(B+"Sequence:",this.Sequence),console.log(B+"LOADING COMPLETE"),this.Loader.progress.make_assets=100,await this.Loader.finish(),await SFE.wait(100),o.readyUI(),await o.readyPlayer(u)),u=s.add(u,r,t)}animate(){if(requestAnimationFrame(this.animate.bind(this)),this.mixers.length>0){var e=this.Controller.player.reverse;if("frame"===this.Controller.player.playMode){var t=this.Controller.SFEAnimation.frameTime/this.Controller.SFEAction.timeScale;this.frameClock.getDelta();var n=this.frameClock.elapsedTime;if(!1===e){if(Number(n.toFixed(2))>=Number(t.toFixed(2))){for(var i=0;i<this.mixers.length;i++)this.mixers[i].update(t);this.frameClock.elapsedTime=0}}else if(!0===e&&(n=0-n,t=0-t,Number(n.toFixed(2))<=Number(t.toFixed(2)))){for(i=0;i<this.mixers.length;i++)this.mixers[i].update(t);this.frameClock.elapsedTime=0}}else for(t=this.clock.getDelta(),!0===e&&(t=0-t),i=0;i<this.mixers.length;i++)this.mixers[i].update(t)}this.camera.update(),this.controls.update(),TWEEN.update(),this.render(),!0===this.options.ui.stats.use&&(this.stats.refresh=!0,this.updateStatData()),SFE.isEmpty(this.models)||!0!==this.Controller.player.use||this.Controller.updatePlayer()}render(){for(var e in this.renderer.render(this.scene,this.camera),this.effects)this.effects[e].render(this.scene,this.camera)}defineStatData(){if(!1===this.options.ui.stats.use)return!1;if(!0===this.options.ui.stats.rendererInfo){var e=this.stats.info,t="WebGL1";1==this.renderer.capabilities.isWebGL2&&(t="WebGL2"),e.title=t+": THREE."+this.renderer.constructor.name+" r"+THREE.REVISION}this.stats.refresh=!0,this.updateStatData()}updateStatData(){if(!1===this.options.ui.stats.use)return!1;var e=this.options.ui.stats.data,t=this.stats.info.lists,n=this.renderer.context,i=this.renderer.info.render;function r(n,i){!0===e[n]&&(t[n]=i)}this.stats.update(),!0===this.stats.refresh&&(r("bufferSize",n.drawingBufferWidth+" X "+n.drawingBufferHeight),r("drawCalls",i.calls),r("points",i.points),r("lines",i.lines),r("triangles",i.triangles),this.stats.refresh=!1),r("frameCount",i.frame),r("memory",Math.round(this.stats.memVal)+"MB / "+Math.round(this.stats.memMax)+"MB"),r("frameTime",Math.round(this.stats.ftime)+"MS"),r("FPS",Math.round(this.stats.fps))}onWindowResize(){var e=this.VueCanvas.data.aspectRatio,t=this.container.clientWidth;if("auto"===e)var n=this.container.clientHeight;else n=this.container.clientWidth*e;this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n,!1)}};var k=Object.freeze({}),U={Huffman:{},CompressionMethod:{DEFLATE:8,RESERVED:15}};U.Huffman.buildHuffmanTable=function(e){var t,n,i,r,a,o,s,u,c,l,h,p=e.length,d=0,f=Number.POSITIVE_INFINITY;for(u=0,c=p;u<c;++u)e[u]>d&&(d=e[u]),e[u]<f&&(f=e[u]);for(t=1<<d,n=new Uint32Array(t),i=1,r=0,a=2;i<=d;){for(u=0;u<p;++u)if(e[u]===i){for(o=0,s=r,l=0;l<i;++l)o=o<<1|1&s,s>>=1;for(h=i<<16|u,l=o;l<t;l+=a)n[l]=h;++r}++i,r<<=1,a<<=1}return[n,d,f]};var z=U.Huffman.buildHuffmanTable;U.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=U.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case U.RawInflate.BufferType.BLOCK:this.op=U.RawInflate.MaxBackwardLength,this.output=new Uint8Array(U.RawInflate.MaxBackwardLength+this.bufferSize+U.RawInflate.MaxCopyLength);break;case U.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw new Error("invalid inflate mode")}},U.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},U.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},U.RawInflate.MaxBackwardLength=32768,U.RawInflate.MaxCopyLength=258,U.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),U.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),U.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),U.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),U.RawInflate.FixedLiteralLengthTable=function(){var e,t,n=new Uint8Array(288);for(e=0,t=n.length;e<t;++e)n[e]=e<=143?8:e<=255?9:e<=279?7:8;return z(n)}(),U.RawInflate.FixedDistanceTable=function(){var e,t,n=new Uint8Array(30);for(e=0,t=n.length;e<t;++e)n[e]=5;return z(n)}(),U.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},U.RawInflate.prototype.readBits=function(e){for(var t,n=this.bitsbuf,i=this.bitsbuflen,r=this.input,a=this.ip,o=r.length;i<e;){if(a>=o)throw new Error("input buffer is broken");n|=r[a++]<<i,i+=8}return t=n&(1<<e)-1,n>>>=e,i-=e,this.bitsbuf=n,this.bitsbuflen=i,this.ip=a,t},U.RawInflate.prototype.readCodeByTable=function(e){for(var t,n,i=this.bitsbuf,r=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,u=e[0],c=e[1];r<c&&!(o>=s);)i|=a[o++]<<r,r+=8;if((n=(t=u[i&(1<<c)-1])>>>16)>r)throw new Error("invalid code length: "+n);return this.bitsbuf=i>>n,this.bitsbuflen=r-n,this.ip=o,65535&t},U.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,n=this.input,i=this.ip,r=this.output,a=this.op,o=n.length,s=r.length;if(this.bitsbuf=0,this.bitsbuflen=0,i+1>=o)throw new Error("invalid uncompressed block header: LEN");if(e=n[i++]|n[i++]<<8,i+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e===~(n[i++]|n[i++]<<8))throw new Error("invalid uncompressed block header: length verify");if(i+e>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case U.RawInflate.BufferType.BLOCK:for(;a+e>r.length;)e-=t=s-a,r.set(n.subarray(i,i+t),a),a+=t,i+=t,this.op=a,r=this.expandBuffer(),a=this.op;break;case U.RawInflate.BufferType.ADAPTIVE:for(;a+e>r.length;)r=this.expandBuffer({fixRatio:2});break;default:throw new Error("invalid inflate mode")}r.set(n.subarray(i,i+e),a),a+=e,i+=e,this.ip=i,this.op=a,this.output=r},U.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(U.RawInflate.FixedLiteralLengthTable,U.RawInflate.FixedDistanceTable)},U.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,n,i,r,a,o,s,u,c=this.readBits(5)+257,l=this.readBits(5)+1,h=this.readBits(4)+4,p=new Uint8Array(U.RawInflate.Order.length);for(s=0;s<h;++s)p[U.RawInflate.Order[s]]=this.readBits(3);for(e=z(p),i=new Uint8Array(c+l),s=0,u=c+l;s<u;)switch(r=this.readCodeByTable(e)){case 16:for(o=3+this.readBits(2);o--;)i[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)i[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)i[s++]=0;a=0;break;default:i[s++]=r,a=r}t=z(i.subarray(0,c)),n=z(i.subarray(c)),this.decodeHuffman(t,n)},U.RawInflate.prototype.decodeHuffman=function(e,t){var n=this.output,i=this.op;this.currentLitlenTable=e;for(var r,a,o,s,u=n.length-U.RawInflate.MaxCopyLength;256!==(r=this.readCodeByTable(e));)if(r<256)i>=u&&(this.op=i,n=this.expandBuffer(),i=this.op),n[i++]=r;else for(a=r-257,s=U.RawInflate.LengthCodeTable[a],U.RawInflate.LengthExtraTable[a]>0&&(s+=this.readBits(U.RawInflate.LengthExtraTable[a])),r=this.readCodeByTable(t),o=U.RawInflate.DistCodeTable[r],U.RawInflate.DistExtraTable[r]>0&&(o+=this.readBits(U.RawInflate.DistExtraTable[r])),i>=u&&(this.op=i,n=this.expandBuffer(),i=this.op);s--;)n[i]=n[i++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},U.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var n=this.output,i=this.op;this.currentLitlenTable=e;for(var r,a,o,s,u=n.length;256!==(r=this.readCodeByTable(e));)if(r<256)i>=u&&(u=(n=this.expandBuffer()).length),n[i++]=r;else for(a=r-257,s=U.RawInflate.LengthCodeTable[a],U.RawInflate.LengthExtraTable[a]>0&&(s+=this.readBits(U.RawInflate.LengthExtraTable[a])),r=this.readCodeByTable(t),o=U.RawInflate.DistCodeTable[r],U.RawInflate.DistExtraTable[r]>0&&(o+=this.readBits(U.RawInflate.DistExtraTable[r])),i+s>u&&(u=(n=this.expandBuffer()).length);s--;)n[i]=n[i++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},U.RawInflate.prototype.expandBuffer=function(e){var t=new Uint8Array(this.op-U.RawInflate.MaxBackwardLength),n=this.op-U.RawInflate.MaxBackwardLength,i=this.output;return t.set(i.subarray(U.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,i.set(i.subarray(n,n+U.RawInflate.MaxBackwardLength)),this.op=U.RawInflate.MaxBackwardLength,i},U.RawInflate.prototype.expandBufferAdaptive=function(e){var t,n,i,r=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(r=e.fixRatio),"number"==typeof e.addRatio&&(r+=e.addRatio)),n=r<2?(i=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+i:o.length<<1:o.length*r,(t=new Uint8Array(n)).set(o),this.output=t,this.output},U.RawInflate.prototype.concatBuffer=function(){var e,t,n,i,r,a=0,o=this.totalpos+(this.op-U.RawInflate.MaxBackwardLength),s=this.output,u=this.blocks,c=new Uint8Array(o);if(0===u.length)return this.output.subarray(U.RawInflate.MaxBackwardLength,this.op);for(t=0,n=u.length;t<n;++t)for(i=0,r=(e=u[t]).length;i<r;++i)c[a++]=e[i];for(t=U.RawInflate.MaxBackwardLength,n=this.op;t<n;++t)c[a++]=s[t];return this.blocks=[],this.buffer=c,this.buffer},U.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer},U.Inflate=function(e,t){var n,i;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),n=e[this.ip++],i=e[this.ip++],15&n){case U.CompressionMethod.DEFLATE:this.method=U.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+i)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+i)%31);if(32&i)throw new Error("fdict flag is not supported");this.rawinflate=new U.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},U.Inflate.BufferType=U.RawInflate.BufferType,U.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==U.Adler32(e))throw new Error("invalid adler-32 checksum");return e};var H=function(){this._tweens={},this._tweensAddedDuringUpdate={}};H.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:V.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(e)&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var G,V=new H;function j(){}V.Group=H,V._nextId=0,V.nextId=function(){return V._nextId++},"undefined"==typeof window&&"undefined"!=typeof process?V.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?V.now=window.performance.now.bind(window.performance):void 0!==Date.now?V.now=Date.now:V.now=function(){return(new Date).getTime()},V.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=V.Easing.Linear.None,this._interpolationFunction=V.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||V,this._id=V.nextId()},V.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?V.now()+parseFloat(e):e:V.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,a=this._valuesEnd[t];a instanceof Array?this._object[t]=this._interpolationFunction(a,i):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[t]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var o=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=o}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},V.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-V.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*V.Easing.Bounce.In(2*e):.5*V.Easing.Bounce.Out(2*e-1)+.5}}},V.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=V.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[n],e[n-1],n-i):a(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,a=V.Interpolation.Utils.Bernstein,o=0;o<=i;o++)n+=r(1-t,i-o)*r(t,o)*e[o]*a(i,o);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=V.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),a(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):a(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=V.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(G=[1],function(e){var t=1;if(G[e])return G[e];for(var n=e;n>1;n--)t*=n;return G[e]=t,t}),CatmullRom:function(e,t,n,i,r){var a=.5*(n-e),o=.5*(i-t),s=r*r;return(2*t-2*n+a+o)*(r*s)+(-3*t+3*n-2*a-o)*s+a*r+t}}},void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(j.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var W,X,$,q,Y,J,Z,K,Q="97",ee={LEFT:0,MIDDLE:1,RIGHT:2},te=0,ne=1,ie=2,re=1,ae=2,oe=0,se=1,ue=2,ce=0,le=1,he=2,pe=0,de=1,fe=2,me=3,ve=4,ge=5,ye=100,xe=101,be=102,we=103,Ee=104,_e=200,Me=201,Se=202,Ae=203,De=204,Te=205,Ce=206,Fe=207,Le=208,Re=209,Pe=210,Ie=0,Oe=1,Be=2,Ne=3,ke=4,Ue=5,ze=6,He=7,Ge=0,Ve=1,je=2,We=0,Xe=1,$e=2,qe=3,Ye=4,Je=301,Ze=302,Ke=303,Qe=304,et=305,tt=306,nt=307,it=1e3,rt=1001,at=1002,ot=1003,st=1004,ut=1005,ct=1006,lt=1007,ht=1008,pt=1009,dt=1010,ft=1011,mt=1012,vt=1013,gt=1014,yt=1015,xt=1016,bt=1017,wt=1018,Et=1019,_t=1020,Mt=1021,St=1022,At=1023,Dt=1024,Tt=1025,Ct=At,Ft=1026,Lt=1027,Rt=1028,Pt=33776,It=33777,Ot=33778,Bt=33779,Nt=35840,kt=35841,Ut=35842,zt=35843,Ht=36196,Gt=37808,Vt=37809,jt=37810,Wt=37811,Xt=37812,$t=37813,qt=37814,Yt=37815,Jt=37816,Zt=37817,Kt=37818,Qt=37819,en=37820,tn=37821,nn=2201,rn=2400,an=0,on=1,sn=2,un=3e3,cn=3001,ln=3007,hn=3002,pn=3004,dn=3005,fn=3006,mn=3200,vn=3201,gn=0,yn=1,xn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*xn.DEG2RAD},radToDeg:function(e){return e*xn.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function bn(e,t){this.x=e||0,this.y=t||0}function wn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function En(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function _n(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Mn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(bn.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(bn.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(W=new bn,X=new bn,function(e,t){return W.set(e,e),X.set(t,t),this.clamp(W,X)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(wn.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,u,c,l,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new wn).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(Z=new _n,function(e){var t=this.elements,n=e.elements,i=1/Z.setFromMatrixColumn(e,0).length(),r=1/Z.setFromMatrixColumn(e,1).length(),a=1/Z.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),u=Math.sin(i),c=Math.cos(r),l=Math.sin(r);if("XYZ"===e.order){var h=a*c,p=a*l,d=o*c,f=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=p+d*u,t[5]=h-f*u,t[9]=-o*s,t[2]=f-h*u,t[6]=d+p*u,t[10]=a*s}else if("YXZ"===e.order){var m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*u,t[1]=a*l,t[5]=a*c,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m-y*o,t[4]=-a*l,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*c,t[9]=y-m*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){h=a*c,p=a*l,d=o*c,f=o*l;t[0]=s*c,t[4]=d*u-p,t[8]=h*u+f,t[1]=s*l,t[5]=f*u+h,t[9]=p*u-d,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,b=a*u,w=o*s,E=o*u;t[0]=s*c,t[4]=E-x*l,t[8]=w*l+b,t[1]=l,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=b*l+w,t[10]=x-E*l}else if("XZY"===e.order){x=a*s,b=a*u,w=o*s,E=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=x*l+E,t[5]=a*c,t[9]=b*l-w,t[2]=w*l-b,t[6]=o*c,t[10]=E*l+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(Y=new _n(0,0,0),J=new _n(1,1,1),function(e){return this.compose(Y,e,J)}),lookAt:function(){var e=new _n,t=new _n,n=new _n;return function(i,r,a){var o=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(a,n),0===e.lengthSq()&&(1===Math.abs(a.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(a,n)),e.normalize(),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],b=n[15],w=i[0],E=i[4],_=i[8],M=i[12],S=i[1],A=i[5],D=i[9],T=i[13],C=i[2],F=i[6],L=i[10],R=i[14],P=i[3],I=i[7],O=i[11],B=i[15];return r[0]=a*w+o*S+s*C+u*P,r[4]=a*E+o*A+s*F+u*I,r[8]=a*_+o*D+s*L+u*O,r[12]=a*M+o*T+s*R+u*B,r[1]=c*w+l*S+h*C+p*P,r[5]=c*E+l*A+h*F+p*I,r[9]=c*_+l*D+h*L+p*O,r[13]=c*M+l*T+h*R+p*B,r[2]=d*w+f*S+m*C+v*P,r[6]=d*E+f*A+m*F+v*I,r[10]=d*_+f*D+m*L+v*O,r[14]=d*M+f*T+m*R+v*B,r[3]=g*w+y*S+x*C+b*P,r[7]=g*E+y*A+x*F+b*I,r[11]=g*_+y*D+x*L+b*O,r[15]=g*M+y*T+x*R+b*B,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new _n;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],p=e[14];return e[3]*(+r*s*l-i*u*l-r*o*h+n*u*h+i*o*p-n*s*p)+e[7]*(+t*s*p-t*u*h+r*a*h-i*a*p+i*u*c-r*s*c)+e[11]*(+t*u*l-t*o*p-r*a*l+n*a*p+r*o*c-n*u*c)+e[15]*(-i*o*c-t*s*l+t*o*h+i*a*l-n*a*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],u=i[4],c=i[5],l=i[6],h=i[7],p=i[8],d=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15],b=d*y*h-g*f*h+g*l*m-c*y*m-d*l*x+c*f*x,w=v*f*h-p*y*h-v*l*m+u*y*m+p*l*x-u*f*x,E=p*g*h-v*d*h+v*c*m-u*g*m-p*c*x+u*d*x,_=v*d*l-p*g*l-v*c*f+u*g*f+p*c*y-u*d*y,M=r*b+a*w+o*E+s*_;if(0===M){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var A=1/M;return n[0]=b*A,n[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*x-a*f*x)*A,n[2]=(c*y*s-g*l*s+g*o*h-a*y*h-c*o*x+a*l*x)*A,n[3]=(d*l*s-c*f*s-d*o*h+a*f*h+c*o*m-a*l*m)*A,n[4]=w*A,n[5]=(p*y*s-v*f*s+v*o*m-r*y*m-p*o*x+r*f*x)*A,n[6]=(v*l*s-u*y*s-v*o*h+r*y*h+u*o*x-r*l*x)*A,n[7]=(u*f*s-p*l*s+p*o*h-r*f*h-u*o*m+r*l*m)*A,n[8]=E*A,n[9]=(v*d*s-p*g*s-v*a*m+r*g*m+p*a*x-r*d*x)*A,n[10]=(u*g*s-v*c*s+v*a*h-r*g*h-u*a*x+r*c*x)*A,n[11]=(p*c*s-u*d*s-p*a*h+r*d*h+u*a*m-r*c*m)*A,n[12]=_*A,n[13]=(p*g*o-v*d*o+v*a*f-r*g*f-p*a*y+r*d*y)*A,n[14]=(v*c*o-u*g*o-v*a*l+r*g*l+u*a*y-r*c*y)*A,n[15]=(u*d*o-p*c*o+p*a*l-r*d*l-u*a*f+r*c*f)*A,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,u=r*a,c=r*o;return this.set(u*a+n,u*o-i*s,u*s+i*o,0,u*o+i*s,c*o+n,c*s-i*a,0,u*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,u=r+r,c=a+a,l=o+o,h=r*u,p=r*c,d=r*l,f=a*c,m=a*l,v=o*l,g=s*u,y=s*c,x=s*l,b=n.x,w=n.y,E=n.z;return i[0]=(1-(f+v))*b,i[1]=(p+x)*b,i[2]=(d-y)*b,i[3]=0,i[4]=(p-x)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(d+y)*E,i[9]=(m-g)*E,i[10]=(1-(h+f))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:($=new _n,q=new wn,function(e,t,n){var i=this.elements,r=$.set(i[0],i[1],i[2]).length(),a=$.set(i[4],i[5],i[6]).length(),o=$.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],q.copy(this);var s=1/r,u=1/a,c=1/o;return q.elements[0]*=s,q.elements[1]*=s,q.elements[2]*=s,q.elements[4]*=u,q.elements[5]*=u,q.elements[6]*=u,q.elements[8]*=c,q.elements[9]*=c,q.elements[10]*=c,t.setFromRotationMatrix(q),n.x=r,n.y=a,n.z=o,this}),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),u=2*r/(n-i),c=(t+e)/(t-e),l=(n+i)/(n-i),h=-(a+r)/(a-r),p=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),u=1/(n-i),c=1/(a-r),l=(t+e)*s,h=(n+i)*u,p=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(En,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],u=n[i+1],c=n[i+2],l=n[i+3],h=r[a+0],p=r[a+1],d=r[a+2],f=r[a+3];if(l!==f||s!==h||u!==p||c!==d){var m=1-o,v=s*h+u*p+c*d+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x,o=Math.sin(o*b)/x}var w=o*g;if(s=s*m+h*w,u=u*m+p*w,c=c*m+d*w,l=l*m+f*w,m===1-o){var E=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=E,u*=E,c*=E,l*=E}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}}),Object.defineProperties(En.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(En.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(i/2),l=o(r/2),h=s(n/2),p=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=h*c*l+u*p*d,this._y=u*p*l-h*c*d,this._z=u*c*d+h*p*l,this._w=u*c*l-h*p*d):"YXZ"===a?(this._x=h*c*l+u*p*d,this._y=u*p*l-h*c*d,this._z=u*c*d-h*p*l,this._w=u*c*l+h*p*d):"ZXY"===a?(this._x=h*c*l-u*p*d,this._y=u*p*l+h*c*d,this._z=u*c*d+h*p*l,this._w=u*c*l-h*p*d):"ZYX"===a?(this._x=h*c*l-u*p*d,this._y=u*p*l+h*c*d,this._z=u*c*d-h*p*l,this._w=u*c*l+h*p*d):"YZX"===a?(this._x=h*c*l+u*p*d,this._y=u*p*l+h*c*d,this._z=u*c*d-h*p*l,this._w=u*c*l-h*p*d):"XZY"===a&&(this._x=h*c*l-u*p*d,this._y=u*p*l-h*c*d,this._z=u*c*d+h*p*l,this._w=u*c*l+h*p*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],p=i+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(l-u)*t,this._y=(a-c)*t,this._z=(o-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(l-u)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+c)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(u+l)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-r)/t,this._x=(a+c)/t,this._y=(u+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new _n;return function(n,i){return void 0===t&&(t=new _n),(e=n.dot(i)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(xn.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+i*u-r*s,this._y=i*c+a*s+r*o-n*u,this._z=r*c+a*u+n*s-i*o,this._w=a*c-n*o-i*s-r*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*i+t*this._y,this._z=u*r+t*this._z,this.normalize()}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-t)*l)/c,p=Math.sin(t*l)/c;return this._w=a*h+this._w*p,this._x=n*h+this._x*p,this._y=i*h+this._y*p,this._z=r*h+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_n.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(K=new En,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(K.setFromEuler(e))}),applyAxisAngle:function(){var e=new En;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*i-o*n,c=s*n+o*t-r*i,l=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=u*s+h*-r+c*-o-l*-a,this.y=c*s+h*-a+l*-r-u*-o,this.z=l*s+h*-o+u*-a-c*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new wn;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new _n,t=new _n;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new _n;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new _n;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(xn.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Mn.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,u){var c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new _n;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],p=n[5],d=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],x=i[7],b=i[2],w=i[5],E=i[8];return r[0]=a*f+o*g+s*b,r[3]=a*m+o*y+s*w,r[6]=a*v+o*x+s*E,r[1]=u*f+c*g+l*b,r[4]=u*m+c*y+l*w,r[7]=u*v+c*x+l*E,r[2]=h*f+p*g+d*b,r[5]=h*m+p*y+d*w,r[8]=h*v+p*x+d*E,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*r*c+n*o*s+i*r*u-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],p=n[8],d=p*u-c*h,f=c*l-p*s,m=h*s-u*l,v=r*d+a*f+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(o*h-p*a)*y,i[2]=(c*a-o*u)*y,i[3]=f*y,i[4]=(p*r-o*l)*y,i[5]=(o*s-c*r)*y,i[6]=m*y,i[7]=(a*l-h*r)*y,i[8]=(u*r-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),u=Math.sin(r);this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-i*u,i*s,-i*(-u*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],u=i[4],c=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*u,i[6]=t*o+n*c,i[1]=-n*r+t*s,i[4]=-n*a+t*u,i[7]=-n*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Sn,An,Dn,Tn,Cn,Fn={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Ln=0;function Rn(e,t,n,i,r,a,o,s,u,c){Object.defineProperty(this,"id",{value:Ln++}),this.uuid=xn.generateUUID(),this.name="",this.image=void 0!==e?e:Rn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Rn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:rt,this.wrapT=void 0!==i?i:rt,this.magFilter=void 0!==r?r:ct,this.minFilter=void 0!==a?a:ht,this.anisotropy=void 0!==u?u:1,this.format=void 0!==o?o:At,this.type=void 0!==s?s:pt,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:un,this.version=0,this.onUpdate=null}function Pn(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function In(e,t,n){this.width=e,this.height=t,this.scissor=new Pn(0,0,e,t),this.scissorTest=!1,this.viewport=new Pn(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=ct),this.texture=new Rn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function On(e,t,n){In.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Bn(e,t,n,i,r,a,o,s,u,c,l,h){Rn.call(this,null,a,o,s,u,c,i,r,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:ot,this.minFilter=void 0!==c?c:ot,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Nn(e,t){this.min=void 0!==e?e:new _n(1/0,1/0,1/0),this.max=void 0!==t?t:new _n(-1/0,-1/0,-1/0)}function kn(e,t){this.center=void 0!==e?e:new _n,this.radius=void 0!==t?t:0}function Un(e,t){this.normal=void 0!==e?e:new _n(1,0,0),this.constant=void 0!==t?t:0}function zn(e,t,n,i,r,a){this.planes=[void 0!==e?e:new Un,void 0!==t?t:new Un,void 0!==n?n:new Un,void 0!==i?i:new Un,void 0!==r?r:new Un,void 0!==a?a:new Un]}Rn.DEFAULT_IMAGE=void 0,Rn.DEFAULT_MAPPING=300,Rn.prototype=Object.assign(Object.create(j.prototype),{constructor:Rn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=xn.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(Fn.getDataURL(i[a]))}else r=Fn.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case it:e.x=e.x-Math.floor(e.x);break;case rt:e.x=e.x<0?0:1;break;case at:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case it:e.y=e.y-Math.floor(e.y);break;case rt:e.y=e.y<0?0:1;break;case at:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Rn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Pn.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,o=a[0],s=a[4],u=a[8],c=a[1],l=a[5],h=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-c)<.01&&Math.abs(u-p)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+p)<.1&&Math.abs(h+d)<.1&&Math.abs(o+l+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(l+1)/2,g=(f+1)/2,y=(s+c)/4,x=(u+p)/4,b=(h+d)/4;return m>v&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=x/n):v>g?v<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(v)),r=b/i):g<.01?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(g)),i=b/r),this.set(n,i,r,t),this}var w=Math.sqrt((d-h)*(d-h)+(u-p)*(u-p)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(u-p)/w,this.z=(c-s)/w,this.w=Math.acos((o+l+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new Pn,t=new Pn),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),In.prototype=Object.assign(Object.create(j.prototype),{constructor:In,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),On.prototype=Object.create(In.prototype),On.prototype.constructor=On,On.prototype.isWebGLRenderTargetCube=!0,Bn.prototype=Object.create(Rn.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isDataTexture=!0,Object.assign(Nn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new _n;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new _n),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new _n),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new _n;function r(r){var a=r.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)i.copy(o[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)i.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new _n),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(An=new _n,function(e){return this.clampPoint(e.center,An),An.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new _n,t=new _n,n=new _n,i=new _n,r=new _n,a=new _n,o=new _n,s=new _n,u=new _n,c=new _n;function l(i){var r,a;for(r=0,a=i.length-3;r<=a;r+=3){o.fromArray(i,r);var s=u.x*Math.abs(o.x)+u.y*Math.abs(o.y)+u.z*Math.abs(o.z),c=e.dot(o),l=t.dot(o),h=n.dot(o);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),i.subVectors(t,e),r.subVectors(n,t),a.subVectors(e,n);var h=[0,-i.z,i.y,0,-r.z,r.y,0,-a.z,a.y,i.z,0,-i.x,r.z,0,-r.x,a.z,0,-a.x,-i.y,i.x,0,-r.y,r.x,0,-a.y,a.x,0];return!!l(h)&&(!!l(h=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,r),l(h=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new _n),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new _n;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new _n;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new kn),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Sn=[new _n,new _n,new _n,new _n,new _n,new _n,new _n,new _n],function(e){return this.isEmpty()?this:(Sn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sn),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(kn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Dn=new Nn,function(e,t){var n=this.center;void 0!==t?n.copy(t):Dn.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new _n),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Nn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Un.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new _n,t=new _n;return function(n,i,r){var a=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new _n),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new _n;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new _n);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new _n),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new _n,t=new Mn;return function(n,i){var r=i||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(zn.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-i,l-s,f-h,y-m).normalize(),t[1].setComponents(o+i,l+s,f+h,y+m).normalize(),t[2].setComponents(o+r,l+u,f+p,y+v).normalize(),t[3].setComponents(o-r,l-u,f-p,y-v).normalize(),t[4].setComponents(o-a,l-c,f-d,y-g).normalize(),t[5].setComponents(o+a,l+c,f+d,y+g).normalize(),this},intersectsObject:(Cn=new kn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Cn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Cn)}),intersectsSprite:function(){var e=new kn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(Tn=new _n,function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(Tn.x=i.normal.x>0?e.max.x:e.min.x,Tn.y=i.normal.y>0?e.max.y:e.min.y,Tn.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Tn)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Hn,Gn,Vn,jn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",background_vert:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},Wn={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},Xn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $n(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign($n.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=xn.euclideanModulo(t,1),n=xn.clamp(n,0,1),i=xn.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;this.r=e(a,r,t+1/3),this.g=e(a,r,t),this.b=e(a,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,l=(c=n[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=Xn[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var c=o-s;switch(n=u<=.5?c/(o+s):c/(2-o-s),o){case i:t=(r-a)/c+(r<a?6:0);break;case r:t=(a-i)/c+2;break;case a:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Vn={},function(e,t,n){return this.getHSL(Vn),Vn.h+=e,Vn.s+=t,Vn.l+=n,this.setHSL(Vn.h,Vn.s,Vn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(Hn={h:0,s:0,l:0},Gn={h:0,s:0,l:0},function(e,t){this.getHSL(Hn),e.getHSL(Gn);var n=xn.lerp(Hn.h,Gn.h,t),i=xn.lerp(Hn.s,Gn.s,t),r=xn.lerp(Hn.l,Gn.l,t);return this.setHSL(n,i,r),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var qn,Yn={common:{diffuse:{value:new $n(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $n(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new $n(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Mn}},sprite:{diffuse:{value:new $n(15658734)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Mn}}},Jn={basic:{uniforms:Wn.merge([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.fog]),vertexShader:jn.meshbasic_vert,fragmentShader:jn.meshbasic_frag},lambert:{uniforms:Wn.merge([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.fog,Yn.lights,{emissive:{value:new $n(0)}}]),vertexShader:jn.meshlambert_vert,fragmentShader:jn.meshlambert_frag},phong:{uniforms:Wn.merge([Yn.common,Yn.specularmap,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.gradientmap,Yn.fog,Yn.lights,{emissive:{value:new $n(0)},specular:{value:new $n(1118481)},shininess:{value:30}}]),vertexShader:jn.meshphong_vert,fragmentShader:jn.meshphong_frag},standard:{uniforms:Wn.merge([Yn.common,Yn.envmap,Yn.aomap,Yn.lightmap,Yn.emissivemap,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.roughnessmap,Yn.metalnessmap,Yn.fog,Yn.lights,{emissive:{value:new $n(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag},matcap:{uniforms:Wn.merge([Yn.common,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,Yn.fog,{matcap:{value:null}}]),vertexShader:jn.meshmatcap_vert,fragmentShader:jn.meshmatcap_frag},points:{uniforms:Wn.merge([Yn.points,Yn.fog]),vertexShader:jn.points_vert,fragmentShader:jn.points_frag},dashed:{uniforms:Wn.merge([Yn.common,Yn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jn.linedashed_vert,fragmentShader:jn.linedashed_frag},depth:{uniforms:Wn.merge([Yn.common,Yn.displacementmap]),vertexShader:jn.depth_vert,fragmentShader:jn.depth_frag},normal:{uniforms:Wn.merge([Yn.common,Yn.bumpmap,Yn.normalmap,Yn.displacementmap,{opacity:{value:1}}]),vertexShader:jn.normal_vert,fragmentShader:jn.normal_frag},sprite:{uniforms:Wn.merge([Yn.sprite,Yn.fog]),vertexShader:jn.sprite_vert,fragmentShader:jn.sprite_frag},background:{uniforms:{t2D:{value:null}},vertexShader:jn.background_vert,fragmentShader:jn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jn.cube_vert,fragmentShader:jn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jn.equirect_vert,fragmentShader:jn.equirect_frag},distanceRGBA:{uniforms:Wn.merge([Yn.common,Yn.displacementmap,{referencePosition:{value:new _n},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jn.distanceRGBA_vert,fragmentShader:jn.distanceRGBA_frag},shadow:{uniforms:Wn.merge([Yn.lights,Yn.fog,{color:{value:new $n(0)},opacity:{value:1}}]),vertexShader:jn.shadow_vert,fragmentShader:jn.shadow_frag}};function Zn(){var e=null,t=!1,n=null;function i(r,a){!1!==t&&(n(r,a),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Kn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var o=e.FLOAT;return i instanceof Float32Array?o=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=e.UNSIGNED_SHORT:i instanceof Int16Array?o=e.SHORT:i instanceof Uint32Array?o=e.UNSIGNED_INT:i instanceof Int32Array?o=e.INT:i instanceof Int8Array?o=e.BYTE:i instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var r=n.array,a=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===a.count?e.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function Qn(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new _n,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new $n,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function ei(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||ei.DefaultOrder}function ti(){this.mask=1}Jn.physical={uniforms:Wn.merge([Jn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag},Object.assign(Qn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),ei.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ei.DefaultOrder="XYZ",Object.defineProperties(ei.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ei.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=xn.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],u=r[1],c=r[5],l=r[9],h=r[2],p=r[6],d=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new wn;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(qn=new En,function(e){return qn.setFromEuler(this),this.setFromQuaternion(qn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new _n(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(ti.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var ni,ii,ri,ai,oi=0;function si(){Object.defineProperty(this,"id",{value:oi++}),this.uuid=xn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=si.DefaultUp.clone();var e=new _n,t=new ei,n=new En,i=new _n(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new wn},normalMatrix:{value:new Mn}}),this.matrix=new wn,this.matrixWorld=new wn,this.matrixAutoUpdate=si.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ti,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}si.DefaultUp=new _n(0,1,0),si.DefaultMatrixAutoUpdate=!0,si.prototype=Object.assign(Object.create(j.prototype),{constructor:si,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ai=new En,function(e,t){return ai.setFromAxisAngle(e,t),this.quaternion.multiply(ai),this}),rotateOnWorldAxis:function(){var e=new En;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new _n(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new _n(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new _n(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new _n;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new _n(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new _n(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new _n(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(ri=new wn,function(e){return e.applyMatrix4(ri.getInverse(this.matrixWorld))}),lookAt:function(){var e=new En,t=new wn,n=new _n,i=new _n;return function(r,a,o){r.isVector3?n.copy(r):n.set(r,a,o);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(i,n,this.up):t.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new _n),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ni=new _n,ii=new _n,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new En),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ni,e,ii),e}),getWorldScale:function(){var e=new _n,t=new En;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new _n),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new _n),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var c=o[s];r(e.shapes,c)}else r(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(r(e.materials,this.material[s]));i.material=l}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),p=m(e.materials),d=m(e.textures),f=m(e.images);o=m(e.shapes);h.length>0&&(n.geometries=h),p.length>0&&(n.materials=p),d.length>0&&(n.textures=d),f.length>0&&(n.images=f),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}});var ui,ci,li=0;function hi(){Object.defineProperty(this,"id",{value:li+=2}),this.uuid=xn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function pi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function di(e,t,n){pi.call(this,new Int8Array(e),t,n)}function fi(e,t,n){pi.call(this,new Uint8Array(e),t,n)}function mi(e,t,n){pi.call(this,new Uint8ClampedArray(e),t,n)}function vi(e,t,n){pi.call(this,new Int16Array(e),t,n)}function gi(e,t,n){pi.call(this,new Uint16Array(e),t,n)}function yi(e,t,n){pi.call(this,new Int32Array(e),t,n)}function xi(e,t,n){pi.call(this,new Uint32Array(e),t,n)}function bi(e,t,n){pi.call(this,new Float32Array(e),t,n)}function wi(e,t,n){pi.call(this,new Float64Array(e),t,n)}function Ei(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function _i(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}hi.prototype=Object.assign(Object.create(j.prototype),{constructor:hi,isGeometry:!0,applyMatrix:function(e){for(var t=(new Mn).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new wn;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new wn;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new wn;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new wn;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new wn;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:(ci=new si,function(e){ci.lookAt(e),ci.updateMatrix(),this.applyMatrix(ci.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,u=void 0!==i.uv2?i.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=[],l=[],h=[],p=0,d=0;p<r.length;p+=3,d+=2)t.vertices.push(new _n(r[p],r[p+1],r[p+2])),void 0!==a&&c.push(new _n(a[p],a[p+1],a[p+2])),void 0!==o&&t.colors.push(new $n(o[p],o[p+1],o[p+2])),void 0!==s&&l.push(new bn(s[d],s[d+1])),void 0!==u&&h.push(new bn(u[d],u[d+1]));function f(e,n,i,r){var p=new Qn(e,n,i,void 0!==a?[c[e].clone(),c[n].clone(),c[i].clone()]:[],void 0!==o?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],r);t.faces.push(p),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[n].clone(),l[i].clone()]),void 0!==u&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[i].clone()])}var m=e.groups;if(m.length>0)for(p=0;p<m.length;p++)for(var v=m[p],g=v.start,y=(d=g,g+v.count);d<y;d+=3)void 0!==n?f(n[d],n[d+1],n[d+2],v.materialIndex):f(d,d+1,d+2,v.materialIndex);else if(void 0!==n)for(p=0;p<n.length;p+=3)f(n[p],n[p+1],n[p+2]);else for(p=0;p<r.length/3;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(ui=new _n,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ui).negate(),this.translate(ui.x,ui.y,ui.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new wn;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new _n,t=new _n,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new _n;if(e){var s,u,c,l=new _n,h=new _n;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],u=this.vertices[a.b],c=this.vertices[a.c],l.subVectors(c,u),h.subVectors(s,u),l.cross(h),o[a.a].add(l),o[a.b].add(l),o[a.c].add(l)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var p=(a=this.faces[i]).vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new hi;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)u=new _n,c={a:new _n,b:new _n,c:new _n},o.push(u),s.push(c)}var u,c,l=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new kn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,u=e.faces,c=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Mn).getNormalMatrix(t));for(var d=0,f=o.length;d<f;d++){var m=o[d].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=u.length;d<f;d++){var v,g,y,x=u[d],b=x.vertexNormals,w=x.vertexColors;(v=new Qn(x.a+r,x.b+r,x.c+r)).normal.copy(x.normal),void 0!==i&&v.normal.applyMatrix3(i).normalize();for(var E=0,_=b.length;E<_;E++)g=b[E].clone(),void 0!==i&&g.applyMatrix3(i).normalize(),v.vertexNormals.push(g);v.color.copy(x.color);for(E=0,_=w.length;E<_;E++)y=w[E],v.vertexColors.push(y.clone());v.materialIndex=x.materialIndex+n,s.push(v)}for(d=0,f=l.length;d<f;d++){var M=l[d],S=[];if(void 0!==M){for(E=0,_=M.length;E<_;E++)S.push(M[E].clone());c.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,o,s,u={},c=[],l=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(u[t]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[t]];var p=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=l[r.a],r.b=l[r.b],r.c=l[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var f=p[n];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new _n(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],u={},c=[],l={},h=[],p={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=_(x,0,0),x=_(x,1,!0),x=_(x,2,!1),x=_(x,3,f),x=_(x,4,m),x=_(x,5,v),x=_(x,6,g),x=_(x,7,y),o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(A(b[0]),A(b[1]),A(b[2]))}if(m&&o.push(M(d.normal)),v){var w=d.vertexNormals;o.push(M(w[0]),M(w[1]),M(w[2]))}if(g&&o.push(S(d.color)),y){var E=d.vertexColors;o.push(S(E[0]),S(E[1]),S(E[2]))}}function _(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function S(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=c.length,c.push(e.getHex()),l[t])}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=i,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new hi).copy(this)},copy:function(e){var t,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=l.length;i<r;i++){var h=l[i],p=[];for(a=0,o=h.length;a<o;a++){var d=h[a];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],i=0,r=v[t].vertexNormals.length;i<r;i++){var y=v[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],i=0,r=v[t].faceNormals.length;i<r;i++)g.faceNormals.push(v[t].faceNormals[i].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var E=e.lineDistances;for(t=0,n=E.length;t<n;t++)this.lineDistances.push(E[t]);var _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(pi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(pi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new $n),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new bn),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new _n),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Pn),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),di.prototype=Object.create(pi.prototype),di.prototype.constructor=di,fi.prototype=Object.create(pi.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(pi.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(pi.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(pi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(pi.prototype),yi.prototype.constructor=yi,xi.prototype=Object.create(pi.prototype),xi.prototype.constructor=xi,bi.prototype=Object.create(pi.prototype),bi.prototype.constructor=bi,wi.prototype=Object.create(pi.prototype),wi.prototype.constructor=wi,Object.assign(Ei.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var l,h=e.morphNormals,p=h.length;if(p>0){l=[];for(c=0;c<p;c++)l[c]={name:h[c].name,data:[]};this.morphTargets.normal=l}var d=e.skinIndices,f=e.skinWeights,m=d.length===i.length,v=f.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var E=g.color;this.colors.push(E,E,E)}if(!0===a)void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new bn,new bn,new bn));if(!0===o)void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new bn,new bn,new bn));for(var _=0;_<u;_++){var M=s[_].vertices;t[_].data.push(M[g.a],M[g.b],M[g.c])}for(_=0;_<p;_++){var S=h[_].vertexNormals[c];l[_].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Mi=1;function Si(){Object.defineProperty(this,"id",{value:Mi+=2}),this.uuid=xn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ai(e,t,n,i,r,a){hi.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Di(e,t,n,i,r,a)),this.mergeVertices()}function Di(e,t,n,i,r,a){Si.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var s=[],u=[],c=[],l=[],h=0,p=0;function d(e,t,n,i,r,a,d,f,m,v,g){var y,x,b=a/m,w=d/v,E=a/2,_=d/2,M=f/2,S=m+1,A=v+1,D=0,T=0,C=new _n;for(x=0;x<A;x++){var F=x*w-_;for(y=0;y<S;y++){var L=y*b-E;C[e]=L*i,C[t]=F*r,C[n]=M,u.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),l.push(y/m),l.push(1-x/v),D+=1}}for(x=0;x<v;x++)for(y=0;y<m;y++){var R=h+y+S*x,P=h+y+S*(x+1),I=h+(y+1)+S*(x+1),O=h+(y+1)+S*x;s.push(R,P,O),s.push(P,I,O),T+=6}o.addGroup(p,T,g),p+=T,h+=D}d("z","y","x",-1,-1,n,t,e,a,r,0),d("z","y","x",1,-1,n,t,-e,a,r,1),d("x","z","y",1,1,e,n,t,i,a,2),d("x","z","y",1,-1,e,n,-t,i,a,3),d("x","y","z",1,-1,e,t,n,i,r,4),d("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new bi(u,3)),this.addAttribute("normal",new bi(c,3)),this.addAttribute("uv",new bi(l,2))}function Ti(e,t,n,i){hi.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Ci(e,t,n,i)),this.mergeVertices()}function Ci(e,t,n,i){Si.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,a,o=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,c=Math.floor(i)||1,l=u+1,h=c+1,p=e/u,d=t/c,f=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*d-s;for(r=0;r<l;r++){var x=r*p-o;m.push(x,-y,0),v.push(0,0,1),g.push(r/u),g.push(1-a/c)}}for(a=0;a<c;a++)for(r=0;r<u;r++){var b=r+l*a,w=r+l*(a+1),E=r+1+l*(a+1),_=r+1+l*a;f.push(b,w,_),f.push(w,E,_)}this.setIndex(f),this.addAttribute("position",new bi(m,3)),this.addAttribute("normal",new bi(v,3)),this.addAttribute("uv",new bi(g,2))}Si.prototype=Object.assign(Object.create(j.prototype),{constructor:Si,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(_i(e)>65535?xi:gi)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new pi(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Mn).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new wn;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new wn;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new wn;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new wn;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new wn;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new si;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new _n;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new bi(3*t.vertices.length,3),i=new bi(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new bi(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new bi(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ei).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new pi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new pi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new pi(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new pi(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new pi(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[o],c=0,l=u.length;c<l;c++){var h=u[c],p=new bi(3*h.data.length,3);p.name=h.name,s.push(p.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var d=new bi(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new bi(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Nn,t=new _n;return function(){null===this.boundingSphere&&(this.boundingSphere=new kn);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,a=0,o=n.count;a<o;a++)t.x=n.getX(a),t.y=n.getY(a),t.z=n.getZ(a),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new pi(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,u,c=t.normal.array,l=new _n,h=new _n,p=new _n,d=new _n,f=new _n;if(e){var m=e.array;for(r=0,a=e.count;r<a;r+=3)o=3*m[r+0],s=3*m[r+1],u=3*m[r+2],l.fromArray(n,o),h.fromArray(n,s),p.fromArray(n,u),d.subVectors(p,h),f.subVectors(l,h),d.cross(f),c[o]+=d.x,c[o+1]+=d.y,c[o+2]+=d.z,c[s]+=d.x,c[s+1]+=d.y,c[s+2]+=d.z,c[u]+=d.x,c[u+1]+=d.y,c[u+2]+=d.z}else for(r=0,a=n.length;r<a;r+=9)l.fromArray(n,r),h.fromArray(n,r+3),p.fromArray(n,r+6),d.subVectors(p,h),f.subVectors(l,h),d.cross(f),c[r]=d.x,c[r+1]=d.y,c[r+2]=d.z,c[r+3]=d.x,c[r+4]=d.y,c[r+5]=d.z,c[r+6]=d.x,c[r+7]=d.y,c[r+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],o=a.array,s=0,u=a.itemSize*t;s<o.length;s++,u++)r[u]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new _n;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Si,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,o=r.itemSize,s=new a.constructor(t.length*o),u=0,c=0,l=0,h=t.length;l<h;l++){u=t[l]*o;for(var p=0;p<o;p++)s[c++]=a[u++]}e.addAttribute(i,new pi(s,o))}var d=this.groups;for(l=0,h=d.length;l<h;l++){var f=d[l];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var o=a[n];r=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new Si).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var u=[],c=s[t];for(n=0,i=c.length;n<i;n++)u.push(c[n].clone());this.morphAttributes[t]=u}var l=e.groups;for(n=0,i=l.length;n<i;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ai.prototype=Object.create(hi.prototype),Ai.prototype.constructor=Ai,Di.prototype=Object.create(Si.prototype),Di.prototype.constructor=Di,Ti.prototype=Object.create(hi.prototype),Ti.prototype.constructor=Ti,Ci.prototype=Object.create(Si.prototype),Ci.prototype.constructor=Ci;var Fi,Li,Ri,Pi,Ii,Oi,Bi,Ni,ki,Ui,zi,Hi,Gi=0;function Vi(){Object.defineProperty(this,"id",{value:Gi++}),this.uuid=xn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=de,this.side=oe,this.flatShading=!1,this.vertexColors=ce,this.opacity=1,this.transparent=!1,this.blendSrc=De,this.blendDst=Te,this.blendEquation=ye,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ne,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ji(e){Vi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Wi(e,t){this.origin=void 0!==e?e:new _n,this.direction=void 0!==t?t:new _n}function Xi(e,t,n){this.a=void 0!==e?e:new _n,this.b=void 0!==t?t:new _n,this.c=void 0!==n?n:new _n}function $i(e){Vi.call(this),this.type="MeshBasicMaterial",this.color=new $n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ge,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function qi(e,t){si.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Si,this.material=void 0!==t?t:new $i({color:16777215*Math.random()}),this.drawMode=an,this.updateMorphTargets()}function Yi(e,t,n,i){var r,a,o=new $n(0),s=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),u(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){u(o,s=e)},render:function(t,i,c,l){var h=i.background;null===h?u(o,s):h&&h.isColor&&(u(h,1),l=!0),(e.autoClear||l)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),h&&h.isCubeTexture?(void 0===a&&((a=new qi(new Di(1,1,1),new ji({uniforms:Wn.clone(Jn.cube.uniforms),vertexShader:Jn.cube.vertexShader,fragmentShader:Jn.cube.fragmentShader,side:se,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=h,t.push(a,a.geometry,a.material,0,null)):h&&h.isTexture&&(void 0===r&&((r=new qi(new Ci(2,2),new ji({uniforms:Wn.clone(Jn.background.uniforms),vertexShader:Jn.background.vertexShader,fragmentShader:Jn.background.fragmentShader,side:oe,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),n.update(r)),r.material.uniforms.t2D.value=h,t.push(r,r.geometry,r.material,0,null))}}}function Ji(e,t,n,i){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(a,o,s){var u;if(i.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,s,a.maxInstancedCount),n.update(s,r,a.maxInstancedCount)}}function Zi(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function Ki(){var e=this,t=null,n=0,i=!1,r=!1,a=new Un,o=new Mn,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var u=null!==t?t.length:0,c=null;if(0!==u){if(c=s.value,!0!==r||null===c){var l=i+4*u,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var p=0,d=i;p!==u;++p,d+=4)a.copy(t[p]).applyMatrix4(h,o),a.normal.toArray(c,d),c[d+3]=a.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,a){var o=0!==e.length||r||0!==n||i;return i=r,t=c(e,a,0),n=e.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,u()},this.setState=function(e,a,o,l,h,p){if(!i||null===e||0===e.length||r&&!o)r?c(null):u();else{var d=r?0:n,f=4*d,m=h.clippingState||null;s.value=m,m=c(e,l,f,p);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function Qi(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function er(e,t,n){var i={},r={};function a(e){var o=e.target,s=i[o.id];for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);o.removeEventListener("dispose",a),delete i[o.id];var c=r[s.id];c&&(t.remove(c),delete r[s.id]),n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Si).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var a in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[a],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var s=o[a],u=0,c=s.length;u<c;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var a,o=[],s=n.index,u=n.attributes;if(null!==s)for(var c=0,l=(a=s.array).length;c<l;c+=3){var h=a[c+0],p=a[c+1],d=a[c+2];o.push(h,p,p,d,d,h)}else for(c=0,l=(a=u.position.array).length/3-1;c<l;c+=3)h=c+0,p=c+1,d=c+2,o.push(h,p,p,d,d,h);return i=new(_i(o)>65535?xi:gi)(o,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}function tr(e,t,n,i){var r,a,o;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r)},this.renderInstances=function(s,u,c){var l;if(i.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,a,u*o,s.maxInstancedCount),n.update(c,r,s.maxInstancedCount)}}function nr(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(r=r||1,t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(n-2);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function ir(e,t){return Math.abs(t[1])-Math.abs(e[1])}function rr(e){var t={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,u=s.length,c=t[r.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];t[r.id]=c}var h=a.morphTargets&&r.morphAttributes.position,p=a.morphNormals&&r.morphAttributes.normal;for(l=0;l<u;l++)0!==(d=c[l])[1]&&(h&&r.removeAttribute("morphTarget"+l),p&&r.removeAttribute("morphNormal"+l));for(l=0;l<u;l++)(d=c[l])[0]=l,d[1]=s[l];for(c.sort(ir),l=0;l<8;l++){var d;if(d=c[l]){var f=d[0],m=d[1];if(m){h&&r.addAttribute("morphTarget"+l,h[f]),p&&r.addAttribute("morphNormal"+l,p[f]),n[l]=m;continue}}n[l]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ar(e,t){var n={};return{update:function(i){var r=t.render.frame,a=i.geometry,o=e.get(i,a);return n[o.id]!==r&&(a.isGeometry&&o.updateFromObject(i),e.update(o),n[o.id]=r),o},dispose:function(){n={}}}}function or(e,t,n,i,r,a,o,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:Je,Rn.call(this,e,t,n,i,r,a,o,s,u,c),this.flipY=!1}function sr(e,t,n,i){Rn.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=ot,this.minFilter=ot,this.generateMipmaps=!1,this.flipY=!1}Vi.prototype=Object.assign(Object.create(j.prototype),{constructor:Vi,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==de&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==oe&&(n.side=this.side),this.vertexColors!==ce&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ji.prototype=Object.create(Vi.prototype),ji.prototype.constructor=ji,ji.prototype.isShaderMaterial=!0,ji.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wn.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ji.prototype.toJSON=function(e){var t=Vi.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Wi.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new _n),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new _n;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new _n),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new _n;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Li=new _n,Ri=new _n,Pi=new _n,function(e,t,n,i){Li.copy(e).add(t).multiplyScalar(.5),Ri.copy(t).sub(e).normalize(),Pi.copy(this.origin).sub(Li);var r,a,o,s,u=.5*e.distanceTo(t),c=-this.direction.dot(Ri),l=Pi.dot(this.direction),h=-Pi.dot(Ri),p=Pi.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(a=c*l-h,s=u*d,(r=c*h-l)>=0)if(a>=-s)if(a<=s){var f=1/d;o=(r*=f)*(r+c*(a*=f)+2*l)+a*(c*r+a+2*h)+p}else a=u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+p;else a=-u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+p;else a<=-s?o=-(r=Math.max(0,-(-c*u+l)))*r+(a=r>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+p:a<=s?(r=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+p):o=-(r=Math.max(0,-(c*u+l)))*r+(a=r>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+p;else a=c>0?-u:u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Ri).multiplyScalar(a).add(Li),o}),intersectSphere:function(){var e=new _n;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=i-o,u=i+o;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(r=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),l>=0?(o=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(o=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:(Fi=new _n,function(e){return null!==this.intersectBox(e,Fi)}),intersectTriangle:function(){var e=new _n,t=new _n,n=new _n,i=new _n;return function(r,a,o,s,u){t.subVectors(a,r),n.subVectors(o,r),i.crossVectors(t,n);var c,l=this.direction.dot(i);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}e.subVectors(this.origin,r);var h=c*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=c*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>l)return null;var d=-c*e.dot(i);return d<0?null:this.at(d/l,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Xi,{getNormal:(Oi=new _n,function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new _n),i.subVectors(n,t),Oi.subVectors(e,t),i.cross(Oi);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),getBarycoord:function(){var e=new _n,t=new _n,n=new _n;return function(i,r,a,o,s){e.subVectors(o,r),t.subVectors(a,r),n.subVectors(i,r);var u=e.dot(e),c=e.dot(t),l=e.dot(n),h=t.dot(t),p=t.dot(n),d=u*h-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new _n),0===d)return s.set(-2,-1,-1);var f=1/d,m=(h*l-c*p)*f,v=(u*p-c*l)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new _n;return function(t,n,i,r){return Xi.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(Ii=new _n,function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,Ii),s.set(0,0),s.addScaledVector(r,Ii.x),s.addScaledVector(a,Ii.y),s.addScaledVector(o,Ii.z),s})}),Object.assign(Xi.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new _n,t=new _n;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new _n),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Xi.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new _n),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Xi.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Xi.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,i,r){return Xi.getUV(e,this.a,this.b,this.c,t,n,i,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Bi=new _n,Ni=new _n,ki=new _n,Ui=new _n,zi=new _n,Hi=new _n,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new _n);var n,i,r=this.a,a=this.b,o=this.c;Bi.subVectors(a,r),Ni.subVectors(o,r),Ui.subVectors(e,r);var s=Bi.dot(Ui),u=Ni.dot(Ui);if(s<=0&&u<=0)return t.copy(r);zi.subVectors(e,a);var c=Bi.dot(zi),l=Ni.dot(zi);if(c>=0&&l<=c)return t.copy(a);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(r).addScaledVector(Bi,n);Hi.subVectors(e,o);var p=Bi.dot(Hi),d=Ni.dot(Hi);if(d>=0&&p<=d)return t.copy(o);var f=p*u-s*d;if(f<=0&&u>=0&&d<=0)return i=u/(u-d),t.copy(r).addScaledVector(Ni,i);var m=c*d-p*l;if(m<=0&&l-c>=0&&p-d>=0)return ki.subVectors(o,a),i=(l-c)/(l-c+(p-d)),t.copy(a).addScaledVector(ki,i);var v=1/(m+f+h);return n=f*v,i=h*v,t.copy(r).addScaledVector(Bi,n).addScaledVector(Ni,i)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),$i.prototype=Object.create(Vi.prototype),$i.prototype.constructor=$i,$i.prototype.isMeshBasicMaterial=!0,$i.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},qi.prototype=Object.assign(Object.create(si.prototype),{constructor:qi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return si.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new wn,t=new Wi,n=new kn,i=new _n,r=new _n,a=new _n,o=new _n,s=new _n,u=new _n,c=new bn,l=new bn,h=new bn,p=new _n,d=new _n;function f(e,t,n,i,r,a,o,s){if(null===(t.side===se?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==ue,s)))return null;d.copy(s),d.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(d);return u<n.near||u>n.far?null:{distance:u,point:d.clone(),object:e}}function m(e,t,n,o,s,u,d,m,v){i.fromBufferAttribute(s,d),r.fromBufferAttribute(s,m),a.fromBufferAttribute(s,v);var g=f(e,t,n,o,i,r,a,p);if(g){u&&(c.fromBufferAttribute(u,d),l.fromBufferAttribute(u,m),h.fromBufferAttribute(u,v),g.uv=Xi.getUV(p,i,r,a,c,l,h,new bn));var y=new Qn(d,m,v);Xi.getNormal(i,r,a,y.normal),g.face=y}return g}return function(d,v){var g,y=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(b),!1!==d.ray.intersectsSphere(n)&&(e.getInverse(b),t.copy(d.ray).applyMatrix4(e),null===y.boundingBox||!1!==t.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,E,_,M,S,A,D,T,C,F=y.index,L=y.attributes.position,R=y.attributes.uv,P=y.groups,I=y.drawRange;if(null!==F)if(Array.isArray(x))for(M=0,A=P.length;M<A;M++)for(C=x[(T=P[M]).materialIndex],S=Math.max(T.start,I.start),D=Math.min(T.start+T.count,I.start+I.count);S<D;S+=3)w=F.getX(S),E=F.getX(S+1),_=F.getX(S+2),(g=m(this,C,d,t,L,R,w,E,_))&&(g.faceIndex=Math.floor(S/3),v.push(g));else for(M=Math.max(0,I.start),A=Math.min(F.count,I.start+I.count);M<A;M+=3)w=F.getX(M),E=F.getX(M+1),_=F.getX(M+2),(g=m(this,x,d,t,L,R,w,E,_))&&(g.faceIndex=Math.floor(M/3),v.push(g));else if(void 0!==L)if(Array.isArray(x))for(M=0,A=P.length;M<A;M++)for(C=x[(T=P[M]).materialIndex],S=Math.max(T.start,I.start),D=Math.min(T.start+T.count,I.start+I.count);S<D;S+=3)(g=m(this,C,d,t,L,R,w=S,E=S+1,_=S+2))&&(g.faceIndex=Math.floor(S/3),v.push(g));else for(M=Math.max(0,I.start),A=Math.min(L.count,I.start+I.count);M<A;M+=3)(g=m(this,x,d,t,L,R,w=M,E=M+1,_=M+2))&&(g.faceIndex=Math.floor(M/3),v.push(g))}else if(y.isGeometry){var O,B,N,k,U=Array.isArray(x),z=y.vertices,H=y.faces,G=y.faceVertexUvs[0];G.length>0&&(k=G);for(var V=0,j=H.length;V<j;V++){var W=H[V],X=U?x[W.materialIndex]:x;if(void 0!==X){if(O=z[W.a],B=z[W.b],N=z[W.c],!0===X.morphTargets){var $=y.morphTargets,q=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),a.set(0,0,0);for(var Y=0,J=$.length;Y<J;Y++){var Z=q[Y];if(0!==Z){var K=$[Y].vertices;i.addScaledVector(o.subVectors(K[W.a],O),Z),r.addScaledVector(s.subVectors(K[W.b],B),Z),a.addScaledVector(u.subVectors(K[W.c],N),Z)}}i.add(O),r.add(B),a.add(N),O=i,B=r,N=a}if(g=f(this,X,d,t,O,B,N,p)){if(k&&k[V]){var Q=k[V];c.copy(Q[0]),l.copy(Q[1]),h.copy(Q[2]),g.uv=Xi.getUV(p,O,B,N,c,l,h,new bn)}g.face=W,g.faceIndex=V,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),or.prototype=Object.create(Rn.prototype),or.prototype.constructor=or,or.prototype.isCubeTexture=!0,Object.defineProperty(or.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),sr.prototype=Object.create(Rn.prototype),sr.prototype.constructor=sr,sr.prototype.isDataTexture3D=!0;var ur=new Rn,cr=new sr,lr=new or;function hr(){this.seq=[],this.map={}}var pr=[],dr=[],fr=new Float32Array(16),mr=new Float32Array(9),vr=new Float32Array(4);function gr(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=pr[r];if(void 0===a&&(a=new Float32Array(r),pr[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function yr(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function xr(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function br(e,t){var n=dr[t];void 0===n&&(n=new Int32Array(t),dr[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function wr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Er(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function _r(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(yr(n,t))return;e.uniform2fv(this.addr,t),xr(n,t)}}function Mr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(yr(n,t))return;e.uniform3fv(this.addr,t),xr(n,t)}}function Sr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(yr(n,t))return;e.uniform4fv(this.addr,t),xr(n,t)}}function Ar(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),xr(n,t)}else{if(yr(n,i))return;vr.set(i),e.uniformMatrix2fv(this.addr,!1,vr),xr(n,i)}}function Dr(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),xr(n,t)}else{if(yr(n,i))return;mr.set(i),e.uniformMatrix3fv(this.addr,!1,mr),xr(n,i)}}function Tr(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),xr(n,t)}else{if(yr(n,i))return;fr.set(i),e.uniformMatrix4fv(this.addr,!1,fr),xr(n,i)}}function Cr(e,t,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||ur,r)}function Fr(e,t,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||cr,r)}function Lr(e,t,n){var i=this.cache,r=n.allocTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||lr,r)}function Rr(e,t){var n=this.cache;yr(n,t)||(e.uniform2iv(this.addr,t),xr(n,t))}function Pr(e,t){var n=this.cache;yr(n,t)||(e.uniform3iv(this.addr,t),xr(n,t))}function Ir(e,t){var n=this.cache;yr(n,t)||(e.uniform4iv(this.addr,t),xr(n,t))}function Or(e,t){var n=this.cache;yr(n,t)||(e.uniform1fv(this.addr,t),xr(n,t))}function Br(e,t){var n=this.cache;yr(n,t)||(e.uniform1iv(this.addr,t),xr(n,t))}function Nr(e,t){var n=this.cache,i=gr(t,this.size,2);yr(n,i)||(e.uniform2fv(this.addr,i),this.updateCache(i))}function kr(e,t){var n=this.cache,i=gr(t,this.size,3);yr(n,i)||(e.uniform3fv(this.addr,i),this.updateCache(i))}function Ur(e,t){var n=this.cache,i=gr(t,this.size,4);yr(n,i)||(e.uniform4fv(this.addr,i),this.updateCache(i))}function zr(e,t){var n=this.cache,i=gr(t,this.size,4);yr(n,i)||(e.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function Hr(e,t){var n=this.cache,i=gr(t,this.size,9);yr(n,i)||(e.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function Gr(e,t){var n=this.cache,i=gr(t,this.size,16);yr(n,i)||(e.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function Vr(e,t,n){var i=this.cache,r=t.length,a=br(n,r);!1===yr(i,a)&&(e.uniform1iv(this.addr,a),xr(i,a));for(var o=0;o!==r;++o)n.setTexture2D(t[o]||ur,a[o])}function jr(e,t,n){var i=this.cache,r=t.length,a=br(n,r);!1===yr(i,a)&&(e.uniform1iv(this.addr,a),xr(i,a));for(var o=0;o!==r;++o)n.setTextureCube(t[o]||lr,a[o])}function Wr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return wr;case 35664:return _r;case 35665:return Mr;case 35666:return Sr;case 35674:return Ar;case 35675:return Dr;case 35676:return Tr;case 35678:case 36198:return Cr;case 35679:return Fr;case 35680:return Lr;case 5124:case 35670:return Er;case 35667:case 35671:return Rr;case 35668:case 35672:return Pr;case 35669:case 35673:return Ir}}(t.type)}function Xr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Or;case 35664:return Nr;case 35665:return kr;case 35666:return Ur;case 35674:return zr;case 35675:return Hr;case 35676:return Gr;case 35678:return Vr;case 35680:return jr;case 5124:case 35670:return Br;case 35667:case 35671:return Rr;case 35668:case 35672:return Pr;case 35669:case 35673:return Ir}}(t.type)}function $r(e){this.id=e,hr.call(this)}Xr.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),xr(t,e)},$r.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}};var qr=/([\w\d_]+)(\])?(\[|\.)?/g;function Yr(e,t){e.seq.push(t),e.map[t.id]=t}function Jr(e,t,n){var i=e.name,r=i.length;for(qr.lastIndex=0;;){var a=qr.exec(i),o=qr.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s|=0),void 0===c||"["===c&&o+2===r){Yr(n,void 0===c?new Wr(s,e,t):new Xr(s,e,t));break}var l=n.map[s];void 0===l&&Yr(n,l=new $r(s)),n=l}}function Zr(e,t,n){hr.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=e.getActiveUniform(t,r);Jr(a,e.getUniformLocation(t,a.name),this)}}function Kr(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}Zr.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},Zr.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Zr.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},Zr.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var Qr=0;function ea(e){switch(e){case un:return["Linear","( value )"];case cn:return["sRGB","( value )"];case hn:return["RGBE","( value )"];case pn:return["RGBM","( value, 7.0 )"];case dn:return["RGBM","( value, 16.0 )"];case fn:return["RGBD","( value, 256.0 )"];case ln:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ta(e,t){var n=ea(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function na(e,t){var n;switch(t){case Xe:n="Linear";break;case $e:n="Reinhard";break;case qe:n="Uncharted2";break;case Ye:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ia(e){return""!==e}function ra(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function aa(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function oa(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){var n=jn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return oa(n)})}function sa(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r})}function ua(e,t,n,i,r,a,o){var s=e.context,u=i.defines,c=r.vertexShader,l=r.fragmentShader,h="SHADOWMAP_TYPE_BASIC";a.shadowMapType===re?h="SHADOWMAP_TYPE_PCF":a.shadowMapType===ae&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case Je:case Ze:p="ENVMAP_TYPE_CUBE";break;case tt:case nt:p="ENVMAP_TYPE_CUBE_UV";break;case Ke:case Qe:p="ENVMAP_TYPE_EQUIREC";break;case et:p="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Ze:case Qe:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Ge:f="ENVMAP_BLENDING_MULTIPLY";break;case Ve:f="ENVMAP_BLENDING_MIX";break;case je:f="ENVMAP_BLENDING_ADD"}}var m,v,g,y,x,b=e.gammaFactor>0?e.gammaFactor:1,w=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ia).join("\n")}(i.extensions,a,t),E=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(u),_=s.createProgram();if(i.isRawShaderMaterial?((m=[E].filter(ia).join("\n")).length>0&&(m+="\n"),(v=[w,E].filter(ia).join("\n")).length>0&&(v+="\n")):(m=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ia).join("\n"),v=[w,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==We?"#define TONE_MAPPING":"",a.toneMapping!==We?jn.tonemapping_pars_fragment:"",a.toneMapping!==We?na("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?jn.encodings_pars_fragment:"",a.mapEncoding?ta("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?ta("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?ta("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?ta("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(g="linearToOutputTexel",y=a.outputEncoding,x=ea(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+x[0]+x[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ia).join("\n")),c=aa(c=ra(c=oa(c),a),a),l=aa(l=ra(l=oa(l),a),a),c=sa(c),l=sa(l),o.isWebGL2&&!i.isRawShaderMaterial){var M=!1,S=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(S)&&null!==l.match(S)&&(M=!0,c=c.replace(S,""),l=l.replace(S,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",M?"":"out highp vec4 pc_fragColor;",M?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var A=m+c,D=v+l,T=Kr(s,s.VERTEX_SHADER,A),C=Kr(s,s.FRAGMENT_SHADER,D);s.attachShader(_,T),s.attachShader(_,C),void 0!==i.index0AttributeName?s.bindAttribLocation(_,0,i.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_);var F,L,R=s.getProgramInfoLog(_).trim(),P=s.getShaderInfoLog(T).trim(),I=s.getShaderInfoLog(C).trim(),O=!0,B=!0;return!1===s.getProgramParameter(_,s.LINK_STATUS)?(O=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(_,s.VALIDATE_STATUS),"gl.getProgramInfoLog",R,P,I)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==P&&""!==I||(B=!1),B&&(this.diagnostics={runnable:O,material:i,programLog:R,vertexShader:{log:P,prefix:m},fragmentShader:{log:I,prefix:v}}),s.deleteShader(T),s.deleteShader(C),this.getUniforms=function(){return void 0===F&&(F=new Zr(s,_,e)),F},this.getAttributes=function(){return void 0===L&&(L=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(s,_)),L},this.destroy=function(){s.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Qr++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=C,this}function ca(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=un,n===un&&t&&(n=ln),n}this.getParameters=function(t,i,a,s,u,c,l){var h=r[t.type],p=l.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(l):0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:o(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===tt||t.envMap.mapping===nt),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===yn,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===ue,flipSided:t.side===se,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(r,a,o,s){for(var u,c=0,l=i.length;c<l;c++){var h=i[c];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new ua(e,t,s,r,a,o,n),i.push(u)),u},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function la(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function ha(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function pa(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function da(){var e=[],t=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(r,a,o,s,u){var c=e[t];void 0===c?(c={id:r.id,object:r,geometry:a,material:o,program:o.program,renderOrder:r.renderOrder,z:s,group:u},e[t]=c):(c.id=r.id,c.object=r,c.geometry=a,c.material=o,c.program=o.program,c.renderOrder=r.renderOrder,c.z=s,c.group=u),(!0===o.transparent?i:n).push(c),t++},sort:function(){n.length>1&&n.sort(ha),i.length>1&&i.sort(pa)}}}function fa(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new da,e[i]=r),r},dispose:function(){e={}}}}function ma(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new _n,color:new $n,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"SpotLight":n={position:new _n,direction:new _n,color:new $n,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={position:new _n,color:new $n,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new _n,skyColor:new $n,groundColor:new $n};break;case"RectAreaLight":n={color:new $n,position:new _n,halfWidth:new _n,halfHeight:new _n}}return e[t.id]=n,n}}}var va,ga,ya,xa,ba,wa,Ea=0;function _a(){var e=new ma,t={id:Ea++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new _n,i=new wn,r=new wn;return{setup:function(a,o,s){for(var u=0,c=0,l=0,h=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=a.length;g<y;g++){var x=a[g],b=x.color,w=x.intensity,E=x.distance,_=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)u+=b.r*w,c+=b.g*w,l+=b.b*w;else if(x.isDirectionalLight){if((S=e.get(x)).color.copy(x.color).multiplyScalar(x.intensity),S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(v),S.shadow=x.castShadow,x.castShadow){var M=x.shadow;S.shadowBias=M.bias,S.shadowRadius=M.radius,S.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=_,t.directionalShadowMatrix[h]=x.shadow.matrix,t.directional[h]=S,h++}else if(x.isSpotLight)(S=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),S.color.copy(b).multiplyScalar(w),S.distance=E,S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(v),S.coneCos=Math.cos(x.angle),S.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),S.decay=x.decay,S.shadow=x.castShadow,x.castShadow&&(M=x.shadow,S.shadowBias=M.bias,S.shadowRadius=M.radius,S.shadowMapSize=M.mapSize),t.spotShadowMap[d]=_,t.spotShadowMatrix[d]=x.shadow.matrix,t.spot[d]=S,d++;else if(x.isRectAreaLight)(S=e.get(x)).color.copy(b).multiplyScalar(w),S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),r.identity(),i.copy(x.matrixWorld),i.premultiply(v),r.extractRotation(i),S.halfWidth.set(.5*x.width,0,0),S.halfHeight.set(0,.5*x.height,0),S.halfWidth.applyMatrix4(r),S.halfHeight.applyMatrix4(r),t.rectArea[f]=S,f++;else if(x.isPointLight)(S=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),S.color.copy(x.color).multiplyScalar(x.intensity),S.distance=x.distance,S.decay=x.decay,S.shadow=x.castShadow,x.castShadow&&(M=x.shadow,S.shadowBias=M.bias,S.shadowRadius=M.radius,S.shadowMapSize=M.mapSize,S.shadowCameraNear=M.camera.near,S.shadowCameraFar=M.camera.far),t.pointShadowMap[p]=_,t.pointShadowMatrix[p]=x.shadow.matrix,t.point[p]=S,p++;else if(x.isHemisphereLight){var S;(S=e.get(x)).direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(v),S.direction.normalize(),S.skyColor.copy(x.color).multiplyScalar(w),S.groundColor.copy(x.groundColor).multiplyScalar(w),t.hemi[m]=S,m++}}t.ambient[0]=u,t.ambient[1]=c,t.ambient[2]=l,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=p,t.hash.spotLength=d,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=o.length},state:t}}function Ma(){var e=new _a,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Sa(){var e={};return{get:function(t,n){var i;return void 0===e[t.id]?(i=new Ma,e[t.id]={},e[t.id][n.id]=i):void 0===e[t.id][n.id]?(i=new Ma,e[t.id][n.id]=i):i=e[t.id][n.id],i},dispose:function(){e={}}}}function Aa(e){Vi.call(this),this.type="MeshDepthMaterial",this.depthPacking=mn,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Da(e){Vi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new _n,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Ta(e,t,n){for(var i=new zn,r=new wn,a=new bn,o=new bn(n,n),s=new _n,u=new _n,c=1,l=2,h=1+(c|l),p=new Array(h),d=new Array(h),f={},m={0:se,1:oe,2:ue},v=[new _n(1,0,0),new _n(-1,0,0),new _n(0,0,1),new _n(0,0,-1),new _n(0,1,0),new _n(0,-1,0)],g=[new _n(0,1,0),new _n(0,1,0),new _n(0,1,0),new _n(0,1,0),new _n(0,0,1),new _n(0,0,-1)],y=[new Pn,new Pn,new Pn,new Pn,new Pn,new Pn],x=0;x!==h;++x){var b=0!=(x&c),w=0!=(x&l),E=new Aa({depthPacking:vn,morphTargets:b,skinning:w});p[x]=E;var _=new Da({morphTargets:b,skinning:w});d[x]=_}var M=this;function S(t,n,i,r,a,o){var s=t.geometry,u=null,h=p,v=t.customDepthMaterial;if(i&&(h=d,v=t.customDistanceMaterial),v)u=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,x=0;g&&(x|=c),y&&(x|=l),u=h[x]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=u.uuid,w=n.uuid,E=f[b];void 0===E&&(E={},f[b]=E);var _=E[w];void 0===_&&(_=u.clone(),E[w]=_),u=_}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,i&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(r),u.nearDistance=a,u.farDistance=o),u}function A(n,r,a,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var l=s.groups,h=0,p=l.length;h<p;h++){var d=l[h],f=c[d.materialIndex];if(f&&f.visible){var m=S(n,f,o,u,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,d)}}else if(c.visible){m=S(n,c,o,u,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)A(v[g],r,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=re,this.render=function(t,n,c){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var l,h=e.context,p=e.state;p.disable(h.BLEND),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=t.length;d<f;d++){var m=t[d],x=m.shadow,b=m&&m.isPointLight;if(void 0!==x){var w=x.camera;if(a.copy(x.mapSize),a.min(o),b){var E=a.x,_=a.y;y[0].set(2*E,_,E,_),y[1].set(0,_,E,_),y[2].set(3*E,_,E,_),y[3].set(E,_,E,_),y[4].set(3*E,0,E,_),y[5].set(E,0,E,_),a.x*=4,a.y*=2}if(null===x.map){var S={minFilter:ot,magFilter:ot,format:At};x.map=new In(a.x,a.y,S),x.map.texture.name=m.name+".shadowMap",w.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(m);var D=x.map,T=x.matrix;u.setFromMatrixPosition(m.matrixWorld),w.position.copy(u),b?(l=6,T.makeTranslation(-u.x,-u.y,-u.z)):(l=1,s.setFromMatrixPosition(m.target.matrixWorld),w.lookAt(s),w.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(w.projectionMatrix),T.multiply(w.matrixWorldInverse)),e.setRenderTarget(D),e.clear();for(var C=0;C<l;C++){if(b){s.copy(w.position),s.add(v[C]),w.up.copy(g[C]),w.lookAt(s),w.updateMatrixWorld();var F=y[C];p.viewport(F)}r.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),i.setFromMatrix(r),A(n,c,w,b)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}M.needsUpdate=!1}}}function Ca(e,t,n,i){var r=new function(){var t=!1,n=new Pn,i=null,r=new Pn(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?U(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Ie:e.depthFunc(e.NEVER);break;case Oe:e.depthFunc(e.ALWAYS);break;case Be:e.depthFunc(e.LESS);break;case Ne:e.depthFunc(e.LEQUAL);break;case ke:e.depthFunc(e.EQUAL);break;case Ue:e.depthFunc(e.GEQUAL);break;case ze:e.depthFunc(e.GREATER);break;case He:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,u=null,c=null;return{setTest:function(t){t?U(e.STENCIL_TEST):z(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&u===i||(e.stencilOp(t,n,i),o=t,s=n,u=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,u=null,c=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=new Uint8Array(s),c=new Uint8Array(s),l=new Uint8Array(s),h={},p=null,d=null,f=null,m=null,v=null,g=null,y=null,x=null,b=null,w=null,E=!1,_=null,M=null,S=null,A=null,D=null,T=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),C=!1,F=0,L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(F=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),C=F>=1):-1!==L.indexOf("OpenGL ES")&&(F=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),C=F>=2);var R=null,P={},I=new Pn,O=new Pn;function B(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<i;o++)e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return a}var N={};function k(n,r){(u[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),l[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),l[n]=r)}function U(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function z(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function H(t,i,r,a,o,s,u,c){if(t!==pe){if(f||(U(e.BLEND),f=!0),t===ge)o=o||i,s=s||r,u=u||a,i===v&&o===x||(e.blendEquationSeparate(n.convert(i),n.convert(o)),v=i,x=o),r===g&&a===y&&s===b&&u===w||(e.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(u)),g=r,y=a,b=s,w=u),m=t,E=null;else if(t!==m||c!==E){if(v===ye&&x===ye||(e.blendEquation(e.FUNC_ADD),v=ye,x=ye),c)switch(t){case de:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case fe:e.blendFunc(e.ONE,e.ONE);break;case me:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case ve:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case de:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case fe:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case me:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case ve:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,y=null,b=null,w=null,m=t,E=c}}else f&&(z(e.BLEND),f=!1)}function G(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function V(t){t!==te?(U(e.CULL_FACE),t!==M&&(t===ne?e.cullFace(e.BACK):t===ie?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),M=t}function j(t,n,i){t?(U(e.POLYGON_OFFSET_FILL),A===n&&D===i||(e.polygonOffset(n,i),A=n,D=i)):z(e.POLYGON_OFFSET_FILL)}function W(t){void 0===t&&(t=e.TEXTURE0+T-1),R!==t&&(e.activeTexture(t),R=t)}return N[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),N[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),U(e.DEPTH_TEST),a.setFunc(Ne),G(!1),V(ne),U(e.CULL_FACE),H(pe),{buffers:{color:r,depth:a,stencil:o},initAttributes:function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(e){k(e,0)},enableAttributeAndDivisor:k,disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==u[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:U,disable:z,getCompressedTextureFormats:function(){if(null===p&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)p.push(n[i]);return p},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:H,setMaterial:function(t,n){t.side===ue?z(e.CULL_FACE):U(e.CULL_FACE);var i=t.side===se;n&&(i=!i),G(i),t.blending===de&&!1===t.transparent?H(pe):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite),j(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:G,setCullFace:V,setLineWidth:function(t){t!==S&&(C&&e.lineWidth(t),S=t)},setPolygonOffset:j,setScissorTest:function(t){t?U(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:W,bindTexture:function(t,n){null===R&&W();var i=P[R];void 0===i&&(i={type:void 0,texture:void 0},P[R]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||N[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);h={},p=null,R=null,P={},d=null,m=null,_=null,M=null,r.reset(),a.reset(),o.reset()}}}function Fa(e,t,n,i,r,a,o){var s,u={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height),i}return e}function l(e){return xn.isPowerOfTwo(e.width)&&xn.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==ot&&e.minFilter!==ct}function p(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function d(t,n){if(!r.isWebGL2)return t;if(t===e.RED){if(n===e.FLOAT)return e.R32F;if(n===e.HALF_FLOAT)return e.R16F;if(n===e.UNSIGNED_BYTE)return e.R8}if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function f(t){return t===ot||t===st||t===ut?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}(n),n.isVideoTexture&&delete u[n.id],o.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}function g(t,r){var a=i.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;u[t]!==n&&(u[t]=n,e.update())}(t),t.version>0&&a.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void x(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function y(n,o,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,a.convert(o.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a.convert(o.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===rt&&o.wrapT===rt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(o.minFilter)),o.minFilter!==ot&&o.minFilter!==ct&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=t.get("EXT_texture_filter_anisotropic")){if(o.type===yt&&null===t.get("OES_texture_float_linear"))return;if(o.type===xt&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function x(t,i,u){var f;f=i.isDataTexture3D?e.TEXTURE_3D:e.TEXTURE_2D,void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),o.memory.textures++),n.activeTexture(e.TEXTURE0+u),n.bindTexture(f,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var v=c(i.image,r.maxTextureSize);(function(e){return!r.isWebGL2&&(e.wrapS!==rt||e.wrapT!==rt||e.minFilter!==ot&&e.minFilter!==ct)})(i)&&!1===l(v)&&(v=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=xn.floorPowerOfTwo(e.width),s.height=xn.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(v));var g=l(v),x=a.convert(i.format),b=a.convert(i.type),w=d(x,b);y(f,i,g);var E,_=i.mipmaps;if(i.isDepthTexture){if(w=e.DEPTH_COMPONENT,i.type===yt){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else r.isWebGL2&&(w=e.DEPTH_COMPONENT16);i.format===Ft&&w===e.DEPTH_COMPONENT&&i.type!==mt&&i.type!==gt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=mt,b=a.convert(i.type)),i.format===Lt&&(w=e.DEPTH_STENCIL,i.type!==_t&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=_t,b=a.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,w,v.width,v.height,0,x,b,null)}else if(i.isDataTexture)if(_.length>0&&g){for(var M=0,S=_.length;M<S;M++)E=_[M],n.texImage2D(e.TEXTURE_2D,M,w,E.width,E.height,0,x,b,E.data);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,v.width,v.height,0,x,b,v.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(M=0,S=_.length;M<S;M++)E=_[M],i.format!==At&&i.format!==St?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(e.TEXTURE_2D,M,w,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,M,w,E.width,E.height,0,x,b,E.data);t.__maxMipLevel=_.length-1}else if(i.isDataTexture3D)n.texImage3D(e.TEXTURE_3D,0,w,v.width,v.height,v.depth,0,x,b,v.data),t.__maxMipLevel=0;else if(_.length>0&&g){for(M=0,S=_.length;M<S;M++)E=_[M],n.texImage2D(e.TEXTURE_2D,M,w,x,b,E);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,x,b,v),t.__maxMipLevel=0;h(i,g)&&p(e.TEXTURE_2D,i,v.width,v.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function b(t,r,o,s){var u=a.convert(r.texture.format),c=a.convert(r.texture.type),l=d(u,c);n.texImage2D(s,0,l,r.width,r.height,0,u,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function w(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function E(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ft)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Lt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),w(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),w(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=g,this.setTexture3D=function(t,r){var a=i.get(t);t.version>0&&a.__version!==t.version?x(a,t,r):(n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_3D,a.__webglTexture))},this.setTextureCube=function(t,s){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",m),u.__image__webglTextureCube=e.createTexture(),o.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],x=0;x<6;x++)g[x]=f||v?v?t.image[x].image:t.image[x]:c(t.image[x],r.maxCubemapSize);var b=g[0],w=l(b),E=a.convert(t.format),_=a.convert(t.type),M=d(E,_);for(y(e.TEXTURE_CUBE_MAP,t,w),x=0;x<6;x++)if(f)for(var S,A=g[x].mipmaps,D=0,T=A.length;D<T;D++)S=A[D],t.format!==At&&t.format!==St?n.getCompressedTextureFormats().indexOf(E)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+x,D,M,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+x,D,M,S.width,S.height,0,E,_,S.data);else v?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+x,0,M,g[x].width,g[x].height,0,E,_,g[x].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+x,0,M,E,_,g[x]);u.__maxMipLevel=f?A.length-1:0,h(t,w)&&p(e.TEXTURE_CUBE_MAP,t,b.width,b.height),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",v),a.__webglTexture=e.createTexture(),o.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,u=l(t);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,u),c=0;c<6;c++)b(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);h(t.texture,u)&&p(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,a.__webglTexture),y(e.TEXTURE_2D,t.texture,u),b(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,u)&&p(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&E(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(h(r,l(t))){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(r).__webglTexture;n.bindTexture(a,o),p(a,r,t.width,t.height),n.bindTexture(a,null)}}}function La(e,t,n){return{convert:function(i){var r;if(i===it)return e.REPEAT;if(i===rt)return e.CLAMP_TO_EDGE;if(i===at)return e.MIRRORED_REPEAT;if(i===ot)return e.NEAREST;if(i===st)return e.NEAREST_MIPMAP_NEAREST;if(i===ut)return e.NEAREST_MIPMAP_LINEAR;if(i===ct)return e.LINEAR;if(i===lt)return e.LINEAR_MIPMAP_NEAREST;if(i===ht)return e.LINEAR_MIPMAP_LINEAR;if(i===pt)return e.UNSIGNED_BYTE;if(i===bt)return e.UNSIGNED_SHORT_4_4_4_4;if(i===wt)return e.UNSIGNED_SHORT_5_5_5_1;if(i===Et)return e.UNSIGNED_SHORT_5_6_5;if(i===dt)return e.BYTE;if(i===ft)return e.SHORT;if(i===mt)return e.UNSIGNED_SHORT;if(i===vt)return e.INT;if(i===gt)return e.UNSIGNED_INT;if(i===yt)return e.FLOAT;if(i===xt){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(i===Mt)return e.ALPHA;if(i===St)return e.RGB;if(i===At)return e.RGBA;if(i===Dt)return e.LUMINANCE;if(i===Tt)return e.LUMINANCE_ALPHA;if(i===Ft)return e.DEPTH_COMPONENT;if(i===Lt)return e.DEPTH_STENCIL;if(i===Rt)return e.RED;if(i===ye)return e.FUNC_ADD;if(i===xe)return e.FUNC_SUBTRACT;if(i===be)return e.FUNC_REVERSE_SUBTRACT;if(i===_e)return e.ZERO;if(i===Me)return e.ONE;if(i===Se)return e.SRC_COLOR;if(i===Ae)return e.ONE_MINUS_SRC_COLOR;if(i===De)return e.SRC_ALPHA;if(i===Te)return e.ONE_MINUS_SRC_ALPHA;if(i===Ce)return e.DST_ALPHA;if(i===Fe)return e.ONE_MINUS_DST_ALPHA;if(i===Le)return e.DST_COLOR;if(i===Re)return e.ONE_MINUS_DST_COLOR;if(i===Pe)return e.SRC_ALPHA_SATURATE;if((i===Pt||i===It||i===Ot||i===Bt)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(i===Pt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===It)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ot)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Bt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((i===Nt||i===kt||i===Ut||i===zt)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(i===Nt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===kt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ut)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===zt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Ht&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((i===Gt||i===Vt||i===jt||i===Wt||i===Xt||i===$t||i===qt||i===Yt||i===Jt||i===Zt||i===Kt||i===Qt||i===en||i===tn)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return i;if(i===we||i===Ee){if(n.isWebGL2){if(i===we)return e.MIN;if(i===Ee)return e.MAX}if(null!==(r=t.get("EXT_blend_minmax"))){if(i===we)return r.MIN_EXT;if(i===Ee)return r.MAX_EXT}}if(i===_t){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Ra(){si.call(this),this.type="Group"}function Pa(){si.call(this),this.type="Camera",this.matrixWorldInverse=new wn,this.projectionMatrix=new wn,this.projectionMatrixInverse=new wn}function Ia(e,t,n,i){Pa.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Oa(e){Ia.call(this),this.cameras=e||[]}function Ba(e){var t=this,n=null,i=null,r=null,a=[],o=new wn,s=new wn,u="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",y,!1));var c=new wn,l=new En,h=new _n,p=new Ia;p.bounds=new Pn(0,0,.5,1),p.layers.enable(1);var d=new Ia;d.bounds=new Pn(.5,0,.5,1),d.layers.enable(2);var f,m,v=new Oa([p,d]);function g(){return null!==n&&!0===n.isPresenting}function y(){if(g()){var i=n.getEyeParameters("left"),r=i.renderWidth,a=i.renderHeight;m=e.getPixelRatio(),f=e.getSize(),e.setDrawingBufferSize(2*r,a,1),w.start()}else t.enabled&&e.setDrawingBufferSize(f.width,f.height,m),w.stop()}v.layers.enable(1),v.layers.enable(2);var x=[];function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=t.length;n<r;n++){var a=t[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(i===e)return a;i++}}}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Ra).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),w.setContext(e)},this.setFrameOfReferenceType=function(e){u=e},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){var t="stage"===u?1.6:0;if(null===n)return e.position.set(0,t,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i),"stage"===u){var f=n.stageParameters;f?o.fromArray(f.sittingToStandingTransform):o.makeTranslation(0,t,0)}var m=i.pose,g=null!==r?r:e;if(g.matrix.copy(o),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==m.orientation&&(l.fromArray(m.orientation),g.quaternion.multiply(l)),null!==m.position&&(l.setFromRotationMatrix(o),h.fromArray(m.position),h.applyQuaternion(l),g.position.add(h)),g.updateMatrixWorld(),!1===n.isPresenting)return e;p.near=e.near,d.near=e.near,p.far=e.far,d.far=e.far,v.matrixWorld.copy(e.matrixWorld),v.matrixWorldInverse.copy(e.matrixWorldInverse),p.matrixWorldInverse.fromArray(i.leftViewMatrix),d.matrixWorldInverse.fromArray(i.rightViewMatrix),s.getInverse(o),"stage"===u&&(p.matrixWorldInverse.multiply(s),d.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(c.getInverse(y.matrixWorld),p.matrixWorldInverse.multiply(c),d.matrixWorldInverse.multiply(c)),p.matrixWorld.getInverse(p.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),p.projectionMatrix.fromArray(i.leftProjectionMatrix),d.projectionMatrix.fromArray(i.rightProjectionMatrix),v.projectionMatrix.copy(p.projectionMatrix);var w=n.getLayers();if(w.length){var E=w[0];null!==E.leftBounds&&4===E.leftBounds.length&&p.bounds.fromArray(E.leftBounds),null!==E.rightBounds&&4===E.rightBounds.length&&d.bounds.fromArray(E.rightBounds)}return function(){for(var e=0;e<a.length;e++){var t=a[e],n=b(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===n.id?0:1;x[e]!==n.buttons[r].pressed&&(x[e]=n.buttons[r].pressed,!0===x[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),v},this.getStandingMatrix=function(){return o},this.isPresenting=g;var w=new Zn;this.setAnimationLoop=function(e){w.setAnimationLoop(e)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",y)}}function Na(e){var t=e.context,n=null,i=null,r=null,a="stage",o=null,s=[],u=[];function c(){return null!==i&&null!==r}var l=new Ia;l.layers.enable(1),l.viewport=new Pn;var h=new Ia;h.layers.enable(2),h.viewport=new Pn;var p=new Oa([l,h]);function d(e){var t=s[u.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function f(){e.setFramebuffer(null),g.stop()}function m(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Ra).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(n){null!==(i=n)&&(i.addEventListener("select",d),i.addEventListener("selectstart",d),i.addEventListener("selectend",d),i.addEventListener("end",f),i.baseLayer=new XRWebGLLayer(i,t),i.requestFrameOfReference(a).then(function(t){r=t,e.setFramebuffer(i.baseLayer.framebuffer),g.setContext(i),g.start()}),u=i.getInputSources(),i.addEventListener("inputsourceschange",function(){u=i.getInputSources(),console.log(u)}))},this.getCamera=function(e){if(c()){var t=e.parent,n=p.cameras;m(p,t);for(var i=0;i<n.length;i++)m(n[i],t);e.matrixWorld.copy(p.matrixWorld);for(var r=e.children,a=(i=0,r.length);i<a;i++)r[i].updateMatrixWorld(!0);return p}return e},this.isPresenting=c;var v=null;var g=new Zn;g.setAnimationLoop(function(e,t){if(null!==(o=t.getDevicePose(r)))for(var n=i.baseLayer,a=t.views,c=0;c<a.length;c++){var l=a[c],h=n.getViewport(l),d=o.getViewMatrix(l),f=p.cameras[c];f.matrix.fromArray(d).getInverse(f.matrix),f.projectionMatrix.fromArray(l.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===c&&(p.matrix.copy(f.matrix),p.projectionMatrix.copy(f.projectionMatrix))}for(c=0;c<s.length;c++){var m=s[c],g=u[c];if(g){var y=t.getInputPose(g,r);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}v&&v(e)}),this.setAnimationLoop=function(e){v=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function ka(e){console.log("THREE.WebGLRenderer",Q);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Xe,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,f,m,v,g,y,x,b,w,E,_,M,S,A,D,T,C,F=this,L=!1,R=null,P=null,I=null,O=-1,B={geometry:null,program:null,wireframe:!1},N=null,k=null,U=new Pn,z=new Pn,H=null,G=0,V=t.width,j=t.height,W=1,X=new Pn(0,0,V,j),$=new Pn(0,0,V,j),q=!1,Y=new zn,J=new Ki,Z=!1,K=!1,ee=new wn,te=new _n;function ne(){return null===P?W:1}try{var ie={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c};if(t.addEventListener("webglcontextlost",ue,!1),t.addEventListener("webglcontextrestored",ce,!1),null===(p=n||t.getContext("webgl",ie)||t.getContext("experimental-webgl",ie)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function re(){d=new Qi(p),(f=new Zi(p,d,e)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),C=new La(p,d,f),(m=new Ca(p,d,C,f)).scissor(z.copy($).multiplyScalar(W)),m.viewport(U.copy(X).multiplyScalar(W)),v=new nr(p),g=new la,y=new Fa(p,d,m,g,f,C,v),x=new Kn(p),b=new er(p,x,v),w=new ar(b,v),A=new rr(p),E=new ca(F,d,f),_=new fa,M=new Sa,S=new Yi(F,m,w,s),D=new Ji(p,d,v,f),T=new tr(p,d,v,f),v.programs=E.programs,F.context=p,F.capabilities=f,F.extensions=d,F.properties=g,F.renderLists=_,F.state=m,F.info=v}re();var ae=null;"undefined"!=typeof navigator&&(ae="xr"in navigator?new Na(F):new Ba(F)),this.vr=ae;var oe=new Ta(F,w,f.maxTextureSize);function ue(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1,re()}function le(e){var t=e.target;t.removeEventListener("dispose",le),function(e){he(e),g.remove(e)}(t)}function he(e){var t=g.get(e).program;e.program=void 0,void 0!==t&&E.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(e){void 0!==e&&(W=e,this.setSize(V,j,!1))},this.getSize=function(){return{width:V,height:j}},this.setSize=function(e,n,i){ae.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(V=e,j=n,t.width=e*W,t.height=n*W,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:V*W,height:j*W}},this.setDrawingBufferSize=function(e,n,i){V=e,j=n,W=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return U},this.setViewport=function(e,t,n,i){X.set(e,j-t-i,n,i),m.viewport(U.copy(X).multiplyScalar(W))},this.setScissor=function(e,t,n,i){$.set(e,j-t-i,n,i),m.scissor(z.copy($).multiplyScalar(W))},this.setScissorTest=function(e){m.setScissorTest(q=e)},this.getClearColor=function(){return S.getClearColor()},this.setClearColor=function(){S.setClearColor.apply(S,arguments)},this.getClearAlpha=function(){return S.getClearAlpha()},this.setClearAlpha=function(){S.setClearAlpha.apply(S,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=p.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=p.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=p.STENCIL_BUFFER_BIT),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ue,!1),t.removeEventListener("webglcontextrestored",ce,!1),_.dispose(),M.dispose(),g.dispose(),w.dispose(),ae.dispose(),fe.stop()},this.renderBufferImmediate=function(e,t){m.initAttributes();var n=g.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var i=t.getAttributes();e.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,n.position),p.bufferData(p.ARRAY_BUFFER,e.positionArray,p.DYNAMIC_DRAW),m.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,p.FLOAT,!1,0,0)),e.hasNormals&&(p.bindBuffer(p.ARRAY_BUFFER,n.normal),p.bufferData(p.ARRAY_BUFFER,e.normalArray,p.DYNAMIC_DRAW),m.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,p.FLOAT,!1,0,0)),e.hasUvs&&(p.bindBuffer(p.ARRAY_BUFFER,n.uv),p.bufferData(p.ARRAY_BUFFER,e.uvArray,p.DYNAMIC_DRAW),m.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,p.FLOAT,!1,0,0)),e.hasColors&&(p.bindBuffer(p.ARRAY_BUFFER,n.color),p.bufferData(p.ARRAY_BUFFER,e.colorArray,p.DYNAMIC_DRAW),m.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,p.FLOAT,!1,0,0)),m.disableUnusedAttributes(),p.drawArrays(p.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){var o=r.isMesh&&r.normalMatrix.determinant()<0;m.setMaterial(i,o);var s=ye(e,t,i,r),u=!1;B.geometry===n.id&&B.program===s.id&&B.wireframe===(!0===i.wireframe)||(B.geometry=n.id,B.program=s.id,B.wireframe=!0===i.wireframe,u=!0),r.morphTargetInfluences&&(A.update(r,n,i,s),u=!0);var c,l=n.index,h=n.attributes.position,v=1;!0===i.wireframe&&(l=b.getWireframeAttribute(n),v=2);var g=D;null!==l&&(c=x.get(l),(g=T).setIndex(c)),u&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!f.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m.initAttributes();var i=n.attributes,r=t.getAttributes(),a=e.defaultAttributeValues;for(var o in r){var s=r[o];if(s>=0){var u=i[o];if(void 0!==u){var c=u.normalized,l=u.itemSize,h=x.get(u);if(void 0===h)continue;var v=h.buffer,g=h.type,y=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var b=u.data,w=b.stride,E=u.offset;b&&b.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):m.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,v),p.vertexAttribPointer(s,l,g,c,w*y,E*y)}else u.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):m.enableAttribute(s),p.bindBuffer(p.ARRAY_BUFFER,v),p.vertexAttribPointer(s,l,g,c,0,0)}else if(void 0!==a){var _=a[o];if(void 0!==_)switch(_.length){case 2:p.vertexAttrib2fv(s,_);break;case 3:p.vertexAttrib3fv(s,_);break;case 4:p.vertexAttrib4fv(s,_);break;default:p.vertexAttrib1fv(s,_)}}}}m.disableUnusedAttributes()}(i,s,n),null!==l&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==l?y=l.count:void 0!==h&&(y=h.count);var w=n.drawRange.start*v,E=n.drawRange.count*v,_=null!==a?a.start*v:0,M=null!==a?a.count*v:1/0,S=Math.max(w,_),C=Math.min(y,w+E,_+M)-1,F=Math.max(0,C-S+1);if(0!==F){if(r.isMesh)if(!0===i.wireframe)m.setLineWidth(i.wireframeLinewidth*ne()),g.setMode(p.LINES);else switch(r.drawMode){case an:g.setMode(p.TRIANGLES);break;case on:g.setMode(p.TRIANGLE_STRIP);break;case sn:g.setMode(p.TRIANGLE_FAN)}else if(r.isLine){var L=i.linewidth;void 0===L&&(L=1),m.setLineWidth(L*ne()),r.isLineSegments?g.setMode(p.LINES):r.isLineLoop?g.setMode(p.LINE_LOOP):g.setMode(p.LINE_STRIP)}else r.isPoints?g.setMode(p.POINTS):r.isSprite&&g.setMode(p.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,F):g.render(S,F)}},this.compile=function(e,t){(h=M.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)ge(t.material[n],e.fog,t);else ge(t.material,e.fog,t)})};var pe=null;var de,fe=new Zn;function me(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,u=o.geometry,c=void 0===i?o.material:i,l=o.group;if(n.isArrayCamera){k=n;for(var p=n.cameras,d=0,f=p.length;d<f;d++){var v=p[d];if(s.layers.test(v.layers)){if("viewport"in v)m.viewport(U.copy(v.viewport));else{var g=v.bounds,y=g.x*V,x=g.y*j,b=g.z*V,w=g.w*j;m.viewport(U.set(y,x,b,w).multiplyScalar(W))}h.setupLights(v),ve(s,t,v,u,c,l)}}}else k=null,ve(s,t,n,u,c,l)}}function ve(e,t,n,i,r,a){if(e.onBeforeRender(F,t,n,i,r,a),h=M.get(t,k||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){m.setMaterial(r);var o=ye(n,t.fog,r,e);B.geometry=null,B.program=null,B.wireframe=!1,function(e,t){e.render(function(e){F.renderBufferImmediate(e,t)})}(e,o)}else F.renderBufferDirect(n,t.fog,i,r,e,a);e.onAfterRender(F,t,n,i,r,a),h=M.get(t,k||n)}function ge(e,t,n){var i=g.get(e),r=h.state.lights,a=h.state.shadowsArray,o=i.lightsHash,s=r.state.hash,u=E.getParameters(e,r.state,a,t,J.numPlanes,J.numIntersection,n),c=E.getProgramCode(e,u),l=i.program,p=!0;if(void 0===l)e.addEventListener("dispose",le);else if(l.code!==c)he(e);else if(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength)o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,p=!1;else{if(void 0!==u.shaderID)return;p=!1}if(p){if(u.shaderID){var d=Jn[u.shaderID];i.shader={name:e.type,uniforms:Wn.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,F),c=E.getProgramCode(e,u),l=E.acquireProgram(e,i.shader,u,c),i.program=l,e.program=l}var f=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<F.maxMorphTargets;m++)f["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<F.maxMorphNormals;m++)f["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var v=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=J.numPlanes,i.numIntersection=J.numIntersection,v.clippingPlanes=J.uniform),i.fog=t,void 0===o&&(i.lightsHash=o={}),o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,e.lights&&(v.ambientLightColor.value=r.state.ambient,v.directionalLights.value=r.state.directional,v.spotLights.value=r.state.spot,v.rectAreaLights.value=r.state.rectArea,v.pointLights.value=r.state.point,v.hemisphereLights.value=r.state.hemi,v.directionalShadowMap.value=r.state.directionalShadowMap,v.directionalShadowMatrix.value=r.state.directionalShadowMatrix,v.spotShadowMap.value=r.state.spotShadowMap,v.spotShadowMatrix.value=r.state.spotShadowMatrix,v.pointShadowMap.value=r.state.pointShadowMap,v.pointShadowMatrix.value=r.state.pointShadowMatrix);var y=i.program.getUniforms(),x=Zr.seqWithValue(y.seq,v);i.uniformsList=x}function ye(e,t,n,i){G=0;var r=g.get(n),a=h.state.lights,o=r.lightsHash,s=a.state.hash;if(Z&&(K||e!==N)){var u=e===N&&n.id===O;J.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,u)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:(!n.lights||o.stateID===s.stateID&&o.directionalLength===s.directionalLength&&o.pointLength===s.pointLength&&o.spotLength===s.spotLength&&o.rectAreaLength===s.rectAreaLength&&o.hemiLength===s.hemiLength&&o.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===J.numPlanes&&r.numIntersection===J.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(ge(n,t,i),n.needsUpdate=!1);var c,l,d=!1,v=!1,y=!1,x=r.program,b=x.getUniforms(),w=r.shader.uniforms;if(m.useProgram(x.program)&&(d=!0,v=!0,y=!0),n.id!==O&&(O=n.id,v=!0),d||N!==e){if(b.setValue(p,"projectionMatrix",e.projectionMatrix),f.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),N!==e&&(N=e,v=!0,y=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var E=b.map.cameraPosition;void 0!==E&&E.setValue(p,te.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&b.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){b.setOptional(p,i,"bindMatrix"),b.setOptional(p,i,"bindMatrixInverse");var _=i.skeleton;if(_){var M=_.bones;if(f.floatVertexTextures){if(void 0===_.boneTexture){var S=Math.sqrt(4*M.length);S=xn.ceilPowerOfTwo(S),S=Math.max(S,4);var A=new Float32Array(S*S*4);A.set(_.boneMatrices);var D=new Bn(A,S,S,At,yt);D.needsUpdate=!0,_.boneMatrices=A,_.boneTexture=D,_.boneTextureSize=S}b.setValue(p,"boneTexture",_.boneTexture),b.setValue(p,"boneTextureSize",_.boneTextureSize)}else b.setOptional(p,_,"boneMatrices")}}return v&&(b.setValue(p,"toneMappingExposure",F.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",F.toneMappingWhitePoint),n.lights&&(l=y,(c=w).ambientLightColor.needsUpdate=l,c.directionalLights.needsUpdate=l,c.pointLights.needsUpdate=l,c.spotLights.needsUpdate=l,c.rectAreaLights.needsUpdate=l,c.hemisphereLights.needsUpdate=l),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,t),n.isMeshBasicMaterial?xe(w,n):n.isMeshLambertMaterial?(xe(w,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,n)):n.isMeshPhongMaterial?(xe(w,n),n.isMeshToonMaterial?function(e,t){be(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(w,n):be(w,n)):n.isMeshStandardMaterial?(xe(w,n),n.isMeshPhysicalMaterial?function(e,t){we(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(w,n):we(w,n)):n.isMeshMatcapMaterial?(xe(w,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===se&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===se&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDepthMaterial?(xe(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDistanceMaterial?(xe(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,n)):n.isMeshNormalMaterial?(xe(w,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===se&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===se&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(w,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*W,e.scale.value=.5*j,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(w,n):n.isShadowMaterial&&(w.color.value=n.color,w.opacity.value=n.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=Yn.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=Yn.LTC_2),Zr.upload(p,r.uniformsList,w,F)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Zr.upload(p,r.uniformsList,w,F),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",i.center),b.setValue(p,"modelViewMatrix",i.modelViewMatrix),b.setValue(p,"normalMatrix",i.normalMatrix),b.setValue(p,"modelMatrix",i.matrixWorld),x}function xe(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=g.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function be(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===se&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===se&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function we(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===se&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===se&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}fe.setAnimationLoop(function(e){ae.isPresenting()||pe&&pe(e)}),"undefined"!=typeof window&&fe.setContext(window),this.setAnimationLoop=function(e){pe=e,ae.setAnimationLoop(e),fe.start()},this.render=function(e,t,n,i){if(t&&t.isCamera){if(!L){B.geometry=null,B.program=null,B.wireframe=!1,O=-1,N=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ae.enabled&&(t=ae.getCamera(t)),(h=M.get(e,t)).init(),e.onBeforeRender(F,e,t,n),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Y.setFromMatrix(ee),K=this.localClippingEnabled,Z=J.init(this.clippingPlanes,K,t),(l=_.get(e,t)).init(),function e(t,n,i){if(!1===t.visible)return;var r=t.layers.test(n.layers);if(r)if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Y.intersectsSprite(t)){i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee);var a=w.update(t),o=t.material;l.push(t,a,o,te.z,null)}}else if(t.isImmediateRenderObject)i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee),l.push(t,null,t.material,te.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Y.intersectsObject(t))){i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee);var a=w.update(t),o=t.material;if(Array.isArray(o))for(var s=a.groups,u=0,c=s.length;u<c;u++){var p=s[u],d=o[p.materialIndex];d&&d.visible&&l.push(t,a,d,te.z,p)}else o.visible&&l.push(t,a,o,te.z,null)}var f=t.children;for(var u=0,c=f.length;u<c;u++)e(f[u],n,i)}(e,t,F.sortObjects),!0===F.sortObjects&&l.sort(),Z&&J.beginShadows();var r=h.state.shadowsArray;oe.render(r,e,t),h.setupLights(t),Z&&J.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),S.render(l,e,t,i);var a=l.opaque,o=l.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&me(a,e,t,s),o.length&&me(o,e,t,s)}else a.length&&me(a,e,t),o.length&&me(o,e,t);n&&y.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),e.onAfterRender(F,e,t),ae.enabled&&ae.submitFrame(),l=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=G;return e>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+f.maxTextures),G+=1,e},this.setTexture2D=(de=!1,function(e,t){e&&e.isWebGLRenderTarget&&(de||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),de=!0),e=e.texture),y.setTexture2D(e,t)}),this.setTexture3D=function(e,t){y.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),y.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,n):y.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){R=e},this.getRenderTarget=function(){return P},this.setRenderTarget=function(e){P=e,e&&void 0===g.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var t=R,n=!1;if(e){var i=g.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,U.copy(e.viewport),z.copy(e.scissor),H=e.scissorTest}else U.copy(X).multiplyScalar(W),z.copy($).multiplyScalar(W),H=q;if(I!==t&&(p.bindFramebuffer(p.FRAMEBUFFER,t),I=t),m.viewport(U),m.scissor(z),m.setScissorTest(H),n){var r=g.get(e.texture);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,a){if(e&&e.isWebGLRenderTarget){var o=g.get(e).__webglFramebuffer;if(o){var s=!1;o!==I&&(p.bindFramebuffer(p.FRAMEBUFFER,o),s=!0);try{var u=e.texture,c=u.format,l=u.type;if(c!==At&&C.convert(c)!==p.getParameter(p.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===pt||C.convert(l)===p.getParameter(p.IMPLEMENTATION_COLOR_READ_TYPE)||l===yt&&(f.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||l===xt&&(f.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&p.readPixels(t,n,i,r,C.convert(c),C.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(p.FRAMEBUFFER,I)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,a=C.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(p.TEXTURE_2D,n||0,a,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,a=t.image.height,o=C.convert(n.format),s=C.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(p.TEXTURE_2D,i||0,e.x,e.y,r,a,o,s,t.image.data):p.texSubImage2D(p.TEXTURE_2D,i||0,e.x,e.y,o,s,t.image)}}function Ua(e,t){this.name="",this.color=new $n(e),this.density=void 0!==t?t:25e-5}function za(e,t,n){this.name="",this.color=new $n(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ha(){si.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ga(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Va(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function ja(e){Vi.call(this),this.type="SpriteMaterial",this.color=new $n(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Wa(e){if(si.call(this),this.type="Sprite",void 0===va){va=new Si;var t=new Ga(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);va.setIndex([0,1,2,0,2,3]),va.addAttribute("position",new Va(t,3,0,!1)),va.addAttribute("uv",new Va(t,2,3,!1))}this.geometry=va,this.material=void 0!==e?e:new ja,this.center=new bn(.5,.5)}function Xa(){si.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function $a(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new wn)}}function qa(){si.call(this),this.type="Bone"}function Ya(e,t){qi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new wn,this.bindMatrixInverse=new wn;var n=new $a(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Ja(e){Vi.call(this),this.type="LineBasicMaterial",this.color=new $n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Za(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),si.call(this),this.type="Line",this.geometry=void 0!==e?e:new Si,this.material=void 0!==t?t:new Ja({color:16777215*Math.random()})}function Ka(e,t){Za.call(this,e,t),this.type="LineSegments"}function Qa(e,t){Za.call(this,e,t),this.type="LineLoop"}function eo(e){Vi.call(this),this.type="PointsMaterial",this.color=new $n(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function to(e,t){si.call(this),this.type="Points",this.geometry=void 0!==e?e:new Si,this.material=void 0!==t?t:new eo({color:16777215*Math.random()})}function no(e,t,n,i,r,a,o,s,u){Rn.call(this,e,t,n,i,r,a,o,s,u),this.generateMipmaps=!1}function io(e,t,n,i,r,a,o,s,u,c,l,h){Rn.call(this,null,a,o,s,u,c,i,r,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ro(e,t,n,i,r,a,o,s,u){Rn.call(this,e,t,n,i,r,a,o,s,u),this.needsUpdate=!0}function ao(e,t,n,i,r,a,o,s,u,c){if((c=void 0!==c?c:Ft)!==Ft&&c!==Lt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ft&&(n=mt),void 0===n&&c===Lt&&(n=_t),Rn.call(this,null,i,r,a,o,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==o?o:ot,this.minFilter=void 0!==s?s:ot,this.flipY=!1,this.generateMipmaps=!1}function oo(e){Si.call(this),this.type="WireframeGeometry";var t,n,i,r,a,o,s,u,c,l,h=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],u=v[f[(n+1)%3]],p[0]=Math.min(s,u),p[1]=Math.max(s,u),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]})}for(c in d)o=d[c],l=e.vertices[o.index1],h.push(l.x,l.y,l.z),l=e.vertices[o.index2],h.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,y,x,b,w,E,_;if(l=new _n,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),r=0,a=x.length;r<a;++r)for(t=w=(b=x[r]).start,i=w+b.count;t<i;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),u=y.getX(t+(n+1)%3),p[0]=Math.min(s,u),p[1]=Math.max(s,u),void 0===d[c=p[0]+","+p[1]]&&(d[c]={index1:p[0],index2:p[1]});for(c in d)o=d[c],l.fromBufferAttribute(g,o.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(g,o.index2),h.push(l.x,l.y,l.z)}else for(t=0,i=(g=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)E=3*t+n,l.fromBufferAttribute(g,E),h.push(l.x,l.y,l.z),_=3*t+(n+1)%3,l.fromBufferAttribute(g,_),h.push(l.x,l.y,l.z)}this.addAttribute("position",new bi(h,3))}function so(e,t,n){hi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new uo(e,t,n)),this.mergeVertices()}function uo(e,t,n){Si.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,a=[],o=[],s=[],u=[],c=new _n,l=new _n,h=new _n,p=new _n,d=new _n;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var v=r/t;e(v,m,l),o.push(l.x,l.y,l.z),v-1e-5>=0?(e(v-1e-5,m,h),p.subVectors(l,h)):(e(v+1e-5,m,h),p.subVectors(h,l)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(l,h)):(e(v,m+1e-5,h),d.subVectors(h,l)),c.crossVectors(p,d).normalize(),s.push(c.x,c.y,c.z),u.push(v,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var g=i*f+r,y=i*f+r+1,x=(i+1)*f+r+1,b=(i+1)*f+r;a.push(g,y,b),a.push(y,x,b)}this.setIndex(a),this.addAttribute("position",new bi(o,3)),this.addAttribute("normal",new bi(s,3)),this.addAttribute("uv",new bi(u,2))}function co(e,t,n,i){hi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new lo(e,t,n,i)),this.mergeVertices()}function lo(e,t,n,i){Si.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],a=[];function o(e,t,n,i){var r,a,o=Math.pow(2,i),u=[];for(r=0;r<=o;r++){u[r]=[];var c=e.clone().lerp(n,r/o),l=t.clone().lerp(n,r/o),h=o-r;for(a=0;a<=h;a++)u[r][a]=0===a&&r===o?c:c.clone().lerp(l,a/h)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var p=Math.floor(a/2);a%2==0?(s(u[r][p+1]),s(u[r+1][p]),s(u[r][p])):(s(u[r][p+1]),s(u[r+1][p+1]),s(u[r+1][p]))}}function s(e){r.push(e.x,e.y,e.z)}function u(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new _n,i=new _n,r=new _n,a=0;a<t.length;a+=3)u(t[a+0],n),u(t[a+1],i),u(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new _n,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new _n,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=l(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var e=new _n,t=new _n,n=new _n,i=new _n,o=new bn,s=new bn,u=new bn,h=0,p=0;h<r.length;h+=9,p+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[p+0],a[p+1]),s.set(a[p+2],a[p+3]),u.set(a[p+4],a[p+5]),i.copy(e).add(t).add(n).divideScalar(3);var d=l(i);c(o,p+0,e,d),c(s,p+2,t,d),c(u,p+4,n,d)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new bi(r,3)),this.addAttribute("normal",new bi(r.slice(),3)),this.addAttribute("uv",new bi(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function ho(e,t){hi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new po(e,t)),this.mergeVertices()}function po(e,t){lo.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fo(e,t){hi.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new mo(e,t)),this.mergeVertices()}function mo(e,t){lo.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function vo(e,t){hi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new go(e,t)),this.mergeVertices()}function go(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];lo.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yo(e,t){hi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new xo(e,t)),this.mergeVertices()}function xo(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];lo.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function bo(e,t,n,i,r,a){hi.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new wo(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function wo(e,t,n,i,r){Si.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,u=new _n,c=new _n,l=new bn,h=new _n,p=[],d=[],f=[],m=[];function v(r){h=e.getPointAt(r/t,h);var o=a.normals[r],l=a.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);c.x=v*o.x+m*l.x,c.y=v*o.y+m*l.y,c.z=v*o.z+m*l.z,c.normalize(),d.push(c.x,c.y,c.z),u.x=h.x+n*c.x,u.y=h.y+n*c.y,u.z=h.z+n*c.z,p.push(u.x,u.y,u.z)}}!function(){for(o=0;o<t;o++)v(o);v(!1===r?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=i;s++)l.x=o/t,l.y=s/i,f.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=i;o++){var e=(i+1)*(s-1)+(o-1),n=(i+1)*s+(o-1),r=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(e,n,a),m.push(n,r,a)}}()}(),this.setIndex(m),this.addAttribute("position",new bi(p,3)),this.addAttribute("normal",new bi(d,3)),this.addAttribute("uv",new bi(f,2))}function Eo(e,t,n,i,r,a,o){hi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _o(e,t,n,i,r,a)),this.mergeVertices()}function _o(e,t,n,i,r,a){Si.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,u=[],c=[],l=[],h=[],p=new _n,d=new _n,f=new _n,m=new _n,v=new _n,g=new _n,y=new _n;for(o=0;o<=n;++o){var x=o/n*r*Math.PI*2;for(D(x,r,a,e,f),D(x+.01,r,a,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var b=s/i*Math.PI*2,w=-t*Math.cos(b),E=t*Math.sin(b);p.x=f.x+(w*y.x+E*v.x),p.y=f.y+(w*y.y+E*v.y),p.z=f.z+(w*y.z+E*v.z),c.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),l.push(d.x,d.y,d.z),h.push(o/n),h.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var _=(i+1)*(s-1)+(o-1),M=(i+1)*s+(o-1),S=(i+1)*s+o,A=(i+1)*(s-1)+o;u.push(_,M,A),u.push(M,S,A)}function D(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);r.x=i*(2+u)*.5*a,r.y=i*(2+u)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new bi(c,3)),this.addAttribute("normal",new bi(l,3)),this.addAttribute("uv",new bi(h,2))}function Mo(e,t,n,i,r){hi.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new So(e,t,n,i,r)),this.mergeVertices()}function So(e,t,n,i,r){Si.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],u=[],c=[],l=[],h=new _n,p=new _n,d=new _n;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var f=o/i*r,m=a/n*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),u.push(p.x,p.y,p.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),d.subVectors(p,h).normalize(),c.push(d.x,d.y,d.z),l.push(o/i),l.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var v=(i+1)*a+o-1,g=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,x=(i+1)*a+o;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.addAttribute("position",new bi(u,3)),this.addAttribute("normal",new bi(c,3)),this.addAttribute("uv",new bi(l,2))}Aa.prototype=Object.create(Vi.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isMeshDepthMaterial=!0,Aa.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Da.prototype=Object.create(Vi.prototype),Da.prototype.constructor=Da,Da.prototype.isMeshDistanceMaterial=!0,Da.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ra.prototype=Object.assign(Object.create(si.prototype),{constructor:Ra,isGroup:!0}),Pa.prototype=Object.assign(Object.create(si.prototype),{constructor:Pa,isCamera:!0,copy:function(e,t){return si.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new _n),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){si.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Ia.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ia,isPerspectiveCamera:!0,copy:function(e,t){return Pa.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*xn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*xn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*xn.RAD2DEG*Math.atan(Math.tan(.5*xn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*xn.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(r+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=si.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Oa.prototype=Object.assign(Object.create(Ia.prototype),{constructor:Oa,isArrayCamera:!0}),Ua.prototype.isFogExp2=!0,Ua.prototype.clone=function(){return new Ua(this.color,this.density)},Ua.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},za.prototype.isFog=!0,za.prototype.clone=function(){return new za(this.color,this.near,this.far)},za.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ha.prototype=Object.assign(Object.create(si.prototype),{constructor:Ha,copy:function(e,t){return si.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=si.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Ga.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ga.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Va.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Va.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),ja.prototype=Object.create(Vi.prototype),ja.prototype.constructor=ja,ja.prototype.isSpriteMaterial=!0,ja.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},Wa.prototype=Object.assign(Object.create(si.prototype),{constructor:Wa,isSprite:!0,raycast:function(){var e=new _n,t=new _n,n=new _n,i=new bn,r=new bn,a=new wn,o=new _n,s=new _n,u=new _n,c=new bn,l=new bn,h=new bn;function p(e,t,n,o,s,u){i.subVectors(e,n).addScalar(.5).multiply(o),void 0!==s?(r.x=u*i.x-s*i.y,r.y=s*i.x+u*i.y):r.copy(i),e.copy(t),e.x+=r.x,e.y+=r.y,e.applyMatrix4(a)}return function(i,r){t.setFromMatrixScale(this.matrixWorld),a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var d,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),d=Math.sin(m));var v=this.center;p(o.set(-.5,-.5,0),n,v,t,d,f),p(s.set(.5,-.5,0),n,v,t,d,f),p(u.set(.5,.5,0),n,v,t,d,f),c.set(0,0),l.set(1,0),h.set(1,1);var g=i.ray.intersectTriangle(o,s,u,!1,e);if(null!==g||(p(s.set(-.5,.5,0),n,v,t,d,f),l.set(0,1),null!==(g=i.ray.intersectTriangle(o,u,s,!1,e)))){var y=i.ray.origin.distanceTo(e);y<i.near||y>i.far||r.push({distance:y,point:e.clone(),uv:Xi.getUV(e,o,s,u,c,l,h,new bn),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return si.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Xa.prototype=Object.assign(Object.create(si.prototype),{constructor:Xa,copy:function(e){si.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(ga=new _n,function(e,t){ga.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(ga);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new _n,t=new _n;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;a<o&&r>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<o;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=si.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign($a.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new wn;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(ya=new wn,xa=new wn,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:xa;ya.multiplyMatrices(o,t[r]),ya.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new $a(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),qa.prototype=Object.assign(Object.create(si.prototype),{constructor:qa,isBone:!0}),Ya.prototype=Object.assign(Object.create(qi.prototype),{constructor:Ya,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new qa,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Pn,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){qi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ja.prototype=Object.create(Vi.prototype),Ja.prototype.constructor=Ja,Ja.prototype.isLineBasicMaterial=!0,Ja.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Za.prototype=Object.assign(Object.create(si.prototype),{constructor:Za,isLine:!0,computeLineDistances:(ba=new _n,wa=new _n,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)ba.fromBufferAttribute(t,i-1),wa.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=ba.distanceTo(wa);e.addAttribute("lineDistance",new bi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this}),raycast:function(){var e=new wn,t=new Wi,n=new kn;return function(i,r){var a=i.linePrecision,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=a,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var u=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,l=new _n,h=new _n,p=new _n,d=new _n,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,v=o.attributes.position.array;if(null!==m)for(var g=m.array,y=0,x=g.length-1;y<x;y+=f){var b=g[y],w=g[y+1];if(l.fromArray(v,3*b),h.fromArray(v,3*w),!(t.distanceSqToSegment(l,h,d,p)>c))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,x=v.length/3-1;y<x;y+=f){if(l.fromArray(v,3*y),h.fromArray(v,3*y+3),!(t.distanceSqToSegment(l,h,d,p)>c))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var E=o.vertices,_=E.length;for(y=0;y<_-1;y+=f){var M;if(!(t.distanceSqToSegment(E[y],E[y+1],d,p)>c))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ka.prototype=Object.assign(Object.create(Za.prototype),{constructor:Ka,isLineSegments:!0,computeLineDistances:function(){var e=new _n,t=new _n;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],a=0,o=i.count;a<o;a+=2)e.fromBufferAttribute(i,a),t.fromBufferAttribute(i,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);n.addAttribute("lineDistance",new bi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t)}return this}}()}),Qa.prototype=Object.assign(Object.create(Za.prototype),{constructor:Qa,isLineLoop:!0}),eo.prototype=Object.create(Vi.prototype),eo.prototype.constructor=eo,eo.prototype.isPointsMaterial=!0,eo.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},to.prototype=Object.assign(Object.create(si.prototype),{constructor:to,isPoints:!0,raycast:function(){var e=new wn,t=new Wi,n=new kn;return function(i,r){var a=this,o=this.geometry,s=this.matrixWorld,u=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,h=new _n,p=new _n;if(o.isBufferGeometry){var d=o.index,f=o.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),w(h,y)}else{v=0;for(var x=f.length/3;v<x;v++)h.fromArray(f,3*v),w(h,v)}}else{var b=o.vertices;for(v=0,x=b.length;v<x;v++)w(b[v],v)}}function w(e,n){var o=t.distanceSqToPoint(e);if(o<l){t.closestPointToPoint(e,p),p.applyMatrix4(s);var u=i.ray.origin.distanceTo(p);if(u<i.near||u>i.far)return;r.push({distance:u,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),no.prototype=Object.assign(Object.create(Rn.prototype),{constructor:no,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),io.prototype=Object.create(Rn.prototype),io.prototype.constructor=io,io.prototype.isCompressedTexture=!0,ro.prototype=Object.create(Rn.prototype),ro.prototype.constructor=ro,ro.prototype.isCanvasTexture=!0,ao.prototype=Object.create(Rn.prototype),ao.prototype.constructor=ao,ao.prototype.isDepthTexture=!0,oo.prototype=Object.create(Si.prototype),oo.prototype.constructor=oo,so.prototype=Object.create(hi.prototype),so.prototype.constructor=so,uo.prototype=Object.create(Si.prototype),uo.prototype.constructor=uo,co.prototype=Object.create(hi.prototype),co.prototype.constructor=co,lo.prototype=Object.create(Si.prototype),lo.prototype.constructor=lo,ho.prototype=Object.create(hi.prototype),ho.prototype.constructor=ho,po.prototype=Object.create(lo.prototype),po.prototype.constructor=po,fo.prototype=Object.create(hi.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(lo.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(hi.prototype),vo.prototype.constructor=vo,go.prototype=Object.create(lo.prototype),go.prototype.constructor=go,yo.prototype=Object.create(hi.prototype),yo.prototype.constructor=yo,xo.prototype=Object.create(lo.prototype),xo.prototype.constructor=xo,bo.prototype=Object.create(hi.prototype),bo.prototype.constructor=bo,wo.prototype=Object.create(Si.prototype),wo.prototype.constructor=wo,Eo.prototype=Object.create(hi.prototype),Eo.prototype.constructor=Eo,_o.prototype=Object.create(Si.prototype),_o.prototype.constructor=_o,Mo.prototype=Object.create(hi.prototype),Mo.prototype.constructor=Mo,So.prototype=Object.create(Si.prototype),So.prototype.constructor=So;var Ao=function(e,t,n){n=n||2;var i,r,a,o,s,u,c,l=t&&t.length,h=l?t[0]*n:e.length,p=Do(e,0,h,n,!0),d=[];if(!p)return d;if(l&&(p=function(e,t,n,i){var r,a,o,s,u,c=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,(u=Do(e,o,s,i,!1))===u.next&&(u.steiner=!0),c.push(No(u));for(c.sort(Io),r=0;r<c.length;r++)Oo(c[r],n),n=To(n,n.next);return n}(e,t,p,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var f=n;f<h;f+=n)(s=e[f])<i&&(i=s),(u=e[f+1])<r&&(r=u),s>a&&(a=s),u>o&&(o=u);c=0!==(c=Math.max(a-i,o-r))?1/c:0}return Co(p,d,n,i,r,c),d};function Do(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=Wo(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=Wo(a,e[a],e[a+1],o);return o&&Ho(o,o.next)&&(Xo(o),o=o.next),o}function To(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Ho(i,i.next)&&0!==zo(i.prev,i,i.next))i=i.next;else{if(Xo(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Co(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Bo(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,u,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(u=c;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,a);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Lo(e,i,r,a):Fo(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Xo(e),e=u.next,c=u.next;else if((e=u)===c){o?1===o?Co(e=Ro(e,t,n),t,n,i,r,a,2):2===o&&Po(e,t,n,i,r,a):Co(To(e),t,n,i,r,a,1);break}}}function Fo(e){var t=e.prev,n=e,i=e.next;if(zo(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(ko(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&zo(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Lo(e,t,n,i){var r=e.prev,a=e,o=e.next;if(zo(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,u=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Bo(s,u,t,n,i),p=Bo(c,l,t,n,i),d=e.nextZ;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&ko(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&zo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&ko(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&zo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Ro(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Ho(r,a)&&Go(r,i,i.next,a)&&Vo(r,a)&&Vo(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Xo(i),Xo(i.next),i=e=a),i=i.next}while(i!==e);return i}function Po(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Uo(o,s)){var u=jo(o,s);return o=To(o,o.next),u=To(u,u.next),Co(o,t,n,i,r,a),void Co(u,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function Io(e,t){return e.x-t.x}function Oo(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var u,c=n,l=n.x,h=n.y,p=1/0;i=n.next;for(;i!==c;)r>=i.x&&i.x>=l&&r!==i.x&&ko(a<h?r:o,a,l,h,a<h?o:r,a,i.x,i.y)&&((u=Math.abs(a-i.y)/(r-i.x))<p||u===p&&i.x>n.x)&&Vo(i,e)&&(n=i,p=u),i=i.next;return n}(e,t)){var n=jo(t,e);To(n,n.next)}}function Bo(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function No(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function ko(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Uo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Go(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Vo(e,t)&&Vo(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function zo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ho(e,t){return e.x===t.x&&e.y===t.y}function Go(e,t,n,i){return!!(Ho(e,t)&&Ho(n,i)||Ho(e,i)&&Ho(n,t))||zo(e,t,n)>0!=zo(e,t,i)>0&&zo(n,i,e)>0!=zo(n,i,t)>0}function Vo(e,t){return zo(e.prev,e,e.next)<0?zo(e,t,e.next)>=0&&zo(e,e.prev,t)>=0:zo(e,t,e.prev)<0||zo(e,e.next,t)<0}function jo(e,t){var n=new $o(e.i,e.x,e.y),i=new $o(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Wo(e,t,n,i){var r=new $o(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $o(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var qo={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return qo.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Yo(e),Jo(n,e);var a=e.length;t.forEach(Yo);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Jo(n,t[o]);var s=Ao(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function Yo(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Jo(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Zo(e,t){hi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ko(e,t)),this.mergeVertices()}function Ko(e,t){Si.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:l-2,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Qo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var m,v,g,y,x,b,w,E,_=!1;d&&(m=d.getSpacedPoints(s),_=!0,c=!1,v=d.computeFrenetFrames(s,!1),g=new _n,y=new _n,x=new _n),c||(p=0,l=0,h=0);var M=e.extractPoints(o),S=M.shape,A=M.holes;if(!qo.isClockWise(S))for(S=S.reverse(),w=0,E=A.length;w<E;w++)b=A[w],qo.isClockWise(b)&&(A[w]=b.reverse());var D=qo.triangulateShape(S,A),T=S;for(w=0,E=A.length;w<E;w++)b=A[w],S=S.concat(b);function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var F,L,R,P,I,O,B=S.length,N=D.length;function k(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=o*o+s*s,h=o*c-s*u;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(l),d=Math.sqrt(u*u+c*c),f=t.x-s/p,m=t.y+o/p,v=((n.x-c/d-f)*c-(n.y+u/d-m)*u)/(o*c-s*u),g=(i=f+o*v-e.x)*i+(r=m+s*v-e.y)*r;if(g<=2)return new bn(i,r);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(l)):(i=o,r=s,a=Math.sqrt(l/2))}return new bn(i/a,r/a)}for(var U=[],z=0,H=T.length,G=H-1,V=z+1;z<H;z++,G++,V++)G===H&&(G=0),V===H&&(V=0),U[z]=k(T[z],T[G],T[V]);var j,W,X=[],$=U.concat();for(w=0,E=A.length;w<E;w++){for(b=A[w],j=[],z=0,G=(H=b.length)-1,V=z+1;z<H;z++,G++,V++)G===H&&(G=0),V===H&&(V=0),j[z]=k(b[z],b[G],b[V]);X.push(j),$=$.concat(j)}for(F=0;F<p;F++){for(R=F/p,P=l*Math.cos(R*Math.PI/2),L=h*Math.sin(R*Math.PI/2),z=0,H=T.length;z<H;z++)Y((I=C(T[z],U[z],L)).x,I.y,-P);for(w=0,E=A.length;w<E;w++)for(b=A[w],j=X[w],z=0,H=b.length;z<H;z++)Y((I=C(b[z],j[z],L)).x,I.y,-P)}for(L=h,z=0;z<B;z++)I=c?C(S[z],$[z],L):S[z],_?(y.copy(v.normals[0]).multiplyScalar(I.x),g.copy(v.binormals[0]).multiplyScalar(I.y),x.copy(m[0]).add(y).add(g),Y(x.x,x.y,x.z)):Y(I.x,I.y,0);for(W=1;W<=s;W++)for(z=0;z<B;z++)I=c?C(S[z],$[z],L):S[z],_?(y.copy(v.normals[W]).multiplyScalar(I.x),g.copy(v.binormals[W]).multiplyScalar(I.y),x.copy(m[W]).add(y).add(g),Y(x.x,x.y,x.z)):Y(I.x,I.y,u/s*W);for(F=p-1;F>=0;F--){for(R=F/p,P=l*Math.cos(R*Math.PI/2),L=h*Math.sin(R*Math.PI/2),z=0,H=T.length;z<H;z++)Y((I=C(T[z],U[z],L)).x,I.y,u+P);for(w=0,E=A.length;w<E;w++)for(b=A[w],j=X[w],z=0,H=b.length;z<H;z++)I=C(b[z],j[z],L),_?Y(I.x,I.y+m[s-1].y,m[s-1].x+P):Y(I.x,I.y,u+P)}function q(e,t){var n,i;for(z=e.length;--z>=0;){n=z,(i=z-1)<0&&(i=e.length-1);var r=0,a=s+2*p;for(r=0;r<a;r++){var o=B*r,u=B*(r+1);Z(t+n+o,t+i+o,t+i+u,t+n+u)}}}function Y(e,t,n){a.push(e),a.push(t),a.push(n)}function J(e,t,r){K(e),K(t),K(r);var a=i.length/3,o=f.generateTopUV(n,i,a-3,a-2,a-1);Q(o[0]),Q(o[1]),Q(o[2])}function Z(e,t,r,a){K(e),K(t),K(a),K(t),K(r),K(a);var o=i.length/3,s=f.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);Q(s[0]),Q(s[1]),Q(s[3]),Q(s[1]),Q(s[2]),Q(s[3])}function K(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function Q(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(c){var t=0,r=B*t;for(z=0;z<N;z++)J((O=D[z])[2]+r,O[1]+r,O[0]+r);for(r=B*(t=s+2*p),z=0;z<N;z++)J((O=D[z])[0]+r,O[1]+r,O[2]+r)}else{for(z=0;z<N;z++)J((O=D[z])[2],O[1],O[0]);for(z=0;z<N;z++)J((O=D[z])[0]+B*s,O[1]+B*s,O[2]+B*s)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(q(T,t),t+=T.length,w=0,E=A.length;w<E;w++)q(b=A[w],t),t+=b.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new bi(i,3)),this.addAttribute("uv",new bi(r,2)),this.computeVertexNormals()}Zo.prototype=Object.create(hi.prototype),Zo.prototype.constructor=Zo,Zo.prototype.toJSON=function(){var e=hi.prototype.toJSON.call(this);return es(this.parameters.shapes,this.parameters.options,e)},Ko.prototype=Object.create(Si.prototype),Ko.prototype.constructor=Ko,Ko.prototype.toJSON=function(){var e=Si.prototype.toJSON.call(this);return es(this.parameters.shapes,this.parameters.options,e)};var Qo={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],u=t[3*i+1],c=t[3*r],l=t[3*r+1];return[new bn(a,o),new bn(s,u),new bn(c,l)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*i],l=t[3*i+1],h=t[3*i+2],p=t[3*r],d=t[3*r+1],f=t[3*r+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-l)<.01?[new bn(o,1-u),new bn(c,1-h),new bn(p,1-f),new bn(m,1-g)]:[new bn(s,1-u),new bn(l,1-h),new bn(d,1-f),new bn(v,1-g)]}};function es(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function ts(e,t){hi.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ns(e,t)),this.mergeVertices()}function ns(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new hi;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ko.call(this,i,t),this.type="TextBufferGeometry"}function is(e,t,n,i,r,a,o){hi.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new rs(e,t,n,i,r,a,o)),this.mergeVertices()}function rs(e,t,n,i,r,a,o){Si.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,u,c=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),l=0,h=[],p=new _n,d=new _n,f=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],x=u/n;for(s=0;s<=t;s++){var b=s/t;p.x=-e*Math.cos(i+b*r)*Math.sin(a+x*o),p.y=e*Math.cos(a+x*o),p.z=e*Math.sin(i+b*r)*Math.sin(a+x*o),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(b,1-x),y.push(l++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var w=h[u][s+1],E=h[u][s],_=h[u+1][s],M=h[u+1][s+1];(0!==u||a>0)&&f.push(w,E,M),(u!==n-1||c<Math.PI)&&f.push(E,_,M)}this.setIndex(f),this.addAttribute("position",new bi(m,3)),this.addAttribute("normal",new bi(v,3)),this.addAttribute("uv",new bi(g,2))}function as(e,t,n,i,r,a){hi.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new os(e,t,n,i,r,a)),this.mergeVertices()}function os(e,t,n,i,r,a){Si.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,u,c=[],l=[],h=[],p=[],d=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new _n,v=new bn;for(s=0;s<=i;s++){for(u=0;u<=n;u++)o=r+u/n*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),l.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<i;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=o=u+g,x=o+n+1,b=o+n+2,w=o+1;c.push(y,x,w),c.push(x,b,w)}}this.setIndex(c),this.addAttribute("position",new bi(l,3)),this.addAttribute("normal",new bi(h,3)),this.addAttribute("uv",new bi(p,2))}function ss(e,t,n,i){hi.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new us(e,t,n,i)),this.mergeVertices()}function us(e,t,n,i){Si.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=xn.clamp(i,0,2*Math.PI);var r,a,o,s=[],u=[],c=[],l=1/t,h=new _n,p=new bn;for(a=0;a<=t;a++){var d=n+a*l*i,f=Math.sin(d),m=Math.cos(d);for(o=0;o<=e.length-1;o++)h.x=e[o].x*f,h.y=e[o].y,h.z=e[o].x*m,u.push(h.x,h.y,h.z),p.x=a/t,p.y=o/(e.length-1),c.push(p.x,p.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var v=r=o+a*e.length,g=r+e.length,y=r+e.length+1,x=r+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.addAttribute("position",new bi(u,3)),this.addAttribute("uv",new bi(c,2)),this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,w=new _n,E=new _n,_=new _n;for(r=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)w.x=b[o+0],w.y=b[o+1],w.z=b[o+2],E.x=b[r+o+0],E.y=b[r+o+1],E.z=b[r+o+2],_.addVectors(w,E).normalize(),b[o+0]=b[r+o+0]=_.x,b[o+1]=b[r+o+1]=_.y,b[o+2]=b[r+o+2]=_.z}}function cs(e,t){hi.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ls(e,t)),this.mergeVertices()}function ls(e,t){Si.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(e))c(e);else for(var u=0;u<e.length;u++)c(e[u]),this.addGroup(o,s,u),o+=s,s=0;function c(e){var o,u,c,l=i.length/3,h=e.extractPoints(t),p=h.shape,d=h.holes;if(!1===qo.isClockWise(p))for(p=p.reverse(),o=0,u=d.length;o<u;o++)c=d[o],!0===qo.isClockWise(c)&&(d[o]=c.reverse());var f=qo.triangulateShape(p,d);for(o=0,u=d.length;o<u;o++)c=d[o],p=p.concat(c);for(o=0,u=p.length;o<u;o++){var m=p[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,u=f.length;o<u;o++){var v=f[o],g=v[0]+l,y=v[1]+l,x=v[2]+l;n.push(g,y,x),s+=3}}this.setIndex(n),this.addAttribute("position",new bi(i,3)),this.addAttribute("normal",new bi(r,3)),this.addAttribute("uv",new bi(a,2))}function hs(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function ps(e,t){Si.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(xn.DEG2RAD*t),u=[0,0],c={},l=["a","b","c"];e.isBufferGeometry?(a=new hi).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)n=m[l[v]],i=m[l[(v+1)%3]],u[0]=Math.min(n,i),u[1]=Math.max(n,i),void 0===c[r=u[0]+","+u[1]]?c[r]={index1:u[0],index2:u[1],face1:d,face2:void 0}:c[r].face2=d;for(r in c){var g=c[r];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new bi(o,3))}function ds(e,t,n,i,r,a,o,s){hi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new fs(e,t,n,i,r,a,o,s)),this.mergeVertices()}function fs(e,t,n,i,r,a,o,s){Si.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var c=[],l=[],h=[],p=[],d=0,f=[],m=n/2,v=0;function g(n){var r,a,f,g=new bn,y=new _n,x=0,b=!0===n?e:t,w=!0===n?1:-1;for(a=d,r=1;r<=i;r++)l.push(0,m*w,0),h.push(0,w,0),p.push(.5,.5),d++;for(f=d,r=0;r<=i;r++){var E=r/i*s+o,_=Math.cos(E),M=Math.sin(E);y.x=b*M,y.y=m*w,y.z=b*_,l.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*_+.5,g.y=.5*M*w+.5,p.push(g.x,g.y),d++}for(r=0;r<i;r++){var S=a+r,A=f+r;!0===n?c.push(A,A+1,S):c.push(A+1,A,S),x+=3}u.addGroup(v,x,!0===n?1:2),v+=x}!function(){var a,g,y=new _n,x=new _n,b=0,w=(t-e)/n;for(g=0;g<=r;g++){var E=[],_=g/r,M=_*(t-e)+e;for(a=0;a<=i;a++){var S=a/i,A=S*s+o,D=Math.sin(A),T=Math.cos(A);x.x=M*D,x.y=-_*n+m,x.z=M*T,l.push(x.x,x.y,x.z),y.set(D,w,T).normalize(),h.push(y.x,y.y,y.z),p.push(S,1-_),E.push(d++)}f.push(E)}for(a=0;a<i;a++)for(g=0;g<r;g++){var C=f[g][a],F=f[g+1][a],L=f[g+1][a+1],R=f[g][a+1];c.push(C,F,R),c.push(F,L,R),b+=6}u.addGroup(v,b,0),v+=b}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.addAttribute("position",new bi(l,3)),this.addAttribute("normal",new bi(h,3)),this.addAttribute("uv",new bi(p,2))}function ms(e,t,n,i,r,a,o){ds.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function vs(e,t,n,i,r,a,o){fs.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function gs(e,t,n,i){hi.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new ys(e,t,n,i)),this.mergeVertices()}function ys(e,t,n,i){Si.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],u=[],c=[],l=new _n,h=new bn;for(s.push(0,0,0),u.push(0,0,1),c.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var p=n+a/t*i;l.x=e*Math.cos(p),l.y=e*Math.sin(p),s.push(l.x,l.y,l.z),u.push(0,0,1),h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,c.push(h.x,h.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new bi(s,3)),this.addAttribute("normal",new bi(u,3)),this.addAttribute("uv",new bi(c,2))}ts.prototype=Object.create(hi.prototype),ts.prototype.constructor=ts,ns.prototype=Object.create(Ko.prototype),ns.prototype.constructor=ns,is.prototype=Object.create(hi.prototype),is.prototype.constructor=is,rs.prototype=Object.create(Si.prototype),rs.prototype.constructor=rs,as.prototype=Object.create(hi.prototype),as.prototype.constructor=as,os.prototype=Object.create(Si.prototype),os.prototype.constructor=os,ss.prototype=Object.create(hi.prototype),ss.prototype.constructor=ss,us.prototype=Object.create(Si.prototype),us.prototype.constructor=us,cs.prototype=Object.create(hi.prototype),cs.prototype.constructor=cs,cs.prototype.toJSON=function(){var e=hi.prototype.toJSON.call(this);return hs(this.parameters.shapes,e)},ls.prototype=Object.create(Si.prototype),ls.prototype.constructor=ls,ls.prototype.toJSON=function(){var e=Si.prototype.toJSON.call(this);return hs(this.parameters.shapes,e)},ps.prototype=Object.create(Si.prototype),ps.prototype.constructor=ps,ds.prototype=Object.create(hi.prototype),ds.prototype.constructor=ds,fs.prototype=Object.create(Si.prototype),fs.prototype.constructor=fs,ms.prototype=Object.create(ds.prototype),ms.prototype.constructor=ms,vs.prototype=Object.create(fs.prototype),vs.prototype.constructor=vs,gs.prototype=Object.create(hi.prototype),gs.prototype.constructor=gs,ys.prototype=Object.create(Si.prototype),ys.prototype.constructor=ys;var xs=Object.freeze({WireframeGeometry:oo,ParametricGeometry:so,ParametricBufferGeometry:uo,TetrahedronGeometry:ho,TetrahedronBufferGeometry:po,OctahedronGeometry:fo,OctahedronBufferGeometry:mo,IcosahedronGeometry:vo,IcosahedronBufferGeometry:go,DodecahedronGeometry:yo,DodecahedronBufferGeometry:xo,PolyhedronGeometry:co,PolyhedronBufferGeometry:lo,TubeGeometry:bo,TubeBufferGeometry:wo,TorusKnotGeometry:Eo,TorusKnotBufferGeometry:_o,TorusGeometry:Mo,TorusBufferGeometry:So,TextGeometry:ts,TextBufferGeometry:ns,SphereGeometry:is,SphereBufferGeometry:rs,RingGeometry:as,RingBufferGeometry:os,PlaneGeometry:Ti,PlaneBufferGeometry:Ci,LatheGeometry:ss,LatheBufferGeometry:us,ShapeGeometry:cs,ShapeBufferGeometry:ls,ExtrudeGeometry:Zo,ExtrudeBufferGeometry:Ko,EdgesGeometry:ps,ConeGeometry:ms,ConeBufferGeometry:vs,CylinderGeometry:ds,CylinderBufferGeometry:fs,CircleGeometry:gs,CircleBufferGeometry:ys,BoxGeometry:Ai,BoxBufferGeometry:Di});function bs(e){Vi.call(this),this.type="ShadowMaterial",this.color=new $n(0),this.transparent=!0,this.setValues(e)}function ws(e){ji.call(this,e),this.type="RawShaderMaterial"}function Es(e){Vi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $n(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gn,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _s(e){Es.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ms(e){Vi.call(this),this.type="MeshPhongMaterial",this.color=new $n(16777215),this.specular=new $n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gn,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ge,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ss(e){Ms.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function As(e){Vi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gn,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ds(e){Vi.call(this),this.type="MeshLambertMaterial",this.color=new $n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ge,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ts(e){if(Vi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $n(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gn,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e),null===this.matcap){var t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle="#fff",n.fillRect(0,0,1,1),this.matcap=new THREE.CanvasTexture(t)}}function Cs(e){Ja.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}bs.prototype=Object.create(Vi.prototype),bs.prototype.constructor=bs,bs.prototype.isShadowMaterial=!0,bs.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this},ws.prototype=Object.create(ji.prototype),ws.prototype.constructor=ws,ws.prototype.isRawShaderMaterial=!0,Es.prototype=Object.create(Vi.prototype),Es.prototype.constructor=Es,Es.prototype.isMeshStandardMaterial=!0,Es.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_s.prototype=Object.create(Es.prototype),_s.prototype.constructor=_s,_s.prototype.isMeshPhysicalMaterial=!0,_s.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ms.prototype=Object.create(Vi.prototype),Ms.prototype.constructor=Ms,Ms.prototype.isMeshPhongMaterial=!0,Ms.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ss.prototype=Object.create(Ms.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isMeshToonMaterial=!0,Ss.prototype.copy=function(e){return Ms.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},As.prototype=Object.create(Vi.prototype),As.prototype.constructor=As,As.prototype.isMeshNormalMaterial=!0,As.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ds.prototype=Object.create(Vi.prototype),Ds.prototype.constructor=Ds,Ds.prototype.isMeshLambertMaterial=!0,Ds.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ts.prototype=Object.create(Vi.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshMatcapMaterial=!0,Ts.prototype.copy=function(e){return Vi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Cs.prototype=Object.create(Ja.prototype),Cs.prototype.constructor=Cs,Cs.prototype.isLineDashedMaterial=!0,Cs.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Fs=Object.freeze({ShadowMaterial:bs,SpriteMaterial:ja,RawShaderMaterial:ws,ShaderMaterial:ji,PointsMaterial:eo,MeshPhysicalMaterial:_s,MeshStandardMaterial:Es,MeshPhongMaterial:Ms,MeshToonMaterial:Ss,MeshNormalMaterial:As,MeshLambertMaterial:Ds,MeshDepthMaterial:Aa,MeshDistanceMaterial:Da,MeshBasicMaterial:$i,MeshMatcapMaterial:Ts,LineDashedMaterial:Cs,LineBasicMaterial:Ja,Material:Vi}),Ls={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Rs(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Ps=new Rs,Is={};function Os(e){this.manager=void 0!==e?e:Ps}function Bs(e){this.manager=void 0!==e?e:Ps,this._parser=null}function Ns(e){this.manager=void 0!==e?e:Ps,this._parser=null}function ks(e){this.manager=void 0!==e?e:Ps}function Us(e){this.manager=void 0!==e?e:Ps}function zs(e){this.manager=void 0!==e?e:Ps}function Hs(){this.type="Curve",this.arcLengthDivisions=200}function Gs(e,t,n,i,r,a,o,s){Hs.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Vs(e,t,n,i,r,a){Gs.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function js(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,u*=o,c*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}Object.assign(Os.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ls.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(void 0===Is[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],u=!!o[2],c=o[3];c=window.decodeURIComponent(c),u&&(c=window.atob(c));try{var l,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),d=0;d<c.length;d++)p[d]=c.charCodeAt(d);l="blob"===h?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;l=f.parseFromString(c,s);break;case"json":l=JSON.parse(c);break;default:l=c}window.setTimeout(function(){t&&t(l),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{Is[e]=[],Is[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Ls.add(e,n);var i=Is[e];if(delete Is[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Is[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Is[e];delete Is[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),m.addEventListener("abort",function(t){var n=Is[e];delete Is[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(e),m}Is[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Bs.prototype,{load:function(e,t,n,i){var r=this,a=[],o=new io;o.image=a;var s=new Os(this.manager);function u(u){s.load(e[u],function(e){var n=r._parser(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(o.minFilter=ct),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,h=e.length;l<h;++l)u(l);else s.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ct),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,i);return o},setPath:function(e){return this.path=e,this}}),Object.assign(Ns.prototype,{load:function(e,t,n,i){var r=this,a=new Bn,o=new Os(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:rt,a.wrapT=void 0!==n.wrapT?n.wrapT:rt,a.magFilter=void 0!==n.magFilter?n.magFilter:ct,a.minFilter=void 0!==n.minFilter?n.minFilter:ht,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=ct),a.needsUpdate=!0,t&&t(a,n))},n,i),a}}),Object.assign(ks.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ls.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Ls.add(e,this),t&&t(this),r.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Us.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new or,a=new ks(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var u=0;u<e.length;++u)s(u);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(zs.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new Rn,a=new ks(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){r.image=n;var i=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?St:At,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Hs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=i[r=Math.floor(s+(u-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){u=r;break}u=r-1}if(i[r=u]===n)return r/(a-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,a=new _n,o=[],s=[],u=[],c=new _n,l=new wn;for(n=0;n<=e;n++)i=n/e,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new _n,u[0]=new _n;var h=Number.MAX_VALUE,p=Math.abs(o[0].x),d=Math.abs(o[0].y),f=Math.abs(o[0].z);for(p<=h&&(h=p,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),f<=h&&a.set(0,0,1),c.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],c),u[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(o[n-1],o[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(xn.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(c,r))),u[n].crossVectors(o[n],s[n]);if(!0===t)for(r=Math.acos(xn.clamp(s[0].dot(s[e]),-1,1)),r/=e,o[0].dot(c.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(o[n],r*n)),u[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Gs.prototype=Object.create(Hs.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isEllipseCurve=!0,Gs.prototype.getPoint=function(e,t){for(var n=t||new bn,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,p=u-this.aY;s=h*c-p*l+this.aX,u=h*l+p*c+this.aY}return n.set(s,u)},Gs.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Gs.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Gs.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Vs.prototype=Object.create(Gs.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isArcCurve=!0;var Ws=new _n,Xs=new js,$s=new js,qs=new js;function Ys(e,t,n,i){Hs.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Js(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function Zs(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Ks(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Qs(e,t,n,i){Hs.call(this),this.type="CubicBezierCurve",this.v0=e||new bn,this.v1=t||new bn,this.v2=n||new bn,this.v3=i||new bn}function eu(e,t,n,i){Hs.call(this),this.type="CubicBezierCurve3",this.v0=e||new _n,this.v1=t||new _n,this.v2=n||new _n,this.v3=i||new _n}function tu(e,t){Hs.call(this),this.type="LineCurve",this.v1=e||new bn,this.v2=t||new bn}function nu(e,t){Hs.call(this),this.type="LineCurve3",this.v1=e||new _n,this.v2=t||new _n}function iu(e,t,n){Hs.call(this),this.type="QuadraticBezierCurve",this.v0=e||new bn,this.v1=t||new bn,this.v2=n||new bn}function ru(e,t,n){Hs.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new _n,this.v1=t||new _n,this.v2=n||new _n}function au(e){Hs.call(this),this.type="SplineCurve",this.points=e||[]}Ys.prototype=Object.create(Hs.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isCatmullRomCurve3=!0,Ys.prototype.getPoint=function(e,t){var n,i,r,a,o=t||new _n,s=this.points,u=s.length,c=(u-(this.closed?0:1))*e,l=Math.floor(c),h=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/u)+1)*u:0===h&&l===u-1&&(l=u-2,h=1),this.closed||l>0?n=s[(l-1)%u]:(Ws.subVectors(s[0],s[1]).add(s[0]),n=Ws),i=s[l%u],r=s[(l+1)%u],this.closed||l+2<u?a=s[(l+2)%u]:(Ws.subVectors(s[u-1],s[u-2]).add(s[u-1]),a=Ws),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(i),p),f=Math.pow(i.distanceToSquared(r),p),m=Math.pow(r.distanceToSquared(a),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),Xs.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,d,f,m),$s.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,d,f,m),qs.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,d,f,m)}else"catmullrom"===this.curveType&&(Xs.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),$s.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),qs.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(Xs.calc(h),$s.calc(h),qs.calc(h)),o},Ys.prototype.copy=function(e){Hs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ys.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ys.prototype.fromJSON=function(e){Hs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new _n).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Qs.prototype=Object.create(Hs.prototype),Qs.prototype.constructor=Qs,Qs.prototype.isCubicBezierCurve=!0,Qs.prototype.getPoint=function(e,t){var n=t||new bn,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ks(e,i.x,r.x,a.x,o.x),Ks(e,i.y,r.y,a.y,o.y)),n},Qs.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Qs.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Qs.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},eu.prototype=Object.create(Hs.prototype),eu.prototype.constructor=eu,eu.prototype.isCubicBezierCurve3=!0,eu.prototype.getPoint=function(e,t){var n=t||new _n,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Ks(e,i.x,r.x,a.x,o.x),Ks(e,i.y,r.y,a.y,o.y),Ks(e,i.z,r.z,a.z,o.z)),n},eu.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},eu.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},eu.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},tu.prototype=Object.create(Hs.prototype),tu.prototype.constructor=tu,tu.prototype.isLineCurve=!0,tu.prototype.getPoint=function(e,t){var n=t||new bn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},tu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},tu.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},tu.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},tu.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},tu.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},nu.prototype=Object.create(Hs.prototype),nu.prototype.constructor=nu,nu.prototype.isLineCurve3=!0,nu.prototype.getPoint=function(e,t){var n=t||new _n;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},nu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},nu.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},nu.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},nu.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},iu.prototype=Object.create(Hs.prototype),iu.prototype.constructor=iu,iu.prototype.isQuadraticBezierCurve=!0,iu.prototype.getPoint=function(e,t){var n=t||new bn,i=this.v0,r=this.v1,a=this.v2;return n.set(Zs(e,i.x,r.x,a.x),Zs(e,i.y,r.y,a.y)),n},iu.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},iu.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},iu.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ru.prototype=Object.create(Hs.prototype),ru.prototype.constructor=ru,ru.prototype.isQuadraticBezierCurve3=!0,ru.prototype.getPoint=function(e,t){var n=t||new _n,i=this.v0,r=this.v1,a=this.v2;return n.set(Zs(e,i.x,r.x,a.x),Zs(e,i.y,r.y,a.y),Zs(e,i.z,r.z,a.z)),n},ru.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ru.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ru.prototype.fromJSON=function(e){return Hs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},au.prototype=Object.create(Hs.prototype),au.prototype.constructor=au,au.prototype.isSplineCurve=!0,au.prototype.getPoint=function(e,t){var n=t||new bn,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],u=i[a],c=i[a>i.length-2?i.length-1:a+1],l=i[a>i.length-3?i.length-1:a+2];return n.set(Js(o,s.x,u.x,c.x,l.x),Js(o,s.y,u.y,c.y,l.y)),n},au.prototype.copy=function(e){Hs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},au.prototype.toJSON=function(){var e=Hs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},au.prototype.fromJSON=function(e){Hs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new bn).fromArray(i))}return this};var ou=Object.freeze({ArcCurve:Vs,CatmullRomCurve3:Ys,CubicBezierCurve:Qs,CubicBezierCurve3:eu,EllipseCurve:Gs,LineCurve:tu,LineCurve3:nu,QuadraticBezierCurve:iu,QuadraticBezierCurve3:ru,SplineCurve:au});function su(){Hs.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function uu(e){su.call(this),this.type="Path",this.currentPoint=new bn,e&&this.setFromPoints(e)}function cu(e){uu.call(this,e),this.uuid=xn.generateUUID(),this.type="Shape",this.holes=[]}function lu(e,t){si.call(this),this.type="Light",this.color=new $n(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function hu(e,t,n){lu.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(si.DefaultUp),this.updateMatrix(),this.groundColor=new $n(t)}function pu(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new bn(512,512),this.map=null,this.matrix=new wn}function du(){pu.call(this,new Ia(50,1,.5,500))}function fu(e,t,n,i,r,a){lu.call(this,e,t),this.type="SpotLight",this.position.copy(si.DefaultUp),this.updateMatrix(),this.target=new si,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new du}function mu(e,t,n,i){lu.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new pu(new Ia(90,1,.5,500))}function vu(e,t,n,i,r,a){Pa.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function gu(){pu.call(this,new vu(-5,5,5,-5,.5,500))}function yu(e,t){lu.call(this,e,t),this.type="DirectionalLight",this.position.copy(si.DefaultUp),this.updateMatrix(),this.target=new si,this.shadow=new gu}function xu(e,t){lu.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function bu(e,t,n,i){lu.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}su.prototype=Object.assign(Object.create(Hs.prototype),{constructor:su,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new tu(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Hs.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Hs.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Hs.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new ou[i.type]).fromJSON(i))}return this}}),uu.prototype=Object.assign(Object.create(su.prototype),{constructor:uu,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new tu(this.currentPoint.clone(),new bn(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new iu(this.currentPoint.clone(),new bn(e,t),new bn(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var o=new Qs(this.currentPoint.clone(),new bn(e,t),new bn(n,i),new bn(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(e){var t=new au([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,o,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+u,t+c,n,i,r,a,o,s)},absellipse:function(e,t,n,i,r,a,o,s){var u=new Gs(e,t,n,i,r,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return su.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=su.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return su.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),cu.prototype=Object.assign(Object.create(uu.prototype),{constructor:cu,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){uu.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=uu.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){uu.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new uu).fromJSON(i))}return this}}),lu.prototype=Object.assign(Object.create(si.prototype),{constructor:lu,isLight:!0,copy:function(e){return si.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=si.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),hu.prototype=Object.assign(Object.create(lu.prototype),{constructor:hu,isHemisphereLight:!0,copy:function(e){return lu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(pu.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),du.prototype=Object.assign(Object.create(pu.prototype),{constructor:du,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*xn.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),fu.prototype=Object.assign(Object.create(lu.prototype),{constructor:fu,isSpotLight:!0,copy:function(e){return lu.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),mu.prototype=Object.assign(Object.create(lu.prototype),{constructor:mu,isPointLight:!0,copy:function(e){return lu.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),vu.prototype=Object.assign(Object.create(Pa.prototype),{constructor:vu,isOrthographicCamera:!0,copy:function(e,t){return Pa.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=l*(this.view.offsetX/u))+l*(this.view.width/u),s=(o-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=si.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),gu.prototype=Object.assign(Object.create(pu.prototype),{constructor:gu}),yu.prototype=Object.assign(Object.create(lu.prototype),{constructor:yu,isDirectionalLight:!0,copy:function(e){return lu.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),xu.prototype=Object.assign(Object.create(lu.prototype),{constructor:xu,isAmbientLight:!0}),bu.prototype=Object.assign(Object.create(lu.prototype),{constructor:bu,isRectAreaLight:!0,copy:function(e){return lu.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=lu.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var wu={arraySlice:function(e,t,n){return wu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,u=0;u!==t;++u)r[o++]=e[s+u];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}};function Eu(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function _u(e,t,n,i){Eu.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Mu(e,t,n,i){Eu.call(this,e,t,n,i)}function Su(e,t,n,i){Eu.call(this,e,t,n,i)}function Au(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wu.convertArray(t,this.TimeBufferType),this.values=wu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Du(e,t,n){Au.call(this,e,t,n)}function Tu(e,t,n,i){Au.call(this,e,t,n,i)}function Cu(e,t,n,i){Au.call(this,e,t,n,i)}function Fu(e,t,n,i){Eu.call(this,e,t,n,i)}function Lu(e,t,n,i){Au.call(this,e,t,n,i)}function Ru(e,t,n,i){Au.call(this,e,t,n,i)}function Pu(e,t,n,i){Au.call(this,e,t,n,i)}function Iu(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=xn.generateUUID(),this.duration<0&&this.resetDuration()}function Ou(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cu;case"vector":case"vector2":case"vector3":case"vector4":return Pu;case"color":return Tu;case"quaternion":return Lu;case"bool":case"boolean":return Du;case"string":return Ru}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];wu.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Bu(e){this.manager=void 0!==e?e:Ps,this.textures={}}function Nu(e){this.manager=void 0!==e?e:Ps}Object.assign(Eu.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Eu.prototype,{beforeStart_:Eu.prototype.copySampleValue_,afterEnd_:Eu.prototype.copySampleValue_}),_u.prototype=Object.assign(Object.create(Eu.prototype),{constructor:_u,DefaultSettings_:{endingStart:rn,endingEnd:rn},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=e,o=2*t-n;break;case 2402:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*n-t;break;case 2402:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(i-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,b=0;b!==o;++b)r[b]=v*a[c+b]+g*a[u+b]+y*a[s+b]+x*a[l+b];return r}}),Mu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Mu,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(i-t),l=1-c,h=0;h!==o;++h)r[h]=a[u+h]*l+a[s+h]*c;return r}}),Su.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Su,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Au,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:wu.convertArray(e.times,Array),values:wu.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(Au.prototype,{constructor:Au,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Su(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Mu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new _u(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=wu.arraySlice(n,r,a),this.values=wu.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&wu.isTypedArray(i)){o=0;for(var u=i.length;o!==u;++o){var c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=e.length-1,o=1;o<a;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==u[0]))if(i)s=!0;else for(var c=o*n,l=c-n,h=c+n,p=0;p!==n;++p){var d=t[c+p];if(d!==t[l+p]||d!==t[h+p]){s=!0;break}}if(s){if(o!==r){e[r]=e[o];var f=o*n,m=r*n;for(p=0;p!==n;++p)t[m+p]=t[f+p]}++r}}if(a>0){e[r]=e[a];for(f=a*n,m=r*n,p=0;p!==n;++p)t[m+p]=t[f+p];++r}return r!==e.length&&(this.times=wu.arraySlice(e,0,r),this.values=wu.arraySlice(t,0,r*n)),this}}),Du.prototype=Object.assign(Object.create(Au.prototype),{constructor:Du,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Tu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Tu,ValueTypeName:"color"}),Cu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Cu,ValueTypeName:"number"}),Fu.prototype=Object.assign(Object.create(Eu.prototype),{constructor:Fu,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=(n-t)/(i-t),c=s+o;s!==c;s+=4)En.slerpFlat(r,0,a,s-o,a,s,u);return r}}),Lu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Lu,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Fu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ru.prototype=Object.assign(Object.create(Au.prototype),{constructor:Ru,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Pu.prototype=Object.assign(Object.create(Au.prototype),{constructor:Pu,ValueTypeName:"vector"}),Object.assign(Iu,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(Ou(n[r]).scale(i));return new Iu(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,a=n.length;r!==a;++r)t.push(Au.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],u=[];s.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);var c=wu.getKeyframeOrder(s);s=wu.sortedArray(s,1,c),u=wu.sortedArray(u,1,c),i||0!==s[0]||(s.push(r),u.push(u[0])),a.push(new Cu(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new Iu(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(r);if(u&&u.length>1){var c=i[h=u[1]];c||(i[h]=c=[]),c.push(s)}}var l=[];for(var h in i)l.push(Iu.CreateFromMorphTargetSequence(h,i[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];wu.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var p=0;p<c[h].morphTargets.length;p++)l[c[h].morphTargets[p]]=-1;for(var d in l){var f=[],m=[];for(p=0;p!==c[h].morphTargets.length;++p){var v=c[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Cu(".morphTargetInfluence["+d+"]",f,m))}a=l.length*(o||1)}else{var g=".bones["+t[u].name+"]";n(Pu,g+".position",c,"pos",i),n(Lu,g+".quaternion",c,"rot",i),n(Pu,g+".scale",c,"scl",i)}}return 0===i.length?null:new Iu(r,a,i)}}),Object.assign(Iu.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Bu.prototype,{load:function(e,t,n,i){var r=this;new Os(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Fs[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new $n).setHex(a.value);break;case"v2":i.uniforms[r].value=(new bn).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new _n).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new Pn).fromArray(a.value);break;case"m4":i.uniforms[r].value=(new wn).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new bn).fromArray(o)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Nu.prototype,{load:function(e,t,n,i){var r=this;new Os(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new Si,n=e.data.index;if(void 0!==n){var i=new ku[n.type](n.array);t.setIndex(new pi(i,1))}var r=e.data.attributes;for(var a in r){var o=r[a];i=new ku[o.type](o.array);t.addAttribute(a,new pi(i,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var u=0,c=s.length;u!==c;++u){var l=s[u];t.addGroup(l.start,l.count,l.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var p=new _n;void 0!==h.center&&p.fromArray(h.center),t.boundingSphere=new kn(p,h.radius)}return t}});var ku={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Uu(){}Uu.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(Uu.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:pe,NormalBlending:de,AdditiveBlending:fe,SubtractiveBlending:me,MultiplyBlending:ve,CustomBlending:ge},t=new $n,n=new zs,i=new Bu;return function(r,a,o){var s={};function u(e,t,i,r,u){var c,l=a+e,h=Uu.Handlers.get(l);null!==h?c=h.load(l):(n.setCrossOrigin(o),c=n.load(l)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=it),1!==t[1]&&(c.wrapT=it)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=it),"mirror"===r[0]&&(c.wrapS=at),"repeat"===r[1]&&(c.wrapT=it),"mirror"===r[1]&&(c.wrapT=at)),void 0!==u&&(c.anisotropy=u);var p=xn.generateUUID();return s[p]=c,p}var c={uuid:xn.generateUUID(),type:"MeshLambertMaterial"};for(var l in r){var h=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=u(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=u(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=u(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=u(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=u(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=u(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=u(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=u(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=u(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=u(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=se;break;case"doubleSided":c.side=ue;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":!0===h&&(c.vertexColors=he),"face"===h&&(c.vertexColors=le);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),i.setTextures(s),i.parse(c)}}()});var zu={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Hu(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Ps,this.withCredentials=!1}function Gu(e){this.manager=void 0!==e?e:Ps,this.texturePath=""}Object.assign(Hu.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=this,a=void 0===this.path?zu.extractUrlBase(e):this.path,o=new Os(this.manager);o.setPath(this.path),o.setWithCredentials(this.withCredentials),o.load(e,function(n){var i=JSON.parse(n),o=i.metadata;if(void 0!==o){var s=o.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var u=r.parse(i,a);t(u.geometry,u.materials)},n,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new hi;return function(e,t){function n(e,t){return e&1<<t}var i,r,a,o,s,u,c,l,h,p,d,f,m,v,g,y,x,b,w,E,_,M,S,A,D,T=e.faces,C=e.vertices,F=e.normals,L=e.colors,R=e.scale,P=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&P++;for(i=0;i<P;i++)t.faceVertexUvs[i]=[]}for(o=0,s=C.length;o<s;)(b=new _n).x=C[o++]*R,b.y=C[o++]*R,b.z=C[o++]*R,t.vertices.push(b);for(o=0,s=T.length;o<s;)if(d=n(p=T[o++],0),f=n(p,1),m=n(p,3),v=n(p,4),g=n(p,5),y=n(p,6),x=n(p,7),d){if((E=new Qn).a=T[o],E.b=T[o+1],E.c=T[o+3],(_=new Qn).a=T[o+1],_.b=T[o+2],_.c=T[o+3],o+=4,f&&(h=T[o++],E.materialIndex=h,_.materialIndex=h),a=t.faces.length,m)for(i=0;i<P;i++)for(A=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],r=0;r<4;r++)D=new bn(A[2*(l=T[o++])],A[2*l+1]),2!==r&&t.faceVertexUvs[i][a].push(D),0!==r&&t.faceVertexUvs[i][a+1].push(D);if(v&&(c=3*T[o++],E.normal.set(F[c++],F[c++],F[c]),_.normal.copy(E.normal)),g)for(i=0;i<4;i++)c=3*T[o++],S=new _n(F[c++],F[c++],F[c]),2!==i&&E.vertexNormals.push(S),0!==i&&_.vertexNormals.push(S);if(y&&(M=L[u=T[o++]],E.color.setHex(M),_.color.setHex(M)),x)for(i=0;i<4;i++)M=L[u=T[o++]],2!==i&&E.vertexColors.push(new $n(M)),0!==i&&_.vertexColors.push(new $n(M));t.faces.push(E),t.faces.push(_)}else{if((w=new Qn).a=T[o++],w.b=T[o++],w.c=T[o++],f&&(h=T[o++],w.materialIndex=h),a=t.faces.length,m)for(i=0;i<P;i++)for(A=e.uvs[i],t.faceVertexUvs[i][a]=[],r=0;r<3;r++)D=new bn(A[2*(l=T[o++])],A[2*l+1]),t.faceVertexUvs[i][a].push(D);if(v&&(c=3*T[o++],w.normal.set(F[c++],F[c++],F[c])),g)for(i=0;i<3;i++)c=3*T[o++],S=new _n(F[c++],F[c++],F[c]),w.vertexNormals.push(S);if(y&&(u=T[o++],w.color.setHex(L[u])),x)for(i=0;i<3;i++)u=T[o++],w.vertexColors.push(new $n(L[u]));t.faces.push(w)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var a=e.skinWeights[i],o=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,u=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new Pn(a,o,s,u))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var c=e.skinIndices[i],l=n>1?e.skinIndices[i+1]:0,h=n>2?e.skinIndices[i+2]:0,p=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new Pn(c,l,h,p))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var a=t.morphTargets[i].vertices,o=e.morphTargets[i].vertices,s=0,u=o.length;s<u;s+=3){var c=new _n;c.x=o[s]*n,c.y=o[s+1]*n,c.z=o[s+2]*n,a.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=t.faces,h=e.morphColors[0].colors;for(i=0,r=l.length;i<r;i++)l[i].color.fromArray(h,3*i)}}(e,n),function(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var a=Iu.parseAnimation(i[r],t.bones);a&&n.push(a)}if(t.morphTargets){var o=Iu.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(o)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Uu.prototype.initMaterials(e.materials,this.resourcePath||t,this.crossOrigin)}}}()}),Object.assign(Gu.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Os(r.manager).load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new cu).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Hu,r=new Nu,a=0,o=e.length;a<o;a++){var s,u=e[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new xs[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new xs[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new xs[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new xs[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new xs[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new xs[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new xs[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new xs[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new xs[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new xs[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new xs[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new xs[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,h=u.shapes.length;l<h;l++){var p=t[u.shapes[l]];c.push(p)}s=new xs[u.type](c,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,h=u.shapes.length;l<h;l++){p=t[u.shapes[l]];c.push(p)}var d=u.options.extrudePath;void 0!==d&&(u.options.extrudePath=(new ou[d.type]).fromJSON(d)),s=new xs[u.type](c,u.options);break;case"BufferGeometry":s=r.parse(u);break;case"Geometry":s=i.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Bu;i.setTextures(t);for(var r=0,a=e.length;r<a;r++){var o=e[r];if("MultiMaterial"===o.type){for(var s=[],u=0;u<o.materials.length;u++)s.push(i.parse(o.materials[u]));n[o.uuid]=s}else n[o.uuid]=i.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=Iu.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new ks(new Rs(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var u=e[o],c=u.url;if(Array.isArray(c)){i[u.uuid]=[];for(var l=0,h=c.length;l<h;l++){var p=c[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.texturePath+p;i[u.uuid].push(r(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;i[u.uuid]=r(d)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o,s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new or(t[s.image]):new Rn(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,ju)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Wu),o.wrapT=n(s.wrap[1],Wu)),void 0!==s.format&&(o.format=s.format),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Xu)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Xu)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),i[s.uuid]=o}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Ha,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new $n(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new za(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Ua(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Ia(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new vu(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new xu(e.color,e.intensity);break;case"DirectionalLight":i=new yu(e.color,e.intensity);break;case"PointLight":i=new mu(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new bu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new fu(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new hu(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(e.geometry),s=a(e.material);i=o.bones&&o.bones.length>0?new Ya(o,s):new qi(o,s);break;case"LOD":i=new Xa;break;case"Line":i=new Za(r(e.geometry),a(e.material),e.mode);break;case"LineLoop":i=new Qa(r(e.geometry),a(e.material));break;case"LineSegments":i=new Ka(r(e.geometry),a(e.material));break;case"PointCloud":case"Points":i=new to(r(e.geometry),a(e.material));break;case"Sprite":i=new Wa(a(e.material));break;case"Group":i=new Ra;break;default:i=new si}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,c=0;c<u.length;c++)i.add(this.parseObject(u[c],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var p=l[h],d=i.getObjectByProperty("uuid",p.object);void 0!==d&&i.addLevel(d,p.distance)}return i}});var Vu,ju={UVMapping:300,CubeReflectionMapping:Je,CubeRefractionMapping:Ze,EquirectangularReflectionMapping:Ke,EquirectangularRefractionMapping:Qe,SphericalReflectionMapping:et,CubeUVReflectionMapping:tt,CubeUVRefractionMapping:nt},Wu={RepeatWrapping:it,ClampToEdgeWrapping:rt,MirroredRepeatWrapping:at},Xu={NearestFilter:ot,NearestMipMapNearestFilter:st,NearestMipMapLinearFilter:ut,LinearFilter:ct,LinearMipMapNearestFilter:lt,LinearMipMapLinearFilter:ht};function $u(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Ps,this.options=void 0}function qu(){this.type="ShapePath",this.color=new $n,this.subPaths=[],this.currentPath=null}function Yu(e){this.type="Font",this.data=e}function Ju(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var o,s,u,c,l,h,p,d,f=new qu;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*t+n,s=m[v++]*t+i,f.moveTo(o,s);break;case"l":o=m[v++]*t+n,s=m[v++]*t+i,f.lineTo(o,s);break;case"q":u=m[v++]*t+n,c=m[v++]*t+i,l=m[v++]*t+n,h=m[v++]*t+i,f.quadraticCurveTo(l,h,u,c);break;case"b":u=m[v++]*t+n,c=m[v++]*t+i,l=m[v++]*t+n,h=m[v++]*t+i,p=m[v++]*t+n,d=m[v++]*t+i,f.bezierCurveTo(l,h,p,d,u,c)}}return{offsetX:a.ha*t,path:f}}}function Zu(e){this.manager=void 0!==e?e:Ps}$u.prototype={constructor:$u,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ls.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Ls.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(qu.prototype,{moveTo:function(e,t){this.currentPath=new uu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new cu;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],u=-u,s=t[r],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=c*(e.x-o.x)-u*(e.y-o.y);if(0===l)return!0;if(l<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var r=qo.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,u,c=[];if(1===a.length)return s=a[0],(u=new cu).curves=s.curves,c.push(u),c;var l=!r(a[0].getPoints());l=e?!l:l;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=r(h=(s=a[g]).getPoints()),(o=e?!o:o)?(!l&&f[v]&&v++,f[v]={s:new cu,p:h},f[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(a);if(f.length>1){for(var x=!1,b=[],w=0,E=f.length;w<E;w++)d[w]=[];for(w=0,E=f.length;w<E;w++)for(var _=m[w],M=0;M<_.length;M++){for(var S=_[M],A=!0,D=0;D<f.length;D++)i(S.p,f[D].p)&&(w!==D&&b.push({froms:w,tos:D,hole:M}),A?(A=!1,d[D].push(S)):x=!0);A&&d[w].push(S)}b.length>0&&(x||(m=d))}g=0;for(var T=f.length;g<T;g++){u=f[g].s,c.push(u);for(var C=0,F=(p=m[g]).length;C<F;C++)u.holes.push(p[C].h)}return c}}),Object.assign(Yu.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,u=0,c=0;c<i.length;c++){var l=i[c];if("\n"===l)s=0,u-=a;else{var h=Ju(l,r,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}(e,t,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(Zu.prototype,{load:function(e,t,n,i){var r=this,a=new Os(this.manager);a.setPath(this.path),a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new Yu(e)},setPath:function(e){return this.path=e,this}});var Ku,Qu,ec,tc,nc,ic,rc,ac,oc,sc,uc={getContext:function(){return void 0===Vu&&(Vu=new(window.AudioContext||window.webkitAudioContext)),Vu},setContext:function(e){Vu=e}};function cc(e){this.manager=void 0!==e?e:Ps}function lc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ia,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ia,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function hc(e,t,n){si.call(this),this.type="CubeCamera";var i=new Ia(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new _n(1,0,0)),this.add(i);var r=new Ia(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new _n(-1,0,0)),this.add(r);var a=new Ia(90,1,e,t);a.up.set(0,0,1),a.lookAt(new _n(0,1,0)),this.add(a);var o=new Ia(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new _n(0,-1,0)),this.add(o);var s=new Ia(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new _n(0,0,1)),this.add(s);var u=new Ia(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new _n(0,0,-1)),this.add(u);var c={format:St,magFilter:ct,minFilter:ct};this.renderTarget=new On(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,c=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=c,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,a=0;a<6;a++)r.activeCubeFace=a,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function pc(){si.call(this),this.type="AudioListener",this.context=uc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function dc(e){si.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function fc(e){dc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function mc(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function vc(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(cc.prototype,{load:function(e,t,n,i){var r=new Os(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){var n=e.slice(0);uc.getContext().decodeAudioData(n,function(e){t(e)})},n,i)}}),Object.assign(lc.prototype,{update:(oc=new wn,sc=new wn,function(e){if(Ku!==this||Qu!==e.focus||ec!==e.fov||tc!==e.aspect*this.aspect||nc!==e.near||ic!==e.far||rc!==e.zoom||ac!==this.eyeSep){Ku=this,Qu=e.focus,ec=e.fov,tc=e.aspect*this.aspect,nc=e.near,ic=e.far,rc=e.zoom;var t,n,i=e.projectionMatrix.clone(),r=(ac=this.eyeSep/2)*nc/Qu,a=nc*Math.tan(xn.DEG2RAD*ec*.5)/rc;sc.elements[12]=-ac,oc.elements[12]=ac,t=-a*tc+r,n=a*tc+r,i.elements[0]=2*nc/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(i),t=-a*tc-r,n=a*tc-r,i.elements[0]=2*nc/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(sc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oc)})}),hc.prototype=Object.create(si.prototype),hc.prototype.constructor=hc,pc.prototype=Object.assign(Object.create(si.prototype),{constructor:pc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new _n,t=new En,n=new _n,i=new _n;return function(r){si.prototype.updateMatrixWorld.call(this,r);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(i.x,this.context.currentTime),a.forwardY.setValueAtTime(i.y,this.context.currentTime),a.forwardZ.setValueAtTime(i.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z))}}()}),dc.prototype=Object.assign(Object.create(si.prototype),{constructor:dc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),fc.prototype=Object.assign(Object.create(dc.prototype),{constructor:fc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new _n,t=new En,n=new _n,i=new _n;return function(r){si.prototype.updateMatrixWorld.call(this,r);var a=this.panner;this.matrixWorld.decompose(e,t,n),i.set(0,0,1).applyQuaternion(t),a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z)}}()}),Object.assign(mc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(vc.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*t;this._mixBufferRegion(n,i,o,1-r,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){En.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}});var gc,yc,xc,bc,wc,Ec,_c,Mc,Sc,Ac,Dc,Tc,Cc,Fc,Lc;function Rc(e,t,n){var i=n||Pc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Pc(e,t,n){this.path=t,this.parsedPath=n||Pc.parseTrackName(t),this.node=Pc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ic(){this.uuid=xn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Oc(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),o={endingStart:rn,endingEnd:rn},s=0;s!==r;++s){var u=i[s].createInterpolant(null);a[s]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bc(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Nc(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function kc(){Si.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Uc(e,t,n){Ga.call(this,e,t),this.meshPerAttribute=n||1}function zc(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),pi.call(this,e,t,n),this.meshPerAttribute=i||1}function Hc(e,t,n,i){this.ray=new Wi(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Gc(e,t){return e.distance-t.distance}function Vc(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,o=r.length;a<o;a++)Vc(r[a],t,n,!0)}function jc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Wc(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Xc(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function $c(e,t){this.min=void 0!==e?e:new bn(1/0,1/0),this.max=void 0!==t?t:new bn(-1/0,-1/0)}function qc(e,t){this.start=void 0!==e?e:new _n,this.end=void 0!==t?t:new _n}function Yc(e){si.call(this),this.material=e,this.render=function(){}}function Jc(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var u=new Si,c=new bi(2*o*3,3);u.addAttribute("position",c),Ka.call(this,u,new Ja({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Zc(e,t){si.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Si,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new bi(i,3));var u=new Ja({fog:!1});this.cone=new Ka(n,u),this.add(this.cone),this.update()}function Kc(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Si,i=[],r=[],a=new $n(0,0,1),o=new $n(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new bi(i,3)),n.addAttribute("color",new bi(r,3));var c=new Ja({vertexColors:he,depthTest:!1,depthWrite:!1,transparent:!0});Ka.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Qc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new rs(t,4,2),r=new $i({wireframe:!0,fog:!1});qi.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function el(e,t){si.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Ja({fog:!1}),i=new Si;i.addAttribute("position",new pi(new Float32Array(15),3)),this.line=new Za(i,n),this.add(this.line),this.update()}function tl(e,t,n){si.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new mo(t);i.rotateY(.5*Math.PI),this.material=new $i({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=he);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new pi(a,3)),this.add(new qi(i,this.material)),this.update()}function nl(e,t,n,i){e=e||10,t=t||10,n=new $n(void 0!==n?n:4473924),i=new $n(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],u=[],c=0,l=0,h=-o;c<=t;c++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var p=c===r?n:i;p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3}var d=new Si;d.addAttribute("position",new bi(s,3)),d.addAttribute("color",new bi(u,3));var f=new Ja({vertexColors:he});Ka.call(this,d,f)}function il(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new $n(void 0!==r?r:4473924),a=new $n(void 0!==a?a:8947848);var o,s,u,c,l,h,p,d=[],f=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),o=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(o,0,s),p=1&c?r:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(c=0;c<=n;c++)for(p=1&c?r:a,h=e-e/n*c,l=0;l<i;l++)u=l/i*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),f.push(p.r,p.g,p.b),u=(l+1)/i*(2*Math.PI),o=Math.sin(u)*h,s=Math.cos(u)*h,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new Si;m.addAttribute("position",new bi(d,3)),m.addAttribute("color",new bi(f,3));var v=new Ja({vertexColors:he});Ka.call(this,m,v)}function rl(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Si,c=new bi(2*o*3,3);u.addAttribute("position",c),Ka.call(this,u,new Ja({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function al(e,t,n){si.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Si;i.addAttribute("position",new bi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Ja({fog:!1});this.lightPlane=new Za(i,r),this.add(this.lightPlane),(i=new Si).addAttribute("position",new bi([0,0,0,0,0,1],3)),this.targetLine=new Za(i,r),this.add(this.targetLine),this.update()}function ol(e){var t=new Si,n=new Ja({color:16777215,vertexColors:le}),i=[],r=[],a={},o=new $n(16755200),s=new $n(16711680),u=new $n(43775),c=new $n(16777215),l=new $n(3355443);function h(e,t,n){p(e,n),p(t,n)}function p(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",c),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new bi(i,3)),t.addAttribute("color",new bi(r,3)),Ka.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function sl(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Si;r.setIndex(new pi(n,1)),r.addAttribute("position",new pi(i,3)),Ka.call(this,r,new Ja({color:t})),this.matrixAutoUpdate=!1,this.update()}function ul(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Si;r.setIndex(new pi(i,1)),r.addAttribute("position",new bi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ka.call(this,r,new Ja({color:n})),this.geometry.computeBoundingSphere()}function cl(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Si;r.addAttribute("position",new bi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Za.call(this,r,new Ja({color:i}));var a=new Si;a.addAttribute("position",new bi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new qi(a,new $i({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function ll(e,t,n,i,r,a){si.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Tc&&((Tc=new Si).addAttribute("position",new bi([0,0,0,0,1,0],3)),(Cc=new fs(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Za(Tc,new Ja({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qi(Cc,new $i({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function hl(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Si;n.addAttribute("position",new bi(t,3)),n.addAttribute("color",new bi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Ja({vertexColors:he});Ka.call(this,n,i)}Object.assign(Rc.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Pc,{Composite:Rc,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Pc.Composite(e,t,n):new Pc(e,t,n)},sanitizeNodeName:(Sc=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(Sc,"")}),parseTrackName:(gc="[^\\[\\]\\.:\\/]",yc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",xc=/((?:WC+[\/:])*)/.source.replace("WC",gc),bc=/(WCOD+)?/.source.replace("WCOD",yc),wc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gc),Ec=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gc),_c=new RegExp("^"+xc+bc+wc+Ec+"$"),Mc=["material","materials","bones"],function(e){var t=_c.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Mc.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var a=i(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Pc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Pc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Pc.prototype,{_getValue_unbound:Pc.prototype.getValue,_setValue_unbound:Pc.prototype.setValue}),Object.assign(Ic.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],p=h.uuid,d=i[p];if(void 0===d){d=t++,i[p]=d,e.push(h);for(var f=0,m=s;f!==m;++f)o[f].push(new Pc(h,r[f],a[f]))}else if(d<n){u=e[d];var v=--n,g=e[v];i[g.uuid]=d,e[d]=g,i[p]=v,e[v]=h;for(f=0,m=s;f!==m;++f){var y=o[f],x=y[v],b=y[d];y[d]=x,void 0===b&&(b=new Pc(h,r[f],a[f])),y[v]=b}}else e[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=n[u];if(void 0!==c&&c>=t){var l=t++,h=e[l];n[h.uuid]=c,e[c]=h,n[u]=l,e[l]=s;for(var p=0,d=r;p!==d;++p){var f=i[p],m=f[l],v=f[c];f[c]=m,f[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o].uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var l=--n,h=e[l],p=e[g=--t];i[h.uuid]=c,e[c]=h,i[p.uuid]=l,e[l]=p,e.pop();for(var d=0,f=a;d!==f;++d){var m=(y=r[d])[l],v=y[g];y[c]=m,y[l]=v,y.pop()}}else{var g;i[(p=e[g=--t]).uuid]=c,e[c]=p,e.pop();for(d=0,f=a;d!==f;++d){var y;(y=r[d])[c]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(l);for(var h=c,p=s.length;h!==p;++h){var d=s[h];l[h]=new Pc(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Oc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=r,s[1]=r+n,u[0]=e/o,u[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,a=2202===i;if(0===e)return-1===r?t:a&&1==(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:rn:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:rn:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),Bc.prototype=Object.assign(Object.create(j.prototype),{constructor:Bc,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==r;++l){var h=i[l],p=h.name,d=c[p];if(void 0!==d)a[l]=d;else{if(void 0!==(d=a[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[l].binding.parsedPath;++(d=new vc(Pc.create(n,p,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[l]=d}o[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[r];e:{for(var c in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Mu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Iu.findByName(n,e):e,a=null!==r?r.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[i];if(void 0!==u)return u;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new Oc(this,r,t);return this._bindAction(c,s),this._addInactiveAction(c,a,i),c},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Iu.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}var s=this._bindings,u=this._nActiveBindings;for(o=0;o!==u;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Nc.prototype.clone=function(){return new Nc(void 0===this.value.clone?this.value:this.value.clone())},kc.prototype=Object.assign(Object.create(Si.prototype),{constructor:kc,isInstancedBufferGeometry:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Uc.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Uc,isInstancedInterleavedBuffer:!0,copy:function(e){return Ga.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),zc.prototype=Object.assign(Object.create(pi.prototype),{constructor:zc,isInstancedBufferAttribute:!0,copy:function(e){return pi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Hc.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return Vc(e,this,i,t),i.sort(Gc),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=e.length;r<a;r++)Vc(e[r],this,i,t);return i.sort(Gc),i}}),Object.assign(jc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Wc.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(xn.clamp(t/this.radius,-1,1))),this}}),Object.assign(Xc.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign($c.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new bn;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new bn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new bn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new bn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new bn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new bn;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(qc.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new _n),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new _n),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new _n),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ac=new _n,Dc=new _n,function(e,t){Ac.subVectors(e,this.start),Dc.subVectors(this.end,this.start);var n=Dc.dot(Dc),i=Dc.dot(Ac)/n;return t&&(i=xn.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new _n),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Yc.prototype=Object.create(si.prototype),Yc.prototype.constructor=Yc,Yc.prototype.isImmediateRenderObject=!0,Jc.prototype=Object.create(Ka.prototype),Jc.prototype.constructor=Jc,Jc.prototype.update=function(){var e=new _n,t=new _n,n=new Mn;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,u=o.faces,c=0,l=0,h=u.length;l<h;l++)for(var p=u[l],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[i[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(r),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1}else if(o&&o.isBufferGeometry){var g=o.attributes.position,y=o.attributes.normal;for(c=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(r),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1}a.needsUpdate=!0}}(),Zc.prototype=Object.create(si.prototype),Zc.prototype.constructor=Zc,Zc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Zc.prototype.update=function(){var e=new _n,t=new _n;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Kc.prototype=Object.create(Ka.prototype),Kc.prototype.constructor=Kc,Kc.prototype.updateMatrixWorld=function(){var e=new _n,t=new wn,n=new wn;return function(i){var r=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u+1,e.x,e.y,e.z),u+=2)}a.getAttribute("position").needsUpdate=!0,si.prototype.updateMatrixWorld.call(this,i)}}(),Qc.prototype=Object.create(qi.prototype),Qc.prototype.constructor=Qc,Qc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Qc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},el.prototype=Object.create(si.prototype),el.prototype.constructor=el,el.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},el.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},tl.prototype=Object.create(si.prototype),tl.prototype.constructor=tl,tl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},tl.prototype.update=function(){var e=new _n,t=new $n,n=new $n;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?t:n;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),nl.prototype=Object.create(Ka.prototype),nl.prototype.constructor=nl,il.prototype=Object.create(Ka.prototype),il.prototype.constructor=il,rl.prototype=Object.create(Ka.prototype),rl.prototype.constructor=rl,rl.prototype.update=function(){var e=new _n,t=new _n,n=new Mn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,u=0,c=0,l=s.length;c<l;c++){var h=s[c],p=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(u,e.x,e.y,e.z),u+=1,r.setXYZ(u,t.x,t.y,t.z),u+=1}r.needsUpdate=!0}}(),al.prototype=Object.create(si.prototype),al.prototype.constructor=al,al.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},al.prototype.update=function(){var e=new _n,t=new _n,n=new _n;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),ol.prototype=Object.create(Ka.prototype),ol.prototype.constructor=ol,ol.prototype.update=function(){var e,t,n=new _n,i=new Pa;function r(r,a,o,s){n.set(a,o,s).unproject(i);var u=t[r];if(void 0!==u)for(var c=e.getAttribute("position"),l=0,h=u.length;l<h;l++)c.setXYZ(u[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),sl.prototype=Object.create(Ka.prototype),sl.prototype.constructor=sl,sl.prototype.update=function(){var e=new Nn;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=n.x,a[4]=i.y,a[5]=i.z,a[6]=n.x,a[7]=n.y,a[8]=i.z,a[9]=i.x,a[10]=n.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=n.z,a[15]=n.x,a[16]=i.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=i.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),sl.prototype.setFromObject=function(e){return this.object=e,this.update(),this},ul.prototype=Object.create(Ka.prototype),ul.prototype.constructor=ul,ul.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),si.prototype.updateMatrixWorld.call(this,e))},cl.prototype=Object.create(Za.prototype),cl.prototype.constructor=cl,cl.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?se:oe,this.lookAt(this.plane.normal),si.prototype.updateMatrixWorld.call(this,e)},ll.prototype=Object.create(si.prototype),ll.prototype.constructor=ll,ll.prototype.setDirection=(Lc=new _n,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Lc.set(e.z,0,-e.x).normalize(),Fc=Math.acos(e.y),this.quaternion.setFromAxisAngle(Lc,Fc))}),ll.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ll.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},hl.prototype=Object.create(Ka.prototype),hl.prototype.constructor=hl;function pl(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ys.call(this,e),this.type="catmullrom",this.closed=!0}function dl(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ys.call(this,e),this.type="catmullrom"}function fl(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ys.call(this,e),this.type="catmullrom"}Hs.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Hs.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(su.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new hi,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new _n(r.x,r.y,r.z||0))}return t}}),Object.assign(uu.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),pl.prototype=Object.create(Ys.prototype),dl.prototype=Object.create(Ys.prototype),fl.prototype=Object.create(Ys.prototype),Object.assign(fl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),nl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Kc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Uu.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zu.extractUrlBase(e)}}),Object.assign(Hu.prototype,{setTexturePath:function(e){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign($c.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Nn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),qc.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(xn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),xn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),xn.ceilPowerOfTwo(e)}}),Object.assign(Mn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(wn.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new _n),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),Un.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},En.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Wi.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Xi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Xi,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xi.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xi.getNormal(e,t,n,i)}}),Object.assign(cu.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cs(this,e)}}),Object.assign(bn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(_n.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(hi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(si.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(si.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Xa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($a.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Hs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ia.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(lu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(pi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Si.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Si.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Ko.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Nc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Vi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new $n}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Ms.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ji.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ka.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(ka.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ta.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(In.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Ba.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),dc.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new cc).load(e,function(e){t.setBuffer(e)}),this},mc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},hc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var ml={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Fn.crossOrigin=void 0,Fn.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new zs;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Fn.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Us;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Fn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Fn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var vl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};var gl=Object.freeze({WebGLRenderTargetCube:On,WebGLRenderTarget:In,WebGLRenderer:ka,ShaderLib:Jn,UniformsLib:Yn,UniformsUtils:Wn,ShaderChunk:jn,FogExp2:Ua,Fog:za,Scene:Ha,Sprite:Wa,LOD:Xa,SkinnedMesh:Ya,Skeleton:$a,Bone:qa,Mesh:qi,LineSegments:Ka,LineLoop:Qa,Line:Za,Points:to,Group:Ra,VideoTexture:no,DataTexture:Bn,DataTexture3D:sr,CompressedTexture:io,CubeTexture:or,CanvasTexture:ro,DepthTexture:ao,Texture:Rn,CompressedTextureLoader:Bs,DataTextureLoader:Ns,CubeTextureLoader:Us,TextureLoader:zs,ObjectLoader:Gu,MaterialLoader:Bu,BufferGeometryLoader:Nu,DefaultLoadingManager:Ps,LoadingManager:Rs,JSONLoader:Hu,ImageLoader:ks,ImageBitmapLoader:$u,FontLoader:Zu,FileLoader:Os,Loader:Uu,LoaderUtils:zu,Cache:Ls,AudioLoader:cc,SpotLightShadow:du,SpotLight:fu,PointLight:mu,RectAreaLight:bu,HemisphereLight:hu,DirectionalLightShadow:gu,DirectionalLight:yu,AmbientLight:xu,LightShadow:pu,Light:lu,StereoCamera:lc,PerspectiveCamera:Ia,OrthographicCamera:vu,CubeCamera:hc,ArrayCamera:Oa,Camera:Pa,AudioListener:pc,PositionalAudio:fc,AudioContext:uc,AudioAnalyser:mc,Audio:dc,VectorKeyframeTrack:Pu,StringKeyframeTrack:Ru,QuaternionKeyframeTrack:Lu,NumberKeyframeTrack:Cu,ColorKeyframeTrack:Tu,BooleanKeyframeTrack:Du,PropertyMixer:vc,PropertyBinding:Pc,KeyframeTrack:Au,AnimationUtils:wu,AnimationObjectGroup:Ic,AnimationMixer:Bc,AnimationClip:Iu,Uniform:Nc,InstancedBufferGeometry:kc,BufferGeometry:Si,Geometry:hi,InterleavedBufferAttribute:Va,InstancedInterleavedBuffer:Uc,InterleavedBuffer:Ga,InstancedBufferAttribute:zc,Face3:Qn,Object3D:si,Raycaster:Hc,Layers:ti,EventDispatcher:j,Clock:jc,QuaternionLinearInterpolant:Fu,LinearInterpolant:Mu,DiscreteInterpolant:Su,CubicInterpolant:_u,Interpolant:Eu,Triangle:Xi,Math:xn,Spherical:Wc,Cylindrical:Xc,Plane:Un,Frustum:zn,Sphere:kn,Ray:Wi,Matrix4:wn,Matrix3:Mn,Box3:Nn,Box2:$c,Line3:qc,Euler:ei,Vector4:Pn,Vector3:_n,Vector2:bn,Quaternion:En,Color:$n,ImmediateRenderObject:Yc,VertexNormalsHelper:Jc,SpotLightHelper:Zc,SkeletonHelper:Kc,PointLightHelper:Qc,RectAreaLightHelper:el,HemisphereLightHelper:tl,GridHelper:nl,PolarGridHelper:il,FaceNormalsHelper:rl,DirectionalLightHelper:al,CameraHelper:ol,BoxHelper:sl,Box3Helper:ul,PlaneHelper:cl,ArrowHelper:ll,AxesHelper:hl,Shape:cu,Path:uu,ShapePath:qu,Font:Yu,CurvePath:su,Curve:Hs,ImageUtils:Fn,ShapeUtils:qo,WebGLUtils:La,WireframeGeometry:oo,ParametricGeometry:so,ParametricBufferGeometry:uo,TetrahedronGeometry:ho,TetrahedronBufferGeometry:po,OctahedronGeometry:fo,OctahedronBufferGeometry:mo,IcosahedronGeometry:vo,IcosahedronBufferGeometry:go,DodecahedronGeometry:yo,DodecahedronBufferGeometry:xo,PolyhedronGeometry:co,PolyhedronBufferGeometry:lo,TubeGeometry:bo,TubeBufferGeometry:wo,TorusKnotGeometry:Eo,TorusKnotBufferGeometry:_o,TorusGeometry:Mo,TorusBufferGeometry:So,TextGeometry:ts,TextBufferGeometry:ns,SphereGeometry:is,SphereBufferGeometry:rs,RingGeometry:as,RingBufferGeometry:os,PlaneGeometry:Ti,PlaneBufferGeometry:Ci,LatheGeometry:ss,LatheBufferGeometry:us,ShapeGeometry:cs,ShapeBufferGeometry:ls,ExtrudeGeometry:Zo,ExtrudeBufferGeometry:Ko,EdgesGeometry:ps,ConeGeometry:ms,ConeBufferGeometry:vs,CylinderGeometry:ds,CylinderBufferGeometry:fs,CircleGeometry:gs,CircleBufferGeometry:ys,BoxGeometry:Ai,BoxBufferGeometry:Di,ShadowMaterial:bs,SpriteMaterial:ja,RawShaderMaterial:ws,ShaderMaterial:ji,PointsMaterial:eo,MeshPhysicalMaterial:_s,MeshStandardMaterial:Es,MeshPhongMaterial:Ms,MeshToonMaterial:Ss,MeshNormalMaterial:As,MeshLambertMaterial:Ds,MeshDepthMaterial:Aa,MeshDistanceMaterial:Da,MeshBasicMaterial:$i,MeshMatcapMaterial:Ts,LineDashedMaterial:Cs,LineBasicMaterial:Ja,Material:Vi,Float64BufferAttribute:wi,Float32BufferAttribute:bi,Uint32BufferAttribute:xi,Int32BufferAttribute:yi,Uint16BufferAttribute:gi,Int16BufferAttribute:vi,Uint8ClampedBufferAttribute:mi,Uint8BufferAttribute:fi,Int8BufferAttribute:di,BufferAttribute:pi,ArcCurve:Vs,CatmullRomCurve3:Ys,CubicBezierCurve:Qs,CubicBezierCurve3:eu,EllipseCurve:Gs,LineCurve:tu,LineCurve3:nu,QuadraticBezierCurve:iu,QuadraticBezierCurve3:ru,SplineCurve:au,REVISION:Q,MOUSE:ee,CullFaceNone:te,CullFaceBack:ne,CullFaceFront:ie,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:re,PCFSoftShadowMap:ae,FrontSide:oe,BackSide:se,DoubleSide:ue,FlatShading:1,SmoothShading:2,NoColors:ce,FaceColors:le,VertexColors:he,NoBlending:pe,NormalBlending:de,AdditiveBlending:fe,SubtractiveBlending:me,MultiplyBlending:ve,CustomBlending:ge,AddEquation:ye,SubtractEquation:xe,ReverseSubtractEquation:be,MinEquation:we,MaxEquation:Ee,ZeroFactor:_e,OneFactor:Me,SrcColorFactor:Se,OneMinusSrcColorFactor:Ae,SrcAlphaFactor:De,OneMinusSrcAlphaFactor:Te,DstAlphaFactor:Ce,OneMinusDstAlphaFactor:Fe,DstColorFactor:Le,OneMinusDstColorFactor:Re,SrcAlphaSaturateFactor:Pe,NeverDepth:Ie,AlwaysDepth:Oe,LessDepth:Be,LessEqualDepth:Ne,EqualDepth:ke,GreaterEqualDepth:Ue,GreaterDepth:ze,NotEqualDepth:He,MultiplyOperation:Ge,MixOperation:Ve,AddOperation:je,NoToneMapping:We,LinearToneMapping:Xe,ReinhardToneMapping:$e,Uncharted2ToneMapping:qe,CineonToneMapping:Ye,UVMapping:300,CubeReflectionMapping:Je,CubeRefractionMapping:Ze,EquirectangularReflectionMapping:Ke,EquirectangularRefractionMapping:Qe,SphericalReflectionMapping:et,CubeUVReflectionMapping:tt,CubeUVRefractionMapping:nt,RepeatWrapping:it,ClampToEdgeWrapping:rt,MirroredRepeatWrapping:at,NearestFilter:ot,NearestMipMapNearestFilter:st,NearestMipMapLinearFilter:ut,LinearFilter:ct,LinearMipMapNearestFilter:lt,LinearMipMapLinearFilter:ht,UnsignedByteType:pt,ByteType:dt,ShortType:ft,UnsignedShortType:mt,IntType:vt,UnsignedIntType:gt,FloatType:yt,HalfFloatType:xt,UnsignedShort4444Type:bt,UnsignedShort5551Type:wt,UnsignedShort565Type:Et,UnsignedInt248Type:_t,AlphaFormat:Mt,RGBFormat:St,RGBAFormat:At,LuminanceFormat:Dt,LuminanceAlphaFormat:Tt,RGBEFormat:Ct,DepthFormat:Ft,DepthStencilFormat:Lt,RedFormat:Rt,RGB_S3TC_DXT1_Format:Pt,RGBA_S3TC_DXT1_Format:It,RGBA_S3TC_DXT3_Format:Ot,RGBA_S3TC_DXT5_Format:Bt,RGB_PVRTC_4BPPV1_Format:Nt,RGB_PVRTC_2BPPV1_Format:kt,RGBA_PVRTC_4BPPV1_Format:Ut,RGBA_PVRTC_2BPPV1_Format:zt,RGB_ETC1_Format:Ht,RGBA_ASTC_4x4_Format:Gt,RGBA_ASTC_5x4_Format:Vt,RGBA_ASTC_5x5_Format:jt,RGBA_ASTC_6x5_Format:Wt,RGBA_ASTC_6x6_Format:Xt,RGBA_ASTC_8x5_Format:$t,RGBA_ASTC_8x6_Format:qt,RGBA_ASTC_8x8_Format:Yt,RGBA_ASTC_10x5_Format:Jt,RGBA_ASTC_10x6_Format:Zt,RGBA_ASTC_10x8_Format:Kt,RGBA_ASTC_10x10_Format:Qt,RGBA_ASTC_12x10_Format:en,RGBA_ASTC_12x12_Format:tn,LoopOnce:2200,LoopRepeat:nn,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:rn,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:an,TriangleStripDrawMode:on,TriangleFanDrawMode:sn,LinearEncoding:un,sRGBEncoding:cn,GammaEncoding:ln,RGBEEncoding:hn,LogLuvEncoding:3003,RGBM7Encoding:pn,RGBM16Encoding:dn,RGBDEncoding:fn,BasicDepthPacking:mn,RGBADepthPacking:vn,TangentSpaceNormalMap:gn,ObjectSpaceNormalMap:yn,CubeGeometry:Ai,Face4:function(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Qn(e,t,n,r,a,o)},LineStrip:0,LinePieces:1,MeshFaceMaterial:function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},MultiMaterial:function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},PointCloud:function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new to(e,t)},Particle:function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Wa(e)},ParticleSystem:function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new to(e,t)},PointCloudMaterial:function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},ParticleBasicMaterial:function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},ParticleSystemMaterial:function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new eo(e)},Vertex:function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new _n(e,t,n)},DynamicBufferAttribute:function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new pi(e,t).setDynamic(!0)},Int8Attribute:function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new di(e,t)},Uint8Attribute:function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new fi(e,t)},Uint8ClampedAttribute:function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new mi(e,t)},Int16Attribute:function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new vi(e,t)},Uint16Attribute:function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new gi(e,t)},Int32Attribute:function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new yi(e,t)},Uint32Attribute:function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new xi(e,t)},Float32Attribute:function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new bi(e,t)},Float64Attribute:function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new wi(e,t)},ClosedSplineCurve3:pl,SplineCurve3:dl,Spline:fl,AxisHelper:function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new hl(e)},BoundingBoxHelper:function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new sl(e,t)},EdgesHelper:function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ka(new ps(e.geometry),new Ja({color:void 0!==t?t:16777215}))},WireframeHelper:function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ka(new oo(e.geometry),new Ja({color:void 0!==t?t:16777215}))},XHRLoader:function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Os(e)},BinaryTextureLoader:function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ns(e)},GeometryUtils:ml,Projector:function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},CanvasRenderer:function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},SceneUtils:vl,LensFlare:function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}}),yl={};yl.WEBGL={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',i=document.createElement("div");return i.id="webglmessage",i.style.fontFamily="monospace",i.style.fontSize="13px",i.style.fontWeight="normal",i.style.textAlign="center",i.style.background="#fff",i.style.color="#000",i.style.padding="1.5em",i.style.width="400px",i.style.margin="5em auto 0",n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),i.innerHTML=n,i}};var xl={TGALoader:function(e){this.manager=void 0!==e?e:xl.DefaultLoadingManager}};xl.TGALoader.prototype={constructor:xl.TGALoader,load:function(e,t,n,i){var r=this,a=new xl.Texture,o=new xl.FileLoader(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){a.image=r.parse(e),a.needsUpdate=!0,void 0!==t&&t(a)},n,i),a},parse:function(e){var t=0,n=1,i=2,r=3,a=9,o=10,s=11,u=48,c=4,l=0,h=1,p=2,d=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var f=new Uint8Array(e),m=0,v={id_length:f[m++],colormap_type:f[m++],image_type:f[m++],colormap_index:f[m++]|f[m++]<<8,colormap_length:f[m++]|f[m++]<<8,colormap_size:f[m++],origin:[f[m++]|f[m++]<<8,f[m++]|f[m++]<<8],width:f[m++]|f[m++]<<8,height:f[m++]|f[m++]<<8,pixel_size:f[m++],flags:f[m++]};!function(e){switch(e.image_type){case n:case a:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case i:case r:case o:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),m+=v.id_length;var g=!1,y=!1,x=!1;switch(v.image_type){case a:g=!0,y=!0;break;case n:y=!0;break;case o:g=!0;break;case i:break;case s:g=!0,x=!0;break;case r:x=!0}var b=document.createElement("canvas");b.width=v.width,b.height=v.height;var w=b.getContext("2d"),E=w.createImageData(v.width,v.height),_=function(e,t,n,i,r){var a,o,s,u;if(o=n.pixel_size>>3,s=n.width*n.height*o,t&&(u=r.subarray(i,i+=n.colormap_length*(n.colormap_size>>3))),e){var c,l,h;a=new Uint8Array(s);for(var p=0,d=new Uint8Array(o);p<s;)if(l=1+(127&(c=r[i++])),128&c){for(h=0;h<o;++h)d[h]=r[i++];for(h=0;h<l;++h)a.set(d,p+h*o);p+=o*l}else{for(l*=o,h=0;h<l;++h)a[p+h]=r[i++];p+=l}}else a=r.subarray(i,i+=t?n.width*n.height:s);return{pixel_data:a,palettes:u}}(g,y,v,m,f);!function(e,t,n,i,r){var a,o,s,f,m,g;switch((v.flags&u)>>c){default:case p:a=0,s=1,m=t,o=0,f=1,g=n;break;case l:a=0,s=1,m=t,o=n-1,f=-1,g=-1;break;case d:a=t-1,s=-1,m=-1,o=0,f=1,g=n;break;case h:a=t-1,s=-1,m=-1,o=n-1,f=-1,g=-1}if(x)switch(v.pixel_size){case 8:!function(e,t,n,i,r,a,o,s){var u,c,l,h=0,p=v.width;for(l=t;l!==i;l+=n)for(c=r;c!==o;c+=a,h++)u=s[h],e[4*(c+p*l)+0]=u,e[4*(c+p*l)+1]=u,e[4*(c+p*l)+2]=u,e[4*(c+p*l)+3]=255}(e,o,f,g,a,s,m,i);break;case 16:!function(e,t,n,i,r,a,o,s){var u,c,l=0,h=v.width;for(c=t;c!==i;c+=n)for(u=r;u!==o;u+=a,l+=2)e[4*(u+h*c)+0]=s[l+0],e[4*(u+h*c)+1]=s[l+0],e[4*(u+h*c)+2]=s[l+0],e[4*(u+h*c)+3]=s[l+1]}(e,o,f,g,a,s,m,i);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,n,i,r,a,o,s,u){var c,l,h,p=u,d=0,f=v.width;for(h=t;h!==i;h+=n)for(l=r;l!==o;l+=a,d++)c=s[d],e[4*(l+f*h)+3]=255,e[4*(l+f*h)+2]=p[3*c+0],e[4*(l+f*h)+1]=p[3*c+1],e[4*(l+f*h)+0]=p[3*c+2]}(e,o,f,g,a,s,m,i,r);break;case 16:!function(e,t,n,i,r,a,o,s){var u,c,l,h=0,p=v.width;for(l=t;l!==i;l+=n)for(c=r;c!==o;c+=a,h+=2)u=s[h+0]+(s[h+1]<<8),e[4*(c+p*l)+0]=(31744&u)>>7,e[4*(c+p*l)+1]=(992&u)>>2,e[4*(c+p*l)+2]=(31&u)>>3,e[4*(c+p*l)+3]=32768&u?0:255}(e,o,f,g,a,s,m,i);break;case 24:!function(e,t,n,i,r,a,o,s){var u,c,l=0,h=v.width;for(c=t;c!==i;c+=n)for(u=r;u!==o;u+=a,l+=3)e[4*(u+h*c)+3]=255,e[4*(u+h*c)+2]=s[l+0],e[4*(u+h*c)+1]=s[l+1],e[4*(u+h*c)+0]=s[l+2]}(e,o,f,g,a,s,m,i);break;case 32:!function(e,t,n,i,r,a,o,s){var u,c,l=0,h=v.width;for(c=t;c!==i;c+=n)for(u=r;u!==o;u+=a,l+=4)e[4*(u+h*c)+2]=s[l+0],e[4*(u+h*c)+1]=s[l+1],e[4*(u+h*c)+0]=s[l+2],e[4*(u+h*c)+3]=s[l+3]}(e,o,f,g,a,s,m,i);break;default:console.error("THREE.TGALoader: Format not supported.")}}(E.data,v.width,v.height,_.pixel_data,_.palettes);return w.putImageData(E,0,0),b},setPath:function(e){return this.path=e,this}};var bl,wl,El,_l={};function Ml(e){this.manager=void 0!==e?e:_l.DefaultLoadingManager}function Sl(e){this.textureLoader=e}function Al(){}function Dl(){}function Tl(){}function Cl(){}function Fl(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function Ll(){}function Rl(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===Vl(e,0,t.length)}function Pl(e){var t,n,i=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;for(var a=0;a<i.length;++a){if((n=void 0,n=e[(t=1)-1],e=e.slice(r+t),r++,n)===i[a])return!1}return!0}function Il(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ol(e){return e/46186158e3}Object.assign(_l,gl),Object.assign(_l,xl),Ml.prototype={constructor:Ml,crossOrigin:"anonymous",load:function(e,t,n,i){var r=this,a=void 0===r.path?_l.LoaderUtils.extractUrlBase(e):r.path,o=new _l.FileLoader(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(n){try{t(r.parse(n,a))}catch(t){setTimeout(function(){i&&i(t),r.manager.itemError(e)},0)}},n,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){if(Rl(e))bl=(new Cl).parse(e);else{var n=Vl(e);if(!Pl(n))throw new Error("THREE.FBXLoader: Unknown format.");if(Il(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Il(n));bl=(new Tl).parse(n)}return new Sl(new _l.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin)).parse(bl)}},Sl.prototype={constructor:Sl,parse:function(){wl=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),r=(new Al).parse(i);return this.parseScene(i,r,n),El},parseConnections:function(){var e=new Map;"Connections"in bl&&bl.Connections.connections.forEach(function(t){var n=t[0],i=t[1],r=t[2];e.has(n)||e.set(n,{parents:[],children:[]});var a={ID:i,relationship:r};e.get(n).parents.push(a),e.has(i)||e.set(i,{parents:[],children:[]});var o={ID:n,relationship:r};e.get(i).children.push(o)});return e},parseImages:function(){var e={},t={};if("Video"in bl.Objects){var n=bl.Objects.Video;for(var i in n){var r=n[i];if(e[u=parseInt(i)]=r.RelativeFilename||r.Filename,"Content"in r){var a=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,o="string"==typeof r.Content&&""!==r.Content;if(a||o){var s=this.parseImage(n[i]);t[r.RelativeFilename||r.Filename]=s}}}}for(var u in e){var c=e[u];void 0!==t[c]?e[u]=t[c]:e[u]=e[u].split("\\").pop()}return e},parseImage:function(e){var t,n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof _l.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");if(null===_l.Loader.Handlers.get(".tga")){var a=new _l.TGALoader;a.setPath(this.textureLoader.path),_l.Loader.Handlers.add(/\.tga$/i,a)}t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(e){var t=new Map;if("Texture"in bl.Objects){var n=bl.Objects.Texture;for(var i in n){var r=this.parseTexture(n[i],e);t.set(parseInt(i),r)}}return t},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var i=e.WrapModeU,r=e.WrapModeV,a=void 0!==i?i.value:0,o=void 0!==r?r.value:0;if(n.wrapS=0===a?_l.RepeatWrapping:_l.ClampToEdgeWrapping,n.wrapT=0===o?_l.RepeatWrapping:_l.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n},loadTexture:function(e,t){var n,i,r=this.textureLoader.path,a=wl.get(e.id).children;void 0!==a&&a.length>0&&void 0!==t[a[0].ID]&&(0!==(n=t[a[0].ID]).indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));var o=e.FileName.slice(-3).toLowerCase();if("tga"===o){var s=_l.Loader.Handlers.get(".tga");null===s?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",n),i=new _l.Texture):i=s.load(n)}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",n),i=new _l.Texture):i=this.textureLoader.load(n);return this.textureLoader.setPath(r),i},parseMaterials:function(e){var t=new Map;if("Material"in bl.Objects){var n=bl.Objects.Material;for(var i in n){var r=this.parseMaterial(n[i],e);null!==r&&t.set(parseInt(i),r)}}return t},parseMaterial:function(e,t){var n=e.id,i=e.attrName,r=e.ShadingModel;if("object"==typeof r&&(r=r.value),!wl.has(n))return null;var a,o=this.parseParameters(e,t,n);switch(r.toLowerCase()){case"phong":a=new _l.MeshPhongMaterial;break;case"lambert":a=new _l.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new _l.MeshPhongMaterial({color:3342591})}return a.setValues(o),a.name=i,a},parseParameters:function(e,t,n){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new _l.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=(new _l.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new _l.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(i.emissive=(new _l.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new _l.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new _l.Color).fromArray(e.SpecularColor.value));var r=this;return wl.get(n).children.forEach(function(e){var n=e.relationship;switch(n){case"Bump":i.bumpMap=r.getTexture(t,e.ID);break;case"DiffuseColor":i.map=r.getTexture(t,e.ID);break;case"DisplacementColor":i.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=r.getTexture(t,e.ID);break;case"NormalMap":i.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=r.getTexture(t,e.ID),i.envMap.mapping=_l.EquirectangularReflectionMapping;break;case"SpecularColor":i.specularMap=r.getTexture(t,e.ID);break;case"TransparentColor":i.alphaMap=r.getTexture(t,e.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}}),i},getTexture:function(e,t){return"LayeredTexture"in bl.Objects&&t in bl.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=wl.get(t).children[0].ID),e.get(t)},parseDeformers:function(){var e={},t={};if("Deformer"in bl.Objects){var n=bl.Objects.Deformer;for(var i in n){var r=n[i],a=wl.get(parseInt(i));if("Skin"===r.attrType){var o=this.parseSkeleton(a,n);o.ID=i,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[i]=o}else if("BlendShape"===r.attrType){var s={id:i};s.rawTargets=this.parseMorphTargets(a,n),s.id=i,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=s}}}return{skeletons:e,morphTargets:t}},parseSkeleton:function(e,t){var n=[];return e.children.forEach(function(e){var i=t[e.ID];if("Cluster"===i.attrType){var r={ID:e.ID,indices:[],weights:[],transformLink:(new _l.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)}}),{rawBones:n,bones:[]}},parseMorphTargets:function(e,t){for(var n=[],i=0;i<e.children.length;i++){var r=e.children[i],a=t[r.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;wl.get(parseInt(r.ID)).children.forEach(function(e){void 0===e.relationship&&(o.geoID=e.ID)}),n.push(o)}return n},parseScene:function(e,t,n){El=new _l.Group;var i=this.parseModels(e.skeletons,t,n),r=bl.Objects.Model,a=this;i.forEach(function(e){var t=r[e.ID];a.setLookAtProperties(e,t),wl.get(e.ID).parents.forEach(function(t){var n=i.get(t.ID);void 0!==n&&n.add(e)}),null===e.parent&&El.add(e)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),this.setupMorphMaterials(),El.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=zl(e.userData.transformData);e.applyMatrix(t)}});var o=(new Dl).parse();1===El.children.length&&El.children[0].isGroup&&(El.children[0].animations=o,El=El.children[0]),El.animations=o},parseModels:function(e,t,n){var i=new Map,r=bl.Objects.Model;for(var a in r){var o=parseInt(a),s=r[a],u=wl.get(o),c=this.buildSkeleton(u,e,o,s.attrName);if(!c){switch(s.attrType){case"Camera":c=this.createCamera(u);break;case"Light":c=this.createLight(u);break;case"Mesh":c=this.createMesh(u,t,n);break;case"NurbsCurve":c=this.createCurve(u,t);break;case"LimbNode":case"Root":c=new _l.Bone;break;case"Null":default:c=new _l.Group}c.name=_l.PropertyBinding.sanitizeNodeName(s.attrName),c.ID=o}this.getTransformData(c,s),i.set(o,c)}return i},buildSkeleton:function(e,t,n,i){var r=null;return e.parents.forEach(function(e){for(var a in t){var o=t[a];o.rawBones.forEach(function(t,a){if(t.ID===e.ID){var s=r;(r=new _l.Bone).matrixWorld.copy(t.transformLink),r.name=_l.PropertyBinding.sanitizeNodeName(i),r.ID=n,o.bones[a]=r,null!==s&&r.add(s)}})}}),r},createCamera:function(e){var t,n;if(e.children.forEach(function(e){var t=bl.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)}),void 0===n)t=new _l.Object3D;else{var i=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(i=1);var r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);var a=1e3;void 0!==n.FarPlane&&(a=n.FarPlane.value/1e3);var o=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,s=n.AspectHeight.value);var u=o/s,c=45;void 0!==n.FieldOfView&&(c=n.FieldOfView.value);var l=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:t=new _l.PerspectiveCamera(c,u,r,a),null!==l&&t.setFocalLength(l);break;case 1:t=new _l.OrthographicCamera(-o/2,o/2,s/2,-s/2,r,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new _l.Object3D}}return t},createLight:function(e){var t,n;if(e.children.forEach(function(e){var t=bl.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)}),void 0===n)t=new _l.Object3D;else{var i;i=void 0===n.LightType?0:n.LightType.value;var r=16777215;void 0!==n.Color&&(r=(new _l.Color).fromArray(n.Color.value));var a=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(a=0);var o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);switch(i){case 0:t=new _l.PointLight(r,a,o,1);break;case 1:t=new _l.DirectionalLight(r,a);break;case 2:var s=Math.PI/3;void 0!==n.InnerAngle&&(s=_l.Math.degToRad(n.InnerAngle.value));var u=0;void 0!==n.OuterAngle&&(u=_l.Math.degToRad(n.OuterAngle.value),u=Math.max(u,1)),t=new _l.SpotLight(r,a,o,s,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a THREE.PointLight."),t=new _l.PointLight(r,a)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t},createMesh:function(e,t,n){var i,r=null,a=null,o=[];return e.children.forEach(function(e){t.has(e.ID)&&(r=t.get(e.ID)),n.has(e.ID)&&o.push(n.get(e.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new _l.MeshPhongMaterial({color:13421772}),o.push(a)),"color"in r.attributes&&o.forEach(function(e){e.vertexColors=_l.VertexColors}),r.FBX_Deformer?(o.forEach(function(e){e.skinning=!0}),i=new _l.SkinnedMesh(r,a)):i=new _l.Mesh(r,a),i},createCurve:function(e,t){var n=e.children.reduce(function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e},null),i=new _l.LineBasicMaterial({color:3342591,linewidth:1});return new _l.Line(n,i)},getTransformData:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?Hl(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n},setLookAtProperties:function(e,t){"LookAtProperty"in t&&wl.get(e.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){var n=bl.Objects.Model[t.ID];if("Lcl_Translation"in n){var i=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(i),El.add(e.target)):e.lookAt((new _l.Vector3).fromArray(i))}}})},bindSkeleton:function(e,t,n){var i=this.parsePoseNodes();for(var r in e){var a=e[r];wl.get(parseInt(a.ID)).parents.forEach(function(e){if(t.has(e.ID)){var r=e.ID;wl.get(r).parents.forEach(function(e){n.has(e.ID)&&n.get(e.ID).bind(new _l.Skeleton(a.bones),i[e.ID])})}})}},parsePoseNodes:function(){var e={};if("Pose"in bl.Objects){var t=bl.Objects.Pose;for(var n in t)if("BindPose"===t[n].attrType){var i=t[n].PoseNode;Array.isArray(i)?i.forEach(function(t){e[t.Node]=(new _l.Matrix4).fromArray(t.Matrix.a)}):e[i.Node]=(new _l.Matrix4).fromArray(i.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in bl&&"AmbientColor"in bl.GlobalSettings){var e=bl.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(0!==t||0!==n||0!==i){var r=new _l.Color(t,n,i);El.add(new _l.AmbientLight(r,1))}}},setupMorphMaterials:function(){var e=this;El.traverse(function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach(function(n,i){e.setupMorphMaterial(t,n,i)}):e.setupMorphMaterial(t,t.material))})},setupMorphMaterial:function(e,t,n){var i=e.uuid,r=t.uuid,a=!1;if(El.traverse(function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach(function(t){t.uuid===r&&e.uuid!==i&&(a=!0)}):e.material.uuid===r&&e.uuid!==i&&(a=!0))}),!0===a){var o=t.clone();o.morphTargets=!0,void 0===n?e.material=o:e.material[n]=o}else t.morphTargets=!0}},Al.prototype={constructor:Al,parse:function(e){var t=new Map;if("Geometry"in bl.Objects){var n=bl.Objects.Geometry;for(var i in n){var r=wl.get(parseInt(i)),a=this.parseGeometry(r,n[i],e);t.set(parseInt(i),a)}}return t},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(e,t,n){var i=n.skeletons,r=n.morphTargets,a=e.parents.map(function(e){return bl.Objects.Model[e.ID]});if(0!==a.length){var o=e.children.reduce(function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e},null),s=e.children.reduce(function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e},null),u=a[0],c={};"RotationOrder"in u&&(c.eulerOrder=Hl(u.RotationOrder.value)),"InheritType"in u&&(c.inheritType=parseInt(u.InheritType.value)),"GeometricTranslation"in u&&(c.translation=u.GeometricTranslation.value),"GeometricRotation"in u&&(c.rotation=u.GeometricRotation.value),"GeometricScaling"in u&&(c.scale=u.GeometricScaling.value);var l=zl(c);return this.genGeometry(t,o,s,l)}},genGeometry:function(e,t,n,i){var r=new _l.BufferGeometry;e.attrName&&(r.name=e.attrName);var a=this.parseGeoNode(e,t),o=this.genBuffers(a),s=new _l.Float32BufferAttribute(o.vertex,3);if(i.applyToBufferAttribute(s),r.addAttribute("position",s),o.colors.length>0&&r.addAttribute("color",new _l.Float32BufferAttribute(o.colors,3)),t&&(r.addAttribute("skinIndex",new _l.Uint16BufferAttribute(o.weightsIndices,4)),r.addAttribute("skinWeight",new _l.Float32BufferAttribute(o.vertexWeights,4)),r.FBX_Deformer=t),o.normal.length>0){var u=new _l.Float32BufferAttribute(o.normal,3);(new _l.Matrix3).getNormalMatrix(i).applyToBufferAttribute(u),r.addAttribute("normal",u)}if(o.uvs.forEach(function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),r.addAttribute(n,new _l.Float32BufferAttribute(o.uvs[t],2))}),a.material&&"AllSame"!==a.material.mappingType){var c=o.materialIndex[0],l=0;if(o.materialIndex.forEach(function(e,t){e!==c&&(r.addGroup(l,t-l,c),c=e,l=t)}),r.groups.length>0){var h=r.groups[r.groups.length-1],p=h.start+h.count;p!==o.materialIndex.length&&r.addGroup(p,o.materialIndex.length-p,c)}0===r.groups.length&&r.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(r,e,n,i),r},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var i=0;e.LayerElementUV[i];)n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(i,r){void 0===n.weightTable[i]&&(n.weightTable[i]=[]),n.weightTable[i].push({id:t,weight:e.weights[r]})})})),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,i=0,r=!1,a=[],o=[],s=[],u=[],c=[],l=[],h=this;return e.vertexIndices.forEach(function(p,d){var f=!1;p<0&&(p^=-1,f=!0);var m=[],v=[];if(a.push(3*p,3*p+1,3*p+2),e.color){var g=Nl(d,n,p,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[p]&&e.weightTable[p].forEach(function(e){v.push(e.weight),m.push(e.id)}),v.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);var y=[0,0,0,0],x=[0,0,0,0];v.forEach(function(e,t){var n=e,i=m[t];x.forEach(function(e,t,r){if(n>e){r[t]=n,n=e;var a=y[t];y[t]=i,i=a}})}),m=y,v=x}for(;v.length<4;)v.push(0),m.push(0);for(var b=0;b<4;++b)c.push(v[b]),l.push(m[b])}if(e.normal){g=Nl(d,n,p,e.normal);o.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var w=Nl(d,n,p,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var i=Nl(d,n,p,e);void 0===u[t]&&(u[t]=[]),u[t].push(i[0]),u[t].push(i[1])}),i++,f&&(h.genFace(t,e,a,w,o,s,u,c,l,i),n++,i=0,a=[],o=[],s=[],u=[],c=[],l=[])}),t},genFace:function(e,t,n,i,r,a,o,s,u,c){for(var l=2;l<c;l++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(l-1)]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[n[3*l]]),e.vertex.push(t.vertexPositions[n[3*l+1]]),e.vertex.push(t.vertexPositions[n[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[4*(l-1)]),e.weightsIndices.push(u[4*(l-1)+1]),e.weightsIndices.push(u[4*(l-1)+2]),e.weightsIndices.push(u[4*(l-1)+3]),e.weightsIndices.push(u[4*l]),e.weightsIndices.push(u[4*l+1]),e.weightsIndices.push(u[4*l+2]),e.weightsIndices.push(u[4*l+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[3*(l-1)]),e.colors.push(a[3*(l-1)+1]),e.colors.push(a[3*(l-1)+2]),e.colors.push(a[3*l]),e.colors.push(a[3*l+1]),e.colors.push(a[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(l-1)]),e.normal.push(r[3*(l-1)+1]),e.normal.push(r[3*(l-1)+2]),e.normal.push(r[3*l]),e.normal.push(r[3*l+1]),e.normal.push(r[3*l+2])),t.uv&&t.uv.forEach(function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][0]),e.uvs[n].push(o[n][1]),e.uvs[n].push(o[n][2*(l-1)]),e.uvs[n].push(o[n][2*(l-1)+1]),e.uvs[n].push(o[n][2*l]),e.uvs[n].push(o[n][2*l+1])})},addMorphTargets:function(e,t,n,i){if(null!==n){e.morphAttributes.position=[];var r=this;n.rawTargets.forEach(function(n){var a=bl.Objects.Geometry[n.geoID];void 0!==a&&r.genMorphGeometry(e,t,a,i,n.name)})}},genMorphGeometry:function(e,t,n,i,r){var a=new _l.BufferGeometry;n.attrName&&(a.name=n.attrName);for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==t.Vertices?t.Vertices.a.slice():[],u=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],l=0;l<c.length;l++){var h=3*c[l];s[h]+=u[3*l],s[h+1]+=u[3*l+1],s[h+2]+=u[3*l+2]}var p={vertexIndices:o,vertexPositions:s},d=this.genBuffers(p),f=new _l.Float32BufferAttribute(d.vertex,3);f.name=r||n.attrName,i.applyToBufferAttribute(f),e.morphAttributes.position.push(f)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a,r=[];return"IndexToDirect"===n&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:r,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a,r=[];return"IndexToDirect"===n&&(r=e.UVIndex.a),{dataSize:2,buffer:i,indices:r,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a,r=[];return"IndexToDirect"===n&&(r=e.ColorIndex.a),{dataSize:4,buffer:i,indices:r,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var i=e.Materials.a,r=[],a=0;a<i.length;++a)r.push(a);return{dataSize:1,buffer:i,indices:r,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===_l.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new _l.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new _l.BufferGeometry;for(var n,i,r=t-1,a=e.KnotVector.a,o=[],s=e.Points.a,u=0,c=s.length;u<c;u+=4)o.push((new _l.Vector4).fromArray(s,u));if("Closed"===e.Form)o.push(o[0]);else if("Periodic"===e.Form){n=r,i=a.length-1-n;for(u=0;u<r;++u)o.push(o[u])}var l=new _l.NURBSCurve(r,a,o,n,i).getPoints(7*o.length),h=new Float32Array(3*l.length);l.forEach(function(e,t){e.toArray(h,3*t)});var p=new _l.BufferGeometry;return p.addAttribute("position",new _l.BufferAttribute(h,3)),p}},Dl.prototype={constructor:Dl,parse:function(){var e=[],t=this.parseClips();if(void 0!==t){for(var n in t){var i=t[n],r=this.addClip(i);e.push(r)}return e}},parseClips:function(){if(void 0!==bl.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}},parseAnimationCurveNodes:function(){var e=bl.Objects.AnimationCurveNode,t=new Map;for(var n in e){var i=e[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var r={id:i.id,attr:i.attrName,curves:{}};t.set(r.id,r)}}return t},parseAnimationCurves:function(e){var t=bl.Objects.AnimationCurve;for(var n in t){var i={id:t[n].id,times:t[n].KeyTime.a.map(Ol),values:t[n].KeyValueFloat.a},r=wl.get(i.id);if(void 0!==r){var a=r.parents[0].ID,o=r.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=i:o.match(/Y/)?e.get(a).curves.y=i:o.match(/Z/)?e.get(a).curves.z=i:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=i)}}},parseAnimationLayers:function(e){var t=bl.Objects.AnimationLayer,n=new Map;for(var i in t){var r=[],a=wl.get(parseInt(i));if(void 0!==a)a.children.forEach(function(t,n){if(e.has(t.ID)){var i=e.get(t.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===r[n]){wl.get(t.ID).parents.forEach(function(e){void 0!==e.relationship&&(l=e.ID)});var a=bl.Objects.Model[l.toString()],o={modelName:_l.PropertyBinding.sanitizeNodeName(a.attrName),ID:a.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};El.traverse(function(e){(e.ID=a.id)&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))}),o.transform||(o.transform=new _l.Matrix4),"PreRotation"in a&&(o.preRotation=a.PreRotation.value),"PostRotation"in a&&(o.postRotation=a.PostRotation.value),r[n]=o}r[n][i.attr]=i}else if(void 0!==i.curves.morph){if(void 0===r[n]){var s;wl.get(t.ID).parents.forEach(function(e){void 0!==e.relationship&&(s=e.ID)});var u=wl.get(s).parents[0].ID,c=wl.get(u).parents[0].ID,l=wl.get(c).parents[0].ID;a=bl.Objects.Model[l],o={modelName:_l.PropertyBinding.sanitizeNodeName(a.attrName),morphName:bl.Objects.Deformer[s].attrName};r[n]=o}r[n][i.attr]=i}}}),n.set(parseInt(i),r)}return n},parseAnimStacks:function(e){var t=bl.Objects.AnimationStack,n={};for(var i in t){var r=wl.get(parseInt(i)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var a=e.get(r[0].ID);n[i]={name:t[i].attrName,layer:a}}return n},addClip:function(e){var t=[],n=this;return e.layer.forEach(function(e){t=t.concat(n.generateTracks(e))}),new _l.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],n=new _l.Vector3,i=new _l.Quaternion,r=new _l.Vector3;if(e.transform&&e.transform.decompose(n,i,r),n=n.toArray(),i=(new _l.Euler).setFromQuaternion(i,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==o&&t.push(o)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var u=this.generateMorphTrack(e);void 0!==u&&t.push(u)}return t},generateVectorTrack:function(e,t,n,i){var r=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(r,t,n);return new _l.VectorKeyframeTrack(e+"."+i,r,a)},generateRotationTrack:function(e,t,n,i,r,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(_l.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(_l.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(_l.Math.degToRad));var o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,n);void 0!==i&&((i=i.map(_l.Math.degToRad)).push(a),i=(new _l.Euler).fromArray(i),i=(new _l.Quaternion).setFromEuler(i)),void 0!==r&&((r=r.map(_l.Math.degToRad)).push(a),r=(new _l.Euler).fromArray(r),r=(new _l.Quaternion).setFromEuler(r).inverse());for(var u=new _l.Quaternion,c=new _l.Euler,l=[],h=0;h<s.length;h+=3)c.set(s[h],s[h+1],s[h+2],a),u.setFromEuler(c),void 0!==i&&u.premultiply(i),void 0!==r&&u.multiply(r),u.toArray(l,h/3*4);return new _l.QuaternionKeyframeTrack(e+".quaternion",o,l)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,n=t.values.map(function(e){return e/100}),i=El.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new _l.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,n){return n.indexOf(e)==t})},getKeyframeTrackValues:function(e,t,n){var i=n,r=[],a=-1,o=-1,s=-1;return e.forEach(function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==a){var n=t.x.values[a];r.push(n),i[0]=n}else r.push(i[0]);if(-1!==o){var u=t.y.values[o];r.push(u),i[1]=u}else r.push(i[1]);if(-1!==s){var c=t.z.values[s];r.push(c),i[2]=c}else r.push(i[2])}),r},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],i=e.values[t]-n,r=Math.abs(i);if(r>=180){for(var a=r/180,o=i/a,s=n+o,u=e.times[t-1],c=(e.times[t]-u)/a,l=u+c,h=[],p=[];l<e.times[t];)h.push(l),l+=c,p.push(s),s+=o;e.times=jl(e.times,t,h),e.values=jl(e.values,t,p)}}}},Tl.prototype={constructor:Tl,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new Ll,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach(function(e,i){var r=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!r&&!a){var o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,n[++i]):u?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:n},a=this.parseNodeAttr(i),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in o?("PoseNode"===n?o.PoseNode.push(r):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==a.id&&(o[n][a.id]=r)):"number"==typeof a.id?(o[n]={},o[n][a.id]=r):"Properties70"!==n&&(o[n]="PoseNode"===n?[r]:r),"number"==typeof a.id&&(r.id=a.id),""!==a.name&&(r.attrName=a.name),""!==a.type&&(r.attrType=a.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}},parseNodeProperty:function(e,t,n){var i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===i){var o=r.split(",").slice(1),s=parseInt(o[0]),u=parseInt(o[1]),c=r.split(",").slice(3);i="connections",function(e,t){for(var n=0,i=e.length,r=t.length;n<r;n++,i++)e[i]=t[n]}(r=[s,u],c=c.map(function(e){return e.trim().replace(/^"/,"")})),void 0===a[i]&&(a[i]=[])}"Node"===i&&(a.id=r),i in a&&Array.isArray(a[i])?a[i].push(r):"a"!==i?a[i]=r:a.a=r,this.setCurrentProp(a,i),"a"===i&&","!==r.slice(-1)&&(a.a=Gl(r))}else this.parseNodeSpecialProperty(e,i,r)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=Gl(t.a))},parseNodeSpecialProperty:function(e,t,n){var i=n.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=i[0],a=i[1],o=i[2],s=i[3],u=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=Gl(u)}this.getPrevNode()[r]={type:a,type2:o,flag:s,value:u},this.setCurrentProp(this.getPrevNode(),r)}},Cl.prototype={constructor:Cl,parse:function(e){var t=new Fl(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var i=new Ll;!this.endOfContent(t);){var r=this.parseNode(t,n);null!==r&&i.add(r.name,r)}return i},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},i=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32(),a=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),o=e.getString(a);if(0===i)return null;for(var s=[],u=0;u<r;u++)s.push(this.parseProperty(e));var c=s.length>0?s[0]:"",l=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===r&&e.getOffset()===i;i>e.getOffset();){var p=this.parseNode(e,t);null!==p&&this.parseSubNode(o,n,p)}return n.propertyList=s,"number"==typeof c&&(n.id=c),""!==l&&(n.attrName=l),""!==h&&(n.attrType=h),""!==o&&(n.name=o),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if("Connections"===e&&"C"===n.name){var r=[];n.propertyList.forEach(function(e,t){0!==t&&r.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===n.name){Object.keys(n).forEach(function(e){t[e]=n[e]})}else if("Properties70"===e&&"P"===n.name){var a,o=n.propertyList[0],s=n.propertyList[1],u=n.propertyList[2],c=n.propertyList[3];0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),a="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[o]={type:s,type2:u,flag:c,value:a}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i=e.getUint32(),r=e.getUint32(),a=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}"undefined"==typeof Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var o=new Fl(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return o.getBooleanArray(i);case"d":return o.getFloat64Array(i);case"f":return o.getFloat32Array(i);case"i":return o.getInt32Array(i);case"l":return o.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Fl.prototype={constructor:Fl,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),_l.LoaderUtils.decodeText(new Uint8Array(t))}},Ll.prototype={constructor:Ll,add:function(e,t){this[e]=t}};var Bl=[];function Nl(e,t,n,i){var r;switch(i.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);var a=r*i.dataSize,o=a+i.dataSize;return function(e,t,n,i){for(var r=n,a=0;r<i;r++,a++)e[a]=t[r];return e}(Bl,i.buffer,a,o)}var kl=new _l.Euler,Ul=new _l.Vector3;function zl(e){var t,n=new _l.Matrix4,i=new _l.Matrix4,r=new _l.Matrix4,a=new _l.Matrix4,o=new _l.Matrix4,s=new _l.Matrix4,u=new _l.Matrix4,c=new _l.Matrix4,l=new _l.Matrix4,h=new _l.Matrix4,p=new _l.Matrix4,d=new _l.Matrix4,f=new _l.Matrix4,m=e.inheritType?e.inheritType:0;(e.translation&&n.setPosition(Ul.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(_l.Math.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(kl.fromArray(t)));e.rotation&&((t=e.rotation.map(_l.Math.degToRad)).push(e.eulerOrder),r.makeRotationFromEuler(kl.fromArray(t)));e.postRotation&&((t=e.postRotation.map(_l.Math.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(kl.fromArray(t)));e.scale&&s.scale(Ul.fromArray(e.scale)),e.scalingOffset&&c.setPosition(Ul.fromArray(e.scalingOffset)),e.scalingPivot&&u.setPosition(Ul.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(Ul.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(Ul.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(p=e.parentMatrixWorld);var v=i.multiply(r).multiply(a),g=new _l.Matrix4;p.extractRotation(g);var y=new _l.Matrix4,x=new _l.Matrix4,b=new _l.Matrix4,w=new _l.Matrix4;if(w.copyPosition(p),b=w.getInverse(w).multiply(p),x=g.getInverse(g).multiply(b),y=s,0===m)f=g.multiply(v).multiply(x).multiply(y);else if(1===m)f=g.multiply(x).multiply(v).multiply(y);else{var E=(new _l.Matrix4).copy(s),_=x.multiply(E.getInverse(E));f=g.multiply(v).multiply(_).multiply(y)}o=n.multiply(l).multiply(h).multiply(i).multiply(r).multiply(a).multiply(h.getInverse(h)).multiply(c).multiply(u).multiply(s).multiply(u.getInverse(u));var M=(new _l.Matrix4).copyPosition(o),S=p.multiply(M);return d.copyPosition(S),o=d.multiply(f)}function Hl(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Gl(e){return e.split(",").map(function(e){return parseFloat(e)})}function Vl(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),_l.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function jl(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}var Wl=_l.DefaultLoadingManager,Xl=new _l.TextureLoader(Wl);_l.FBXLoader=Ml,_l.FBXLoader.Custom=class extends _l.FBXLoader{constructor(e){super(),this.Assets=e,this.manager=Wl,this.manager.onLoad=this.Assets.onLoad,this.manager.onProgress=this.Assets.onProgress,this.manager.onError=this.Assets.onError}parse(e){if(Rl(e))bl=(new Cl).parse(e);else{var t=Vl(e);if(!Pl(t))throw new Error("THREE.FBXLoader: Unknown format.");if(Il(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Il(t));bl=(new Tl).parse(t)}return Xl.setPath(this.resourcePath).setCrossOrigin(this.crossOrigin),bl}},_l.FBXTreeParser=Sl,_l.FBXTreeParser.Custom=class extends _l.FBXTreeParser{constructor(e,t){super(),this.Assets=t,this.model=e,this.textureLoader=Xl,this.tgaLoader=new _l.TGALoader,this.tgaLoader.setPath(this.textureLoader.path),_l.Loader.Handlers.add(/\.tga$/i,this.tgaLoader)}parse(e){bl=e,wl=this.parseConnections();var t=this.parseEmbedImages(),n=this.parseEmbedTextures(t),i=this.parseMaterials(n),r=this.parseDeformers(),a=(new _l.GeometryParser.Custom).parse(r);return this.parseScene(r,a,i),El}parseEmbedImages(){var e=[],t={},n=bl.Objects.Video;if(void 0===n)return t;for(var i in n){var r=n[i],a=r.Content;if(void 0===a||!1!=(a instanceof ArrayBuffer&&a.byteLength>0)){var o=f(r.RelativeFilename||r.Filename),s=d(o),u="image/"+s;if("bmp"===s)u="image/bmp";else if("jpg"===s||"jpeg"===s)u="image/jpeg";else if("png"===s)u="image/png";else if("tif"===s)u="image/tiff";else if("tga"===s)u="image/tga";else{if("svg"!==s)continue;u="image/svg+xml"}t[o]=this.Assets.makeTexture(o),t[o].mimeType=u,void 0!==a&&(e.push(o),t[o].embedded=this.model.name,t[o].buffer=a)}}return this.model.embed||(this.model.embed=e),t}parseEmbedTextures(e){var t=new Map;if(void 0===bl.Objects.Texture)return t;var n=this.Assets;for(var i in e)e[i].onStart=function(){n.Loader.queue.push(new Promise(t=>{e[i].onLoad=function(){t(!0)}}))},e[i].onProgress=function(){n.Loader.changeFileProgress(this)},e[i].load();var r=bl.Objects.Texture;for(var a in r){var o=r[a],s=f(o.RelativeFilename||o.Filename),u=e[s].data;u.ID=o.id,u.name=o.attrName;var c=o.WrapModeU,l=o.WrapModeV,h=void 0!==c?c.value:0,p=void 0!==l?l.value:0;if(u.wrapS=0===h?_l.RepeatWrapping:_l.ClampToEdgeWrapping,u.wrapT=0===p?_l.RepeatWrapping:_l.ClampToEdgeWrapping,"Scaling"in o){var d=o.Scaling.value;u.repeat.x=d[0],u.repeat.y=d[1]}e[s].data=u,t.set(parseInt(a),u)}return t}parseParameters(e,t,n){var i={};for(var r in e)if("Enum"===e[r].type){var a=/(\d+)\,\_\".*/g.exec(e[r].value);a&&(e[r].value=Number(a[1]))}if(e.vertexColors?i.vertexColors=e.vertexColors.value:i.vertexColors=_l.NoColors,e.side?i.side=e.side.value:i.side=_l.FrontSide,e.shadowSide?i.shadowSide=e.shadowSide.value:i.side?i.shadowSide=i.side:i.shadowSide=_l.FrontSide,e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new _l.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=(new _l.Color).fromArray(e.DiffuseColor.value)),e.Specular?i.specular=(new _l.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new _l.Color).fromArray(e.SpecularColor.value)),e.Shininess&&(i.shininess=e.Shininess.value),e.transparent&&(i.transparent=e.transparent),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value),i.opacity<1&&(i.transparent=!0)),e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),e.blending?i.blending=e.blending.value:!e.blending&&i.opacity<1&&(i.transparent=!0,i.premultipliedAlpha=!0,i.blending=_l.AdditiveBlending),i.blending==_l.CustomBlending&&(e.blendEquation?i.blendEquation=100+e.blendEquation.value:i.blendEquation=_l.AddEquation,e.blendSrc?i.blendSrc=200+e.blendSrc.value:i.blendSrc=_l.SrcAlphaFactor,e.blendDst?i.blendDst=200+e.blendDst.value:i.blendDst=_l.OneMinusSrcAlphaFactor),e.alphaTest&&(i.alphaTest=e.alphaTest.value,e.blending||(i.blending=_l.NormalBlending)),e.Emissive&&(i.emissive=(new _l.Color).fromArray(e.Emissive.value)),e.EmissiveColor&&"Color"===e.EmissiveColor.type?i.emissive=(new _l.Color).fromArray(e.EmissiveColor.value):e.EmissiveFactor?i.emissiveIntensity=parseFloat(e.EmissiveFactor.value):i.emissiveIntensity=1,e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.combine?i.combine=e.combine.value:i.combine=_l.AddOperation,e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),i.userData={},i.userData.outline={},e.outlineMode&&(i.userData.outline.outlineMode=e.outlineMode.value),e.outlineVisible){var o=e.outlineVisible.value;1===o?i.userData.outline.outlineVisible=!0:2===o&&(i.userData.outline.outlineVisible=!1)}if(e.outlineTransparent){var s=e.outlineTransparent.value;i.userData.outline.outlineTransparent=!0===s||"true"===s||"1"===s}if(e.outlinePremultipliedAlpha){var u=e.outlinePremultipliedAlpha.value;i.userData.outline.outlinePremultipliedAlpha=!0===u||"true"===u||"1"===u}if(e.outlineBlending&&(i.userData.outline.outlineBlending=e.outlineBlending.value),e.outlineThickness&&(i.userData.outline.outlineThickness=e.outlineThickness.value),e.outlineColorRGBA){var c=[],l=e.outlineColorRGBA.value.split(",");for(var h in l)c.push(Number(l[h]));i.userData.outline.outlineColor=[c[0],c[1],c[2]],i.userData.outline.outlineAlpha=c[3]}e.outlineThicknessSrc&&(i.userData.outline.outlineThicknessSrc=e.outlineThicknessSrc.value),e.outlineThickRandom&&(i.userData.outline.outlineThickRandom=e.outlineThickRandom.value),e.outlineColorSrc&&(i.userData.outline.outlineColorSrc=e.outlineColorSrc.value),e.outlineAlphaSrc&&(i.userData.outline.outlineAlphaSrc=e.outlineAlphaSrc.value);var p=this;if(wl.get(n).children.forEach(function(e){var n=e.relationship;switch(n){case"Bump":i.bumpMap=p.getTexture(t,e.ID);break;case"DiffuseColor":i.map=p.getTexture(t,e.ID);break;case"DisplacementColor":i.displacementMap=p.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=p.getTexture(t,e.ID);break;case"NormalMap":i.normalMap=p.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=p.getTexture(t,e.ID),i.envMap.mapping=_l.EquirectangularReflectionMapping;break;case"SpecularColor":i.specularMap=p.getTexture(t,e.ID);break;case"TransparentColor":i.alphaMap=p.getTexture(t,e.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}}),i.emissiveIntensity>0)if(i.map&&!i.emissiveMap){if(i.emissiveMap=i.map,JSON.stringify(e.Emissive.value)==JSON.stringify([0,0,0])){var d=i.emissiveIntensity;i.emissive=(new _l.Color).fromArray([d,d,d])}}else i.map||i.emissiveMap||JSON.stringify(e.Emissive.value)!=JSON.stringify([0,0,0])||(i.emissive=i.color);return i}createMesh(e,t,n){var i,r=null,a=null,o=[];return e.children.forEach(function(e){t.has(e.ID)&&(r=t.get(e.ID)),n.has(e.ID)&&o.push(n.get(e.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new _l.MeshPhongMaterial({color:13421772}),o.push(a)),r.FBX_Deformer?(o.forEach(function(e){e.skinning=!0}),i=new _l.SkinnedMesh(r,a)):i=new _l.Mesh(r,a),i}},_l.GeometryParser=Al,_l.GeometryParser.Custom=class extends _l.GeometryParser{constructor(){super()}genGeometry(e,t,n,i){var r=new _l.BufferGeometry;e.attrName&&(r.name=e.attrName);var a=this.parseGeoNode(e,t),o=this.genBuffers(a),s=new _l.Float32BufferAttribute(o.vertex,3);if(i.applyToBufferAttribute(s),r.addAttribute("position",s),o.colors.length>0&&(r.addAttribute("color",new _l.Float32BufferAttribute(o.colors,3)),r.addAttribute("alpha",new _l.Float32BufferAttribute(o.alphas,1))),t&&(r.addAttribute("skinIndex",new _l.Uint16BufferAttribute(o.weightsIndices,4)),r.addAttribute("skinWeight",new _l.Float32BufferAttribute(o.vertexWeights,4)),r.FBX_Deformer=t),o.normal.length>0){var u=new _l.Float32BufferAttribute(o.normal,3);(new _l.Matrix3).getNormalMatrix(i).applyToBufferAttribute(u),r.addAttribute("normal",u)}if(o.uvs.forEach(function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),r.addAttribute(n,new _l.Float32BufferAttribute(o.uvs[t],2))}),a.material&&"AllSame"!==a.material.mappingType){var c=o.materialIndex[0],l=0;if(o.materialIndex.forEach(function(e,t){e!==c&&(r.addGroup(l,t-l,c),c=e,l=t)}),r.groups.length>0){var h=r.groups[r.groups.length-1],p=h.start+h.count;p!==o.materialIndex.length&&r.addGroup(p,o.materialIndex.length-p,c)}0===r.groups.length&&r.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(r,e,n,i),r}genBuffers(e){var t={vertex:[],normal:[],colors:[],alphas:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,i=0,r=!1,a=[],o=[],s=[],u=[],c=[],l=[],h=this;return e.vertexIndices.forEach(function(p,d){var f=!1;p<0&&(p^=-1,f=!0);var m=[],v=[];if(a.push(3*p,3*p+1,3*p+2),e.color){var g=Nl(d,n,p,e.color);s.push(g[0],g[1],g[2],g[3])}if(e.skeleton){if(void 0!==e.weightTable[p]&&e.weightTable[p].forEach(function(e){v.push(e.weight),m.push(e.id)}),v.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);var y=[0,0,0,0],x=[0,0,0,0];v.forEach(function(e,t){var n=e,i=m[t];x.forEach(function(e,t,r){if(n>e){r[t]=n,n=e;var a=y[t];y[t]=i,i=a}})}),m=y,v=x}for(;v.length<4;)v.push(0),m.push(0);for(var b=0;b<4;++b)c.push(v[b]),l.push(m[b])}if(e.normal){g=Nl(d,n,p,e.normal);o.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var w=Nl(d,n,p,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var i=Nl(d,n,p,e);void 0===u[t]&&(u[t]=[]),u[t].push(i[0]),u[t].push(i[1])}),i++,f&&(h.genFace(t,e,a,w,o,s,u,c,l,i),n++,i=0,a=[],o=[],s=[],u=[],c=[],l=[])}),t}genFace(e,t,n,i,r,a,o,s,u,c){for(var l=2;l<c;l++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(l-1)]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[n[3*l]]),e.vertex.push(t.vertexPositions[n[3*l+1]]),e.vertex.push(t.vertexPositions[n[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[4*(l-1)]),e.weightsIndices.push(u[4*(l-1)+1]),e.weightsIndices.push(u[4*(l-1)+2]),e.weightsIndices.push(u[4*(l-1)+3]),e.weightsIndices.push(u[4*l]),e.weightsIndices.push(u[4*l+1]),e.weightsIndices.push(u[4*l+2]),e.weightsIndices.push(u[4*l+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.alphas.push(a[3]),e.colors.push(a[3*(l-1)+1]),e.colors.push(a[3*(l-1)+2]),e.colors.push(a[3*(l-1)+3]),e.alphas.push(a[3*(l-1)+4]),e.colors.push(a[3*l+2]),e.colors.push(a[3*l+3]),e.colors.push(a[3*l+4]),e.alphas.push(a[3*l+5])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(l-1)]),e.normal.push(r[3*(l-1)+1]),e.normal.push(r[3*(l-1)+2]),e.normal.push(r[3*l]),e.normal.push(r[3*l+1]),e.normal.push(r[3*l+2])),t.uv&&t.uv.forEach(function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][0]),e.uvs[n].push(o[n][1]),e.uvs[n].push(o[n][2*(l-1)]),e.uvs[n].push(o[n][2*(l-1)+1]),e.uvs[n].push(o[n][2*l]),e.uvs[n].push(o[n][2*l+1])})}};var $l={};$l.Vector2=bn,$l.Vector3=_n,$l.MOUSE=ee,$l.Quaternion=En,$l.Spherical=Wc,$l.EventDispatcher=j,$l.OrbitControls=function(e,t){var n,i,r,a,o;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new $l.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:$l.MOUSE.LEFT,MIDDLE:$l.MOUSE.MIDDLE,RIGHT:$l.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(u),s.update(),p=h.NONE},this.update=(n=new $l.Vector3,i=(new $l.Quaternion).setFromUnitVectors(e.up,new $l.Vector3(0,1,0)),r=i.clone().inverse(),a=new $l.Vector3,o=new $l.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(i),f.setFromVector3(n),s.autoRotate&&p===h.NONE&&C(2*Math.PI/60/60*s.autoRotateSpeed),f.theta+=m.theta,f.phi+=m.phi,f.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,f.theta)),f.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(s.minDistance,Math.min(s.maxDistance,f.radius)),s.target.add(g),n.setFromSpherical(f),n.applyQuaternion(r),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),v=1,!!(y||a.distanceToSquared(s.object.position)>d||8*(1-o.dot(s.object.quaternion))>d)&&(s.dispatchEvent(u),a.copy(s.object.position),o.copy(s.object.quaternion),y=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",X,!1),s.domElement.removeEventListener("mousedown",k,!1),s.domElement.removeEventListener("wheel",H,!1),s.domElement.removeEventListener("touchstart",V,!1),s.domElement.removeEventListener("touchend",W,!1),s.domElement.removeEventListener("touchmove",j,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",z,!1),window.removeEventListener("keydown",G,!1)};var s=this,u={type:"change"},c={type:"start"},l={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},p=h.NONE,d=1e-6,f=new $l.Spherical,m=new $l.Spherical,v=1,g=new $l.Vector3,y=!1,x=new $l.Vector2,b=new $l.Vector2,w=new $l.Vector2,E=new $l.Vector2,_=new $l.Vector2,M=new $l.Vector2,S=new $l.Vector2,A=new $l.Vector2,D=new $l.Vector2;function T(){return Math.pow(.95,s.zoomSpeed)}function C(e){m.theta-=e}function F(e){m.phi-=e}var L,R=(L=new $l.Vector3,function(e,t){L.setFromMatrixColumn(t,0),L.multiplyScalar(-e),g.add(L)}),P=function(){var e=new $l.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),I=function(){var e=new $l.Vector3;return function(t,n){var i=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var r=s.object.position;e.copy(r).sub(s.target);var a=e.length();a*=Math.tan(s.object.fov/2*Math.PI/180),R(2*t*a/i.clientHeight,s.object.matrix),P(2*n*a/i.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(R(t*(s.object.right-s.object.left)/s.object.zoom/i.clientWidth,s.object.matrix),P(n*(s.object.top-s.object.bottom)/s.object.zoom/i.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function O(e){s.object.isPerspectiveCamera?v/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function B(e){s.object.isPerspectiveCamera?v*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function N(e){E.set(e.clientX,e.clientY)}function k(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===s.enablePan)return;N(e),p=h.PAN}else{if(!1===s.enableRotate)return;!function(e){x.set(e.clientX,e.clientY)}(e),p=h.ROTATE}break;case s.mouseButtons.MIDDLE:if(!1===s.enableZoom)return;!function(e){S.set(e.clientX,e.clientY)}(e),p=h.DOLLY;break;case s.mouseButtons.RIGHT:if(!1===s.enablePan)return;N(e),p=h.PAN}p!==h.NONE&&(document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",z,!1),s.dispatchEvent(c))}}function U(e){if(!1!==s.enabled)switch(e.preventDefault(),p){case h.ROTATE:if(!1===s.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,x).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*w.x/t.clientHeight),F(2*Math.PI*w.y/t.clientHeight),x.copy(b),s.update()}(e);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),D.subVectors(A,S),D.y>0?O(T()):D.y<0&&B(T()),S.copy(A),s.update()}(e);break;case h.PAN:if(!1===s.enablePan)return;!function(e){_.set(e.clientX,e.clientY),M.subVectors(_,E).multiplyScalar(s.panSpeed),I(M.x,M.y),E.copy(_),s.update()}(e)}}function z(e){!1!==s.enabled&&(document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",z,!1),s.dispatchEvent(l),p=h.NONE)}function H(e){!1===s.enabled||!1===s.enableZoom||p!==h.NONE&&p!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(c),function(e){e.deltaY<0?B(T()):e.deltaY>0&&O(T()),s.update()}(e),s.dispatchEvent(l))}function G(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:I(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:I(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:I(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:I(-s.keyPanSpeed,0),s.update()}}(e)}function V(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=h.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);S.set(0,i)}if(s.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(r,a)}}(e),p=h.TOUCH_DOLLY_PAN;break;default:p=h.NONE}p!==h.NONE&&s.dispatchEvent(c)}}function j(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(p!==h.TOUCH_ROTATE)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(b,x).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*w.x/t.clientHeight),F(2*Math.PI*w.y/t.clientHeight),x.copy(b),s.update()}(e);break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;if(p!==h.TOUCH_DOLLY_PAN)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);A.set(0,i),D.set(0,Math.pow(A.y/S.y,s.zoomSpeed)),O(D.y),S.copy(A)}if(s.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(r,a),M.subVectors(_,E).multiplyScalar(s.panSpeed),I(M.x,M.y),E.copy(_)}s.update()}(e);break;default:p=h.NONE}}function W(e){!1!==s.enabled&&(s.dispatchEvent(l),p=h.NONE)}function X(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",X,!1),s.domElement.addEventListener("mousedown",k,!1),s.domElement.addEventListener("wheel",H,!1),s.domElement.addEventListener("touchstart",V,!1),s.domElement.addEventListener("touchend",W,!1),s.domElement.addEventListener("touchmove",j,!1),window.addEventListener("keydown",G,!1),this.update()},$l.OrbitControls.prototype=Object.create($l.EventDispatcher.prototype),$l.OrbitControls.prototype.constructor=$l.OrbitControls,Object.defineProperties($l.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var ql={};ql.Color=$n,ql.VertexColors=he,ql.ShaderLib=Jn,ql.ShaderMaterial=ji,ql.BackSide=se,ql.MultiplyBlending=ve;class Yl{constructor(e,t,n=!1){var i={outlineMode:0,outlineBlending:t.defaultBlending,outlineTransparent:t.defaultTransparent,outlinePremultipliedAlpha:t.defaultPremultipliedAlpha,outlineVisible:!0,outlineThickness:t.defaultThickness,outlineColor:t.defaultColor,outlineAlpha:t.defaultAlpha,outlineThicknessSrc:1,outlineColorSrc:1,outlineAlphaSrc:1,outlineThickRandom:1},r=e.userData.outline;if(!0!==n)if(void 0===r.outlineMode||1===r.outlineMode)i.outlineMode=1,r.outlineTransparent?i.outlineTransparent=r.outlineTransparent:i.outlineTransparent=!0,r.outlinePremultipliedAlpha?i.outlinePremultipliedAlpha=r.outlinePremultipliedAlpha:i.outlinePremultipliedAlpha=!1,r.outlineVisible?i.outlineVisible=r.outlineVisible:e.opacity<1&&(i.outlineVisible=!1),r.outlineBlending?i.outlineBlending=r.outlineBlending:i.outlineBlending=4;else if(2===r.outlineMode)for(var a in r)void 0!==i[a]&&(i[a]=r[a]);var o={};for(var a in i)o[a]={},o[a].value=i[a];o.diffuse={},o.diffuse.value=e.color.toArray(),o.opacity={},o.opacity.value=e.opacity;var s,u,c={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"}[e.type],l=ql.ShaderLib[c];s=l.vertexShader,u=l.uniforms;var h=Object.assign({},u,o),p=s.replace(/void\s+main\s*\(\s*\)/,"\n            #include <fog_pars_vertex>\n\n            attribute float alpha;\n            varying float vAlpha;\n            varying vec3 randomColor;\n            varying float randomAlpha;\n\n            uniform int outlineMode;\n            uniform float outlineThickness;\n            uniform int outlineThicknessSrc;\n            uniform float outlineThickRandom;\n            uniform int outlineColorSrc;\n            uniform int outlineAlphaSrc;\n\n            vec3 defineVertexColor(vec3 color) {\n                return color;\n            }\n            float defineVertexAlpha(float alpha) {\n                return alpha;\n            }\n\n            vec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {\n                float thickness = outlineThickness;\n                float outline = thickness * pos.w;\n\n                if (outlineMode == 2) {\n                    if (outlineThicknessSrc == 2) { // VertexAlpha\n                        outline = thickness * pos.w * vAlpha;\n                    }\n                }\n                if (outlineThickRandom != 1.0) {\n                    outline *= (rand(uv) * outlineThickRandom);\n                }\n                // outline *= (rand(uv) * 2.0);\n                \n            \tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );\n                vec4 norm = normalize( pos - pos2 );\n                return pos + norm * outline;\n            }\n        \nvoid main()").replace(/\}\s*$/,"\n            #if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( PHYSICAL )\n            \t#ifndef USE_ENVMAP\n            \t\tvec3 objectNormal = normalize( normal );\n            \t#endif\n            #endif\n            #ifdef FLIP_SIDED\n            \tobjectNormal = -objectNormal;\n            #endif\n            #ifdef DECLARE_TRANSFORMED\n            \tvec3 transformed = vec3( position );\n            #endif\n\n            vColor = defineVertexColor(color);\n            vAlpha = defineVertexAlpha(alpha);\n\n            gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );\n            #include <fog_vertex>\n        \n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),d={};return/vec3\s+transformed\s*=/.test(s)||/#include\s+<begin_vertex>/.test(s)||(d.DECLARE_TRANSFORMED=!0),new ql.ShaderMaterial({defines:d,uniforms:h,vertexShader:p,fragmentShader:"\n            #include <common>\n            #include <fog_pars_fragment>\n            uniform vec3 diffuse;\n            uniform float opacity;\n\n            uniform int outlineMode;\n            uniform vec3 outlineColor;\n            uniform float outlineAlpha;\n            uniform int outlineColorSrc;\n            uniform int outlineAlphaSrc;\n\n            varying vec3 vColor;\n            varying float vAlpha;\n\n            void main() {     \n                vec3 materialColor = outlineColor;\n                float materialOpacity = outlineAlpha;\n                if (outlineMode == 1) {\n\n                    materialColor = diffuse;\n                    materialOpacity = opacity;\n\n                } else if (outlineMode == 2) {\n\n                    if (outlineColorSrc == 0) {\n                        materialColor = diffuse;\n                    } else if (outlineColorSrc == 1) {\n                        materialColor = outlineColor;\n                    } else if (outlineColorSrc == 2) {\n                        materialColor = vColor;\n                    }\n\n                    if (outlineAlphaSrc == 0) {\n                        materialOpacity = opacity;\n                    } else if (outlineAlphaSrc == 1) {\n                        materialOpacity = outlineAlpha;\n                    } else if (outlineAlphaSrc == 2) {\n                        materialOpacity = vAlpha;\n                    }\n\n                } \n\n                gl_FragColor = vec4( materialColor, materialOpacity );\n            \t#include <fog_fragment>\n            }\n        ",side:ql.BackSide,wireframe:!1,vertexColors:ql.VertexColors,skinning:e.skinning,morphTargets:e.morphTargets,morphNormals:void 0!==e.morphNormals?e.morphNormals:null,transparent:i.outlineTransparent,premultipliedAlpha:i.outlinePremultipliedAlpha,blending:i.outlineBlending,fog:e.fog,visible:i.outlineVisible})}}var Jl={};Jl.ShaderMaterial=ji;var Zl={},Kl={},Ql={};Jl.OutlineEffect=class{},Jl.OutlineEffect.Custom=class extends Jl.OutlineEffect{constructor(e,t){super(),this.enabled=t.enabled,this.renderer=e,this.options=t}createInvisibleMaterial(){return new Jl.ShaderMaterial({name:"invisible",visible:!1})}createMaterial(e){return void 0!=={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"}[e.type]?new Yl(e,this.options):this.createInvisibleMaterial()}getOutlineMaterialFromCache(e){var t=Zl[e.uuid];return void 0===t&&(t={material:this.createMaterial(e),used:!0,keepAlive:this.options.defaultKeepAlive,count:0},Zl[e.uuid]=t),t.used=!0,t.material}getOutlineMaterial(e){var t=this.getOutlineMaterialFromCache(e);return Kl[t.uuid]=e,t}setOutlineMaterial(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=this.getOutlineMaterial(e.material[t]);else e.material=this.getOutlineMaterial(e.material);Ql[e.uuid]=e.onBeforeRender,e.onBeforeRender=this.onBeforeRender.bind(this)}}restoreOriginalMaterial(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=Kl[e.material[t].uuid];else e.material=Kl[e.material.uuid];e.onBeforeRender=Ql[e.uuid]}}onBeforeRender(e,t,n,i,r,a){Kl[r.uuid]}updateUniforms(e,t){var n=t.userData.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==n&&(void 0!==n.thickness&&(e.uniforms.outlineThickness.value=n.thickness),void 0!==n.color&&e.uniforms.outlineColor.value.fromArray(n.color),void 0!==n.alpha&&(e.uniforms.outlineAlpha.value=n.alpha))}updateOutlineMaterial(e,t){if("invisible"!==e.name){var n=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(!1===t.visible?e.visible=!1:e.visible=void 0===n.visible||n.visible,e.transparent=void 0!==n.alpha&&n.alpha<1||t.transparent,void 0!==n.keepAlive&&(Zl[t.uuid].keepAlive=n.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible),!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}}cleanupCache(){for(var e,t=0,n=(e=Object.keys(Kl)).length;t<n;t++)Kl[e[t]]=void 0;for(t=0,n=(e=Object.keys(Ql)).length;t<n;t++)Ql[e[t]]=void 0;for(t=0,n=(e=Object.keys(Zl)).length;t<n;t++){var i=e[t];!1===Zl[i].used?(Zl[i].count++,!1===Zl[i].keepAlive&&Zl[i].count>60&&delete Zl[i]):(Zl[i].used=!1,Zl[i].count=0)}}render(e,t,n,i){if(!1!==this.enabled){var r=this.renderer.autoClear;this.renderer.autoClear=this.autoClear;var a=e.autoUpdate,o=e.background,s=this.renderer.shadowMap.enabled;e.autoUpdate=!1,e.background=null,this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!1,e.traverse(this.setOutlineMaterial.bind(this)),this.renderer.render(e,t,n),e.traverse(this.restoreOriginalMaterial.bind(this)),this.cleanupCache(),e.autoUpdate=a,e.background=o,this.renderer.autoClear=r,this.renderer.shadowMap.enabled=s}}};var eh={};eh.Vector2=bn,eh.Vector3=_n,eh.Face3=Qn,eh.Geometry=hi,eh.SubdivisionModifier=function(e){this.subdivisions=void 0===e?1:e},eh.SubdivisionModifier.prototype.modify=function(e){(e=e.isBufferGeometry?(new eh.Geometry).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},function(){var e=["a","b","c"];function t(e,t,n){return n[Math.min(e,t)+"_"+Math.max(e,t)]}function n(e,t,n,i,r,a){var o,s=Math.min(e,t),u=Math.max(e,t),c=s+"_"+u;c in i?o=i[c]:(o={a:n[s],b:n[u],newEdge:null,faces:[]},i[c]=o);o.faces.push(r),a[e].edges.push(o),a[t].edges.push(o)}function i(e,t,n,i,r){e.push(new eh.Face3(t,n,i,void 0,void 0,r))}function r(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function a(e,t,n,i){e.push([t.clone(),n.clone(),i.clone()])}eh.SubdivisionModifier.prototype.smooth=function(o){var s,u,c,l,h,p,d,f,m,v,g,y,x,b,w=new eh.Vector3,E=[];s=o.vertices,u=o.faces;var _,M,S,A,D,T,C,F,L,R,P,I,O,B,N=void 0!==(c=o.faceVertexUvs[0])&&c.length>0;for(d in function(e,t,i,r){var a,o,s;for(a=0,o=e.length;a<o;a++)i[a]={edges:[]};for(a=0,o=t.length;a<o;a++)n((s=t[a]).a,s.b,e,r,s,i),n(s.b,s.c,e,r,s,i),n(s.c,s.a,e,r,s,i)}(s,u,g=new Array(s.length),y={}),x=[],y){for(M=y[d],S=new eh.Vector3,D=3/8,T=1/8,2!=(C=M.faces.length)&&(D=.5,T=0),S.addVectors(M.a,M.b).multiplyScalar(D),w.set(0,0,0),m=0;m<C;m++){for(A=M.faces[m],v=0;v<3&&((_=s[A[e[v]]])===M.a||_===M.b);v++);w.add(_)}w.multiplyScalar(T),S.add(w),M.newEdge=x.length,x.push(S)}for(b=[],d=0,f=s.length;d<f;d++){for(O=s[d],3==(p=(I=g[d].edges).length)?F=3/16:p>3&&(F=3/(8*p)),L=1-p*F,R=F,p<=2&&2==p&&(L=.75,R=1/8),B=O.clone().multiplyScalar(L),w.set(0,0,0),m=0;m<p;m++)_=(P=I[m]).a!==O?P.a:P.b,w.add(_);w.multiplyScalar(R),B.add(w),b.push(B)}l=b.concat(x);var k,U,z,H,G,V,j,W=b.length;h=[];var X=new eh.Vector2,$=new eh.Vector2,q=new eh.Vector2;for(d=0,f=u.length;d<f;d++)i(h,k=t((A=u[d]).a,A.b,y).newEdge+W,U=t(A.b,A.c,y).newEdge+W,z=t(A.c,A.a,y).newEdge+W,A.materialIndex),i(h,A.a,k,z,A.materialIndex),i(h,A.b,U,k,A.materialIndex),i(h,A.c,z,U,A.materialIndex),N&&(G=(H=c[d])[0],V=H[1],j=H[2],X.set(r(G.x,V.x),r(G.y,V.y)),$.set(r(V.x,j.x),r(V.y,j.y)),q.set(r(G.x,j.x),r(G.y,j.y)),a(E,X,$,q),a(E,G,X,q),a(E,V,$,X),a(E,j,q,$));o.vertices=l,o.faces=h,N&&(o.faceVertexUvs[0]=E)}}();var th={Stats:function(){var e=(performance||Date).now(),t=e,n=0;return{REVISION:16,fps:0,ftime:0,memVal:0,memMax:0,begin:function(){e=(performance||Date).now()},end:function(){n++;var i=(performance||Date).now();if(this.ftime=i-e,i>t+1e3&&(this.fps=1e3*n/(i-t),t=i,n=0,void 0!==performance.memory)){var r=performance.memory;this.memVal=r.usedJSHeapSize/1048576,this.memMax=r.jsHeapSizeLimit/1048576}return i},update:function(){e=this.end()}}}};window.Zlib=U,window.TWEEN=V,window.THREE={},Object.assign(THREE,gl),Object.assign(THREE,yl),Object.assign(THREE,xl),Object.assign(THREE,_l),Object.assign(THREE,$l),Object.assign(THREE,Jl),Object.assign(THREE,eh),Object.assign(THREE,th),THREE.MeshOutlineMaterial=Yl,THREE.MeshCelShaderMaterial=class{constructor(e,t,n=!1){var i={uDirLightPos:{type:"v3",value:new THREE.Vector3(1,0,0)},uDirLightColor:{type:"c",value:new THREE.Color(15658734)},uAmbientLightColor:{type:"c",value:new THREE.Color(328965)},uBaseColor:{type:"c",value:new THREE.Color(16711680)}},r=["varying vec3 vNormal;","varying vec3 vRefract;","void main() {","vec4 mPosition = objectMatrix * vec4( position, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 nWorld = normalize ( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );","vNormal = normalize( normalMatrix * normal );","vec3 I = mPosition.xyz - cameraPosition;","vRefract = refract( normalize( I ), nWorld, 1.02 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),a=["uniform vec3 uBaseColor;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","varying vec3 vRefract;","void main() {","float directionalLightWeighting = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);","vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","float intensity = smoothstep( - 0.5, 1.0, pow( length(lightWeighting), 20.0 ) );","intensity += length(lightWeighting) * 0.2;","float cameraWeighting = dot( normalize( vNormal ), vRefract );","intensity += pow( 1.0 - length( cameraWeighting ), 6.0 );","intensity = intensity * 0.2 + 0.3;","if ( intensity < 0.50 ) {","gl_FragColor = vec4( 2.0 * intensity * uBaseColor, 1.0 );","} else {","gl_FragColor = vec4( 1.0 - 2.0 * ( 1.0 - intensity ) * ( 1.0 - uBaseColor ), 1.0 );","}","}"].join("\n");return new THREE.RawShaderMaterial({defines:{DECLARE_TRANSFORMED:!0},uniforms:i,vertexShader:r,fragmentShader:a,skinning:e.skinning,morphTargets:e.morphTargets,morphNormals:e.morphNormals})}},window.SFE={},Object.assign(SFE,_),Object.assign(SFE,T),Object.assign(SFE,k)}();
